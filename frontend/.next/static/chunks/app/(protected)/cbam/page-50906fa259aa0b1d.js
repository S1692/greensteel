(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[226],{9428:function(e,t,s){Promise.resolve().then(s.bind(s,7655))},7655:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return w}});var r=s(3107),a=s(8396),l=s(3902),n=s(8641),o=s(1860),i=s(6733),c=s(2861),d=s(7828),x=s(5673),u=s(6709),m=s(634),p=s(4867),h=e=>{let{isOpen:t,onClose:s,node:l,onSave:n}=e,[d,x]=(0,a.useState)({name:"",type:"process",description:"",parameters:{},status:"active"}),[u,h]=(0,a.useState)(""),[g,b]=(0,a.useState)("");(0,a.useEffect)(()=>{l&&x(l.data)},[l]),(0,a.useEffect)(()=>{t&&l&&x(l.data)},[t,l]);let y=(e,t)=>{x(s=>({...s,[e]:t}))},f=(e,t)=>{x(s=>({...s,parameters:{...s.parameters,[e]:t}}))},j=e=>{x(t=>{let s={...t.parameters};return delete s[e],{...t,parameters:s}})},w=()=>{x({name:"",type:"process",description:"",parameters:{},status:"active"}),s()};return t?(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(m.Z,{className:"h-6 w-6 text-blue-600"}),(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"프로세스 단계 편집"})]}),(0,r.jsx)("button",{onClick:w,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,r.jsx)(p.Z,{className:"h-5 w-5 text-gray-500"})})]}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n(d)},className:"p-6 space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"단계 이름 *"}),(0,r.jsx)("input",{type:"text",value:d.name,onChange:e=>y("name",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"예: 고로 공정",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"단계 유형 *"}),(0,r.jsxs)("select",{value:d.type,onChange:e=>y("type",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,r.jsx)("option",{value:"input",children:"\uD83D\uDCE5 입력 (Input)"}),(0,r.jsx)("option",{value:"process",children:"⚙️ 처리 (Process)"}),(0,r.jsx)("option",{value:"transport",children:"\uD83D\uDE9A 운송 (Transport)"}),(0,r.jsx)("option",{value:"storage",children:"\uD83D\uDCE6 저장 (Storage)"}),(0,r.jsx)("option",{value:"output",children:"\uD83D\uDCE4 출력 (Output)"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"설명"}),(0,r.jsx)("textarea",{value:d.description,onChange:e=>y("description",e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"이 단계에 대한 상세 설명을 입력하세요"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"상태"}),(0,r.jsxs)("select",{value:d.status,onChange:e=>y("status",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,r.jsx)("option",{value:"active",children:"\uD83D\uDFE2 활성 (Active)"}),(0,r.jsx)("option",{value:"inactive",children:"⚪ 비활성 (Inactive)"}),(0,r.jsx)("option",{value:"warning",children:"\uD83D\uDFE1 경고 (Warning)"}),(0,r.jsx)("option",{value:"error",children:"\uD83D\uDD34 오류 (Error)"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uD83C\uDFED 탄소 배출량 (tCO2/t)"}),(0,r.jsx)("input",{type:"number",step:"0.01",value:d.carbonIntensity||"",onChange:e=>y("carbonIntensity",parseFloat(e.target.value)||void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.00"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"⚡ 에너지 소비량 (GJ/t)"}),(0,r.jsx)("input",{type:"number",step:"0.01",value:d.energyConsumption||"",onChange:e=>y("energyConsumption",parseFloat(e.target.value)||void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.00"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uD83D\uDCCA 물질 흐름 (t/h)"}),(0,r.jsx)("input",{type:"number",step:"0.01",value:d.materialFlow||"",onChange:e=>y("materialFlow",parseFloat(e.target.value)||void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.00"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"파라미터"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("input",{type:"text",value:u,onChange:e=>h(e.target.value),placeholder:"파라미터 이름",className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,r.jsx)("input",{type:"text",value:g,onChange:e=>b(e.target.value),placeholder:"값",className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,r.jsx)("button",{type:"button",onClick:()=>{u.trim()&&g.trim()&&(f(u.trim(),g.trim()),h(""),b(""))},className:"px-3 py-1 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700 transition-colors",children:(0,r.jsx)(i.Z,{className:"h-4 w-4"})})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[Object.entries(d.parameters).map(e=>{let[t,s]=e;return(0,r.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("span",{className:"font-medium text-gray-900",children:[t,":"]}),(0,r.jsx)("span",{className:"ml-2 text-gray-600",children:String(s)})]}),(0,r.jsx)("button",{type:"button",onClick:()=>j(t),className:"p-1 text-red-600 hover:bg-red-100 rounded transition-colors",children:(0,r.jsx)(o.Z,{className:"h-4 w-4"})})]},t)}),0===Object.keys(d.parameters).length&&(0,r.jsx)("div",{className:"text-center py-4 text-gray-500",children:"파라미터가 없습니다. 위에서 추가해보세요."})]})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-3 pt-6 border-t border-gray-200",children:[(0,r.jsx)("button",{type:"button",onClick:w,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:"취소"}),(0,r.jsxs)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors flex items-center gap-2",children:[(0,r.jsx)(c.Z,{className:"h-4 w-4"}),"저장"]})]})]})]})}):null},g=s(6245);s(864);let b={custom:e=>{let{data:t,selected:s}=e,a=e=>{let s="!w-3 !h-3 !border-2 !border-white transition-colors";switch(t.type){case"input":return"".concat(s," !bg-blue-600 hover:!bg-blue-700");case"process":return"".concat(s," !bg-green-600 hover:!bg-green-700");case"transport":return"".concat(s," !bg-orange-600 hover:!bg-orange-700");case"storage":return"".concat(s," !bg-yellow-600 hover:!bg-yellow-700");case"output":return"".concat(s," !bg-purple-600 hover:!bg-purple-700");default:return"".concat(s," !bg-gray-600 hover:!bg-gray-700")}};return(0,r.jsxs)("div",{className:(()=>{let e="p-3 rounded-lg border-2 min-w-[180px] transition-all relative shadow-sm";switch(t.type){case"input":return"".concat(e," bg-blue-50 border-blue-300 text-blue-800 ").concat(s?"border-blue-500 shadow-lg ring-2 ring-blue-200":"");case"process":return"".concat(e," bg-green-50 border-green-300 text-green-800 ").concat(s?"border-green-500 shadow-lg ring-2 ring-green-200":"");case"transport":return"".concat(e," bg-orange-50 border-orange-300 text-orange-800 ").concat(s?"border-orange-500 shadow-lg ring-2 ring-orange-200":"");case"storage":return"".concat(e," bg-yellow-50 border-yellow-300 text-yellow-800 ").concat(s?"border-yellow-500 shadow-lg ring-2 ring-yellow-200":"");case"output":return"".concat(e," bg-purple-50 border-purple-300 text-purple-800 ").concat(s?"border-purple-500 shadow-lg ring-2 ring-purple-200":"");default:return"".concat(e," bg-gray-50 border-gray-300 text-gray-800 ").concat(s?"border-gray-500 shadow-lg ring-2 ring-gray-200":"")}})(),children:["input"!==t.type&&(0,r.jsx)(l.HH,{type:"target",position:g.Ly.Left,isConnectable:!0,className:a("target")}),(0,r.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("span",{className:"text-xs font-medium uppercase opacity-70",children:[(()=>{switch(t.type){case"input":return"\uD83D\uDCE5";case"process":return"⚙️";case"transport":return"\uD83D\uDE9A";case"storage":return"\uD83D\uDCE6";case"output":return"\uD83D\uDCE4";default:return"\uD83D\uDD18"}})()," ",t.type]}),(0,r.jsx)("div",{className:"w-2 h-2 rounded-full ".concat((()=>{switch(t.status){case"active":return"bg-green-500";case"inactive":default:return"bg-gray-500";case"error":return"bg-red-500";case"warning":return"bg-yellow-500"}})())})]})}),(0,r.jsx)("div",{className:"font-semibold text-sm mb-1",children:t.name}),(0,r.jsx)("div",{className:"text-xs opacity-70 mb-2",children:t.description}),t.carbonIntensity&&(0,r.jsxs)("div",{className:"text-xs bg-red-100 text-red-800 px-2 py-1 rounded mb-2",children:["\uD83C\uDFED ",t.carbonIntensity," tCO2/t"]}),t.energyConsumption&&(0,r.jsxs)("div",{className:"text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded mb-2",children:["⚡ ",t.energyConsumption," GJ/t"]}),Object.keys(t.parameters).length>0&&(0,r.jsxs)("div",{className:"text-xs opacity-60 bg-white/50 p-2 rounded",children:[Object.entries(t.parameters).slice(0,3).map(e=>{let[t,s]=e;return(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsxs)("span",{children:[t,":"]}),(0,r.jsx)("span",{className:"font-medium",children:String(s)})]},t)}),Object.keys(t.parameters).length>3&&(0,r.jsx)("div",{className:"text-center opacity-50",children:"..."})]}),"output"!==t.type&&(0,r.jsx)(l.HH,{type:"source",position:g.Ly.Right,isConnectable:!0,className:a("source")})]})}},y={custom:e=>{let{id:t,sourceX:s,sourceY:l,targetX:n,targetY:o,selected:i,data:c}=e,[d]=(0,a.useMemo)(()=>{let e=(s+n)/2;return["M ".concat(s," ").concat(l," Q ").concat(e," ").concat(l," ").concat(n," ").concat(o)]},[s,l,n,o]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{id:t,className:"react-flow__edge-path",d:d,stroke:i?"#3b82f6":"#6b7280",strokeWidth:i?3:2,fill:"none",markerEnd:"url(#arrowhead)"}),i&&(0,r.jsx)("path",{d:d,stroke:"#3b82f6",strokeWidth:6,fill:"none",opacity:.3}),(null==c?void 0:c.label)&&(0,r.jsx)("text",{x:(s+n)/2,y:(l+o)/2,textAnchor:"middle",dominantBaseline:"middle",className:"text-xs fill-gray-600 bg-white px-1",children:c.label})]})}};function f(){let[e,t]=(0,a.useState)([]),[s,m]=(0,a.useState)(null),[p,f]=(0,a.useState)(!1),[j,w]=(0,a.useState)(null),[v,N]=(0,a.useState)(!1),[C,k]=(0,a.useState)(null),[D,S]=(0,a.useState)(!1),[E,_,A]=(0,l.Rr)([]),[O,Z,M]=(0,l.ll)([]),{addNodes:F,addEdges:I,deleteElements:q,getNodes:B,getEdges:L}=(0,l._K)();(0,a.useEffect)(()=>{let e=localStorage.getItem("cbam-process-flows");if(e)try{let r=JSON.parse(e);t(r),r.length>0&&!s&&J(r[0])}catch(e){console.error("저장된 플로우 로드 실패:",e)}},[]),(0,a.useEffect)(()=>{s&&(_(s.nodes),Z(s.edges))},[s,_,Z]);let P=(0,a.useCallback)(e=>{localStorage.setItem("cbam-process-flows",JSON.stringify(e)),t(e)},[]),T=(0,a.useCallback)(()=>{let t=[{id:"e1-2",source:"input-1",target:"process-1",type:"custom",markerEnd:{type:g.QZ.ArrowClosed},data:{label:"원료 공급"}},{id:"e2-3",source:"process-1",target:"transport-1",type:"custom",markerEnd:{type:g.QZ.ArrowClosed},data:{label:"용융철"}},{id:"e3-4",source:"transport-1",target:"process-2",type:"custom",markerEnd:{type:g.QZ.ArrowClosed},data:{label:"운송"}},{id:"e2-4",source:"process-1",target:"process-2",type:"custom",markerEnd:{type:g.QZ.ArrowClosed},data:{label:"직접 공급"}},{id:"e4-5",source:"process-2",target:"storage-1",type:"custom",markerEnd:{type:g.QZ.ArrowClosed},data:{label:"완성품"}},{id:"e5-6",source:"storage-1",target:"output-1",type:"custom",markerEnd:{type:g.QZ.ArrowClosed},data:{label:"출하"}}],s={id:"flow-".concat(Date.now()),name:"새 CBAM 프로세스",description:"새로 생성된 CBAM 프로세스 플로우",nodes:[{id:"input-1",type:"custom",position:{x:100,y:200},data:{name:"철광석 입력",type:"input",description:"철광석, 코크스 등 원료 투입",parameters:{material:"iron_ore",quantity:1e3,unit:"ton"},status:"active",carbonIntensity:.05,energyConsumption:2.5}},{id:"process-1",type:"custom",position:{x:350,y:200},data:{name:"고로 공정",type:"process",description:"철광석 환원 및 용융 공정",parameters:{temperature:1500,pressure:1.2,duration:8},status:"active",carbonIntensity:1.8,energyConsumption:15.2}},{id:"transport-1",type:"custom",position:{x:600,y:100},data:{name:"중간 운송",type:"transport",description:"고로에서 제강공정으로 운송",parameters:{distance:500,mode:"conveyor",duration:2},status:"active",carbonIntensity:.02,energyConsumption:.8}},{id:"process-2",type:"custom",position:{x:600,y:300},data:{name:"제강 공정",type:"process",description:"탄소 함량 조절 및 정련",parameters:{carbon_content:.15,oxygen_blow:!0,duration:4},status:"active",carbonIntensity:.3,energyConsumption:8.5}},{id:"storage-1",type:"custom",position:{x:850,y:200},data:{name:"제품 저장",type:"storage",description:"완성된 철강 제품 저장",parameters:{capacity:2e3,temperature:25,humidity:60},status:"active",carbonIntensity:.01,energyConsumption:.5}},{id:"output-1",type:"custom",position:{x:1100,y:200},data:{name:"철강 제품",type:"output",description:"강판, 강재 등 최종 제품",parameters:{product_type:"steel_plate",quantity:800,unit:"ton",quality:"A-grade"},status:"active"}}],edges:t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),version:"1.0.0"};P([...e,s]),J(s)},[e,P]),J=(0,a.useCallback)(e=>{m(e),_(e.nodes),Z(e.edges)},[_,Z]),z=(0,a.useCallback)(t=>{window.confirm("정말로 이 플로우를 삭제하시겠습니까?")&&(P(e.filter(e=>e.id!==t)),(null==s?void 0:s.id)===t&&(m(null),_([]),Z([])))},[e,s,P,_,Z]),G=(0,a.useCallback)(()=>{if(!s)return;let t={...s,nodes:E,edges:O,updatedAt:new Date().toISOString()};P(e.map(e=>e.id===s.id?t:e)),m(t),alert("플로우가 저장되었습니다!")},[s,E,O,e,P]),Q=(0,a.useCallback)(e=>{let t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),s=URL.createObjectURL(t),r=document.createElement("a");r.href=s,r.download="".concat(e.name.replace(/\s+/g,"_"),".json"),r.click(),URL.revokeObjectURL(s)},[]),R=(0,a.useCallback)(t=>{var s;let r=null===(s=t.target.files)||void 0===s?void 0:s[0];if(!r)return;let a=new FileReader;a.onload=t=>{try{var s;let r=JSON.parse(null===(s=t.target)||void 0===s?void 0:s.result);r.id="flow-".concat(Date.now()),r.createdAt=new Date().toISOString(),r.updatedAt=new Date().toISOString();let a=[...e,r];P(a),J(r),alert("플로우가 성공적으로 가져와졌습니다!")}catch(e){alert("플로우 파일 형식이 올바르지 않습니다.")}},a.readAsText(r)},[e,P,J]),U=(0,a.useCallback)(()=>{s&&F({id:"node-".concat(Date.now()),type:"custom",position:{x:400*Math.random()+100,y:300*Math.random()+100},data:{name:"새 단계",type:"process",description:"새로 추가된 프로세스 단계",parameters:{},status:"active"}})},[s,F]),W=(0,a.useCallback)(e=>{w(e),f(!0)},[]),H=(0,a.useCallback)(e=>{j&&(_(E.map(t=>t.id===j.id?{...t,data:e}:t)),f(!1),w(null))},[j,E,_]),K=(0,a.useCallback)(async e=>{if(e.source&&e.target)try{console.log("\uD83D\uDD17 연결 시도:",e);let t={id:"e".concat(e.source,"-").concat(e.target),source:e.source,target:e.target,type:"custom",markerEnd:{type:g.QZ.ArrowClosed},data:{label:"연결",processType:"standard"}};I(t),console.log("✅ 연결 완료:",t.id)}catch(e){console.error("❌ 연결 실패:",e)}},[I]),V=(0,a.useCallback)((e,t)=>{N(!0),k(t.nodeId)},[]),X=(0,a.useCallback)(()=>{N(!1),k(null)},[]),$=(0,a.useCallback)(()=>{S(!0);let e=E.reduce((e,t)=>e+(t.data.carbonIntensity||0),0),t=E.reduce((e,t)=>e+(t.data.energyConsumption||0),0);console.log("\uD83C\uDFED 총 탄소 배출량:",e,"tCO2"),console.log("⚡ 총 에너지 소비량:",t,"GJ"),setTimeout(()=>{S(!1),alert("시뮬레이션 완료!\n총 탄소 배출량: ".concat(e.toFixed(2)," tCO2\n총 에너지 소비량: ").concat(t.toFixed(2)," GJ"))},2e3)},[E]);return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.map(e=>(0,r.jsxs)("div",{className:"p-4 rounded-lg border-2 cursor-pointer transition-all ".concat((null==s?void 0:s.id)===e.id?"border-primary bg-primary/5":"border-gray-200 bg-white hover:border-gray-300"),onClick:()=>J(e),children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-900",children:e.name}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:t=>{t.stopPropagation(),Q(e)},className:"p-1 hover:bg-gray-100 rounded",title:"내보내기",children:(0,r.jsx)(n.Z,{className:"h-4 w-4"})}),(0,r.jsx)("button",{onClick:t=>{t.stopPropagation(),z(e.id)},className:"p-1 hover:bg-red-100 rounded text-red-600",title:"삭제",children:(0,r.jsx)(o.Z,{className:"h-4 w-4"})})]})]}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:e.description}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,r.jsxs)("span",{children:["노드: ",e.nodes.length,"개"]}),(0,r.jsxs)("span",{children:["v",e.version]})]})]},e.id)),(0,r.jsxs)("button",{onClick:T,className:"p-4 rounded-lg border-2 border-dashed border-gray-300 bg-gray-50 hover:bg-gray-100 transition-colors flex flex-col items-center justify-center text-gray-500 hover:text-gray-700",children:[(0,r.jsx)(i.Z,{className:"h-8 w-8 mb-2"}),(0,r.jsx)("span",{className:"font-medium",children:"새 플로우 생성"})]})]}),s&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:s.name}),(0,r.jsx)("p",{className:"text-gray-600",children:s.description})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsxs)("button",{onClick:G,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,r.jsx)(c.Z,{className:"h-4 w-4"}),"저장"]}),(0,r.jsxs)("button",{onClick:U,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[(0,r.jsx)(i.Z,{className:"h-4 w-4"}),"노드 추가"]}),(0,r.jsxs)("button",{onClick:$,disabled:D,className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50",children:[D?(0,r.jsx)(d.Z,{className:"h-4 w-4"}):(0,r.jsx)(x.Z,{className:"h-4 w-4"}),D?"시뮬레이션 중...":"시뮬레이션"]})]})]}),(0,r.jsx)("div",{className:"h-[600px] border-2 border-gray-200 rounded-lg overflow-hidden",children:(0,r.jsxs)(l.x$,{nodes:E,edges:O,onNodesChange:A,onEdgesChange:M,onConnect:K,onConnectStart:V,onConnectEnd:X,nodeTypes:b,edgeTypes:y,connectionMode:g.jD.Loose,deleteKeyCode:"Delete",multiSelectionKeyCode:"Shift",panOnDrag:!0,zoomOnScroll:!0,zoomOnPinch:!0,panOnScroll:!1,preventScrolling:!0,className:"bg-gray-50",children:[(0,r.jsx)(l.Aq,{gap:12,size:1}),(0,r.jsx)(l.ZX,{}),(0,r.jsx)(l.a9,{nodeStrokeColor:e=>"input"===e.type?"#3b82f6":"output"===e.type?"#8b5cf6":"transport"===e.type?"#f97316":"storage"===e.type?"#eab308":"#22c55e",nodeColor:e=>"input"===e.type?"#dbeafe":"output"===e.type?"#f3e8ff":"transport"===e.type?"#fed7aa":"storage"===e.type?"#fef3c7":"#dcfce7"}),(0,r.jsx)(l.s_,{position:"top-left",className:"bg-white/90 backdrop-blur-sm rounded-lg p-3 shadow-lg",children:(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,r.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),(0,r.jsx)("span",{children:"입력"}),(0,r.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full ml-2"}),(0,r.jsx)("span",{children:"처리"}),(0,r.jsx)("div",{className:"w-3 h-3 bg-orange-500 rounded-full ml-2"}),(0,r.jsx)("span",{children:"운송"}),(0,r.jsx)("div",{className:"w-3 h-3 bg-yellow-500 rounded-full ml-2"}),(0,r.jsx)("span",{children:"저장"}),(0,r.jsx)("div",{className:"w-3 h-3 bg-purple-500 rounded-full ml-2"}),(0,r.jsx)("span",{children:"출력"})]})}),(0,r.jsx)(l.s_,{position:"top-right",className:"bg-white/90 backdrop-blur-sm rounded-lg p-3 shadow-lg",children:(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,r.jsx)("div",{children:"\uD83D\uDCA1 노드의 핸들을 드래그하여 연결하세요"}),(0,r.jsx)("div",{children:"\uD83D\uDD17 파란색 핸들: 입력, 초록색 핸들: 출력"}),(0,r.jsx)("div",{children:"\uD83D\uDD04 연결선을 드래그하여 재연결"}),(0,r.jsx)("div",{children:"\uD83D\uDDD1️ Delete 키로 선택된 요소 삭제"}),v&&(0,r.jsxs)("div",{className:"text-blue-600 font-medium mt-2",children:["\uD83D\uDD17 연결 중... ",C&&"(".concat(C,")")]})]})})]})}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"노드 상세 정보"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:E.map(e=>(0,r.jsxs)("div",{className:"p-4 rounded-lg border-2 ".concat("input"===e.data.type?"border-blue-200 bg-blue-50":"process"===e.data.type?"border-green-200 bg-green-50":"transport"===e.data.type?"border-orange-200 bg-orange-50":"storage"===e.data.type?"border-yellow-200 bg-yellow-50":"border-purple-200 bg-purple-50"),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("input"===e.data.type?"bg-blue-100 text-blue-800":"process"===e.data.type?"bg-green-100 text-green-800":"transport"===e.data.type?"bg-orange-100 text-orange-800":"storage"===e.data.type?"bg-yellow-100 text-yellow-800":"bg-purple-100 text-purple-800"),children:e.data.type}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:()=>W(e),className:"p-1 hover:bg-white/50 rounded",children:(0,r.jsx)(u.Z,{className:"h-3 w-3"})}),(0,r.jsx)("button",{onClick:()=>q({nodes:[e]}),className:"p-1 hover:bg-red-100 rounded text-red-600",children:(0,r.jsx)(o.Z,{className:"h-3 w-3"})})]})]}),(0,r.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:e.data.name}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:e.data.description}),(e.data.carbonIntensity||e.data.energyConsumption)&&(0,r.jsxs)("div",{className:"space-y-2 mb-3",children:[e.data.carbonIntensity&&(0,r.jsxs)("div",{className:"text-xs bg-red-100 text-red-800 px-2 py-1 rounded",children:["\uD83C\uDFED 탄소 배출량: ",e.data.carbonIntensity," tCO2/t"]}),e.data.energyConsumption&&(0,r.jsxs)("div",{className:"text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded",children:["⚡ 에너지 소비량: ",e.data.energyConsumption," GJ/t"]})]}),Object.keys(e.data.parameters).length>0&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h5",{className:"text-xs font-medium text-gray-700 uppercase",children:"파라미터"}),Object.entries(e.data.parameters).map(e=>{let[t,s]=e;return(0,r.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,r.jsxs)("span",{className:"text-gray-600",children:[t,":"]}),(0,r.jsx)("span",{className:"font-medium",children:String(s)})]},t)})]})]},e.id))})]})]}),(0,r.jsxs)("div",{className:"border-t pt-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"플로우 가져오기"}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("input",{type:"file",accept:".json",onChange:R,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-primary file:text-white hover:file:bg-primary/90"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"JSON 형식의 CBAM 프로세스 플로우 파일을 선택하세요"})]})]}),(0,r.jsx)(h,{isOpen:p,onClose:()=>{f(!1),w(null)},node:j,onSave:H})]})}var j=s(6201);function w(){let[e,t]=(0,a.useState)("overview"),[s,n]=(0,a.useState)("calculator"),[o,i]=(0,a.useState)({materialType:"",quantity:"",carbonIntensity:"",transportDistance:"",transportMode:"sea",countryOfOrigin:"",euEtsPrice:"85.50"}),[c,d]=(0,a.useState)(null),[x,u]=(0,a.useState)({name:"",cn_code:"",period_start:"",period_end:"",production_qty:0,sales_qty:0,export_qty:0,inventory_qty:0,defect_rate:0}),[m,p]=(0,a.useState)(!1),[h,g]=(0,a.useState)(null),b=(e,t)=>{u(s=>({...s,[e]:t}))},y=async e=>{e.preventDefault(),p(!0);try{let e=await fetch("/api/cbam/product",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)});if(e.ok)await e.json(),g({message:"제품이 성공적으로 생성되었습니다!",type:"success"}),u({name:"",cn_code:"",period_start:"",period_end:"",production_qty:0,sales_qty:0,export_qty:0,inventory_qty:0,defect_rate:0});else{let t=await e.json();throw Error(t.detail||"제품 생성에 실패했습니다.")}}catch(e){console.error("제품 생성 실패:",e),g({message:"제품 생성에 실패했습니다: ".concat(e instanceof Error?e.message:"알 수 없는 오류"),type:"error"})}finally{p(!1)}};return(0,r.jsxs)(j.Z,{children:[(0,r.jsxs)("div",{className:"w-full h-full p-4 lg:p-6 xl:p-8 space-y-4 lg:space-y-6 xl:space-y-8",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-2 lg:gap-3",children:[(0,r.jsx)("h1",{className:"stitch-h1 text-xl lg:text-2xl xl:text-3xl font-bold",children:"CBAM 관리"}),(0,r.jsx)("p",{className:"stitch-caption text-white/60 text-xs lg:text-sm",children:"탄소국경조정메커니즘(CBAM)을 통합적으로 관리합니다."})]}),(0,r.jsxs)("div",{className:"flex space-x-1 p-1 bg-white/5 rounded-lg",children:[(0,r.jsx)("button",{onClick:()=>t("overview"),className:"flex-1 px-2 lg:px-3 py-1 lg:py-2 rounded-md text-xs lg:text-sm font-medium transition-colors ".concat("overview"===e?"bg-primary text-white":"text-white/60 hover:text-white hover:bg-white/5"),children:"개요"}),(0,r.jsx)("button",{onClick:()=>t("flow"),className:"flex-1 px-2 lg:px-3 py-1 lg:py-2 rounded-md text-xs lg:text-sm font-medium transition-colors ".concat("flow"===e?"bg-primary text-white":"text-white/60 hover:text-white hover:bg-white/5"),children:"프로세스"}),(0,r.jsx)("button",{onClick:()=>t("calculation"),className:"flex-1 px-2 lg:px-3 py-1 lg:py-2 rounded-md text-xs lg:text-sm font-medium transition-colors ".concat("calculation"===e?"bg-primary text-white":"text-white/60 hover:text-white hover:bg-white/5"),children:"계산"}),(0,r.jsx)("button",{onClick:()=>t("reports"),className:"flex-1 px-2 lg:px-3 py-1 lg:py-2 rounded-md text-xs lg:text-sm font-medium transition-colors ".concat("reports"===e?"bg-primary text-white":"text-white/60 hover:text-white hover:bg-white/5"),children:"보고서"}),(0,r.jsx)("button",{onClick:()=>t("settings"),className:"flex-1 px-2 lg:px-3 py-1 lg:py-2 rounded-md text-xs lg:text-sm font-medium transition-colors ".concat("settings"===e?"bg-primary text-white":"text-white/60 hover:text-white hover:bg-white/5"),children:"설정"})]}),(0,r.jsxs)("div",{className:"flex-1 min-h-0",children:["overview"===e&&(0,r.jsx)("div",{className:"h-full space-y-2 lg:space-y-3 xl:space-y-4",children:(0,r.jsxs)("div",{className:"stitch-card p-3 lg:p-4 xl:p-5 h-full",children:[(0,r.jsx)("h3",{className:"stitch-h1 text-base lg:text-lg xl:text-xl font-semibold mb-2 lg:mb-3",children:"CBAM 개요"}),(0,r.jsx)("p",{className:"stitch-caption text-white/60 text-xs lg:text-sm mb-3 lg:mb-4",children:"탄소국경조정메커니즘(CBAM)은 EU가 수입되는 특정 상품의 탄소 배출량에 대해 탄소 가격을 부과하는 제도입니다."}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 lg:gap-3 xl:gap-4",children:[(0,r.jsxs)("div",{className:"p-2 lg:p-3 xl:p-4 bg-white/5 rounded-lg",children:[(0,r.jsx)("h4",{className:"font-semibold text-white mb-1 text-xs lg:text-sm",children:"적용 대상"}),(0,r.jsx)("p",{className:"text-white/60 text-xs",children:"철강, 시멘트, 알루미늄, 비료, 전기, 수소 등"})]}),(0,r.jsxs)("div",{className:"p-2 lg:p-3 xl:p-4 bg-white/5 rounded-lg",children:[(0,r.jsx)("h4",{className:"font-semibold text-white mb-1 text-xs lg:text-sm",children:"탄소 가격"}),(0,r.jsx)("p",{className:"text-white/60 text-xs",children:"EU ETS 평균 가격 기준으로 계산"})]}),(0,r.jsxs)("div",{className:"p-2 lg:p-3 xl:p-4 bg-white/5 rounded-lg",children:[(0,r.jsx)("h4",{className:"font-semibold text-white mb-1 text-xs lg:text-sm",children:"시행 일정"}),(0,r.jsx)("p",{className:"text-white/60 text-xs",children:"2023년 10월부터 단계적 시행"})]})]})]})}),"flow"===e&&(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsxs)("div",{className:"stitch-card p-6",children:[(0,r.jsx)("h3",{className:"stitch-h1 text-lg font-semibold mb-4",children:"CBAM 프로세스 관리"}),(0,r.jsx)("p",{className:"stitch-caption text-white/60",children:"CBAM 관련 프로세스 플로우를 생성하고 관리합니다."}),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsx)(l.tV,{children:(0,r.jsx)(f,{})})})]})}),"calculation"===e&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex space-x-1 p-1 bg-white/5 rounded-lg",children:[(0,r.jsx)("button",{onClick:()=>n("calculator"),className:"flex-1 px-3 py-2 rounded-md text-sm font-medium transition-colors ".concat("calculator"===s?"bg-primary text-white":"text-white/60 hover:text-white hover:bg-white/5"),children:"CBAM 계산기"}),(0,r.jsx)("button",{onClick:()=>n("products"),className:"flex-1 px-3 py-2 rounded-md text-sm font-medium transition-colors ".concat("products"===s?"bg-primary text-white":"text-white/60 hover:text-white hover:bg-white/5"),children:"제품 관리"})]}),"calculator"===s&&(0,r.jsxs)("div",{className:"stitch-card p-4",children:[(0,r.jsx)("h3",{className:"stitch-h1 text-lg font-semibold mb-3",children:"CBAM 계산기"}),(0,r.jsx)("p",{className:"stitch-caption text-white/60 mb-4 text-sm",children:"상품의 탄소 배출량과 CBAM 부과금을 계산합니다."}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold text-white mb-3",children:"입력 정보"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-white/80 mb-1",children:"원료/상품 유형"}),(0,r.jsx)("input",{type:"text",value:o.materialType,onChange:e=>i(t=>({...t,materialType:e.target.value})),placeholder:"예: 철강, 시멘트, 알루미늄",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-white/80 mb-1",children:"수량 (톤)"}),(0,r.jsx)("input",{type:"number",value:o.quantity,onChange:e=>i(t=>({...t,quantity:e.target.value})),placeholder:"0",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-white/80 mb-1",children:"탄소 집약도 (tCO2/t)"}),(0,r.jsx)("input",{type:"number",value:o.carbonIntensity,onChange:e=>i(t=>({...t,carbonIntensity:e.target.value})),placeholder:"0",step:"0.01",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-white/80 mb-1",children:"운송 거리 (km)"}),(0,r.jsx)("input",{type:"number",value:o.transportDistance,onChange:e=>i(t=>({...t,transportDistance:e.target.value})),placeholder:"0",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-white/80 mb-1",children:"운송 수단"}),(0,r.jsxs)("select",{value:o.transportMode,onChange:e=>i(t=>({...t,transportMode:e.target.value})),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary",children:[(0,r.jsx)("option",{value:"sea",children:"해운"}),(0,r.jsx)("option",{value:"rail",children:"철도"}),(0,r.jsx)("option",{value:"road",children:"도로"}),(0,r.jsx)("option",{value:"air",children:"항공"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-white/80 mb-1",children:"EU ETS 가격 (€/tCO2)"}),(0,r.jsx)("input",{type:"number",value:o.euEtsPrice,onChange:e=>i(t=>({...t,euEtsPrice:e.target.value})),placeholder:"85.50",step:"0.01",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary"})]})]}),(0,r.jsx)("button",{onClick:()=>{let e=parseFloat(o.quantity)||0,t=parseFloat(o.carbonIntensity)||0,s=parseFloat(o.transportDistance)||0,r=parseFloat(o.euEtsPrice)||85.5,a=e*t,l=0;switch(o.transportMode){case"sea":l=.02*e*(s/1e3);break;case"rail":l=.03*e*(s/1e3);break;case"road":l=.08*e*(s/1e3);break;case"air":l=.15*e*(s/1e3)}let n=a+l,i=n*r;d({totalEmissions:n,cbamCharge:i,breakdown:{production:a,transport:l,total:n}})},className:"w-full px-4 py-2 bg-primary text-white rounded-lg font-medium hover:bg-primary/90 transition-colors",children:"CBAM 계산하기"})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold text-white mb-3",children:"계산 결과"}),c?(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"p-3 bg-white/5 rounded-lg",children:[(0,r.jsx)("h5",{className:"font-semibold text-white mb-1 text-sm",children:"총 탄소 배출량"}),(0,r.jsxs)("p",{className:"text-xl font-bold text-primary",children:[c.totalEmissions.toFixed(2)," tCO2"]})]}),(0,r.jsxs)("div",{className:"p-3 bg-white/5 rounded-lg",children:[(0,r.jsx)("h5",{className:"font-semibold text-white mb-1 text-sm",children:"CBAM 부과금"}),(0,r.jsxs)("p",{className:"text-xl font-bold text-primary",children:["€",c.cbamCharge.toFixed(2)]})]}),(0,r.jsxs)("div",{className:"p-3 bg-white/5 rounded-lg",children:[(0,r.jsx)("h5",{className:"font-semibold text-white mb-1 text-sm",children:"세부 내역"}),(0,r.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-white/60",children:"생산 과정:"}),(0,r.jsxs)("span",{className:"text-white",children:[c.breakdown.production.toFixed(2)," tCO2"]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-white/60",children:"운송 과정:"}),(0,r.jsxs)("span",{className:"text-white",children:[c.breakdown.transport.toFixed(2)," tCO2"]})]}),(0,r.jsxs)("div",{className:"flex justify-between border-t border-white/20 pt-1",children:[(0,r.jsx)("span",{className:"text-white/80 font-medium",children:"총계:"}),(0,r.jsxs)("span",{className:"text-white font-medium",children:[c.breakdown.total.toFixed(2)," tCO2"]})]})]})]})]}):(0,r.jsx)("div",{className:"p-6 text-center text-white/40",children:(0,r.jsx)("p",{children:"입력 정보를 입력하고 계산하기를 클릭하세요"})})]})]})]}),"products"===s&&(0,r.jsxs)("div",{className:"stitch-card p-4",children:[(0,r.jsx)("h3",{className:"stitch-h1 text-lg font-semibold mb-3",children:"\uD83D\uDCE6 제품 관리"}),(0,r.jsx)("p",{className:"stitch-caption text-white/60 mb-4 text-sm",children:"CBAM 신고를 위한 제품 정보를 생성하고 관리합니다."}),(0,r.jsxs)("form",{onSubmit:y,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-white/80 mb-1",children:"제품명"}),(0,r.jsx)("input",{type:"text",value:x.name,onChange:e=>b("name",e.target.value),placeholder:"제품명을 입력하세요",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-white/80 mb-1",children:"CN 코드"}),(0,r.jsx)("input",{type:"text",value:x.cn_code,onChange:e=>b("cn_code",e.target.value),placeholder:"CN 코드를 입력하세요",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-white/80 mb-1",children:"기간 시작일"}),(0,r.jsx)("input",{type:"date",value:x.period_start,onChange:e=>b("period_start",e.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-white/80 mb-1",children:"기간 종료일"}),(0,r.jsx)("input",{type:"date",value:x.period_end,onChange:e=>b("period_end",e.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-white/80 mb-1",children:"생산량 (톤)"}),(0,r.jsx)("input",{type:"number",value:x.production_qty,onChange:e=>b("production_qty",parseFloat(e.target.value)||0),placeholder:"0",step:"0.01",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-white/80 mb-1",children:"판매량 (톤)"}),(0,r.jsx)("input",{type:"number",value:x.sales_qty,onChange:e=>b("sales_qty",parseFloat(e.target.value)||0),placeholder:"0",step:"0.01",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-white/80 mb-1",children:"수출량 (톤)"}),(0,r.jsx)("input",{type:"number",value:x.export_qty,onChange:e=>b("export_qty",parseFloat(e.target.value)||0),placeholder:"0",step:"0.01",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-white/80 mb-1",children:"재고량 (톤)"}),(0,r.jsx)("input",{type:"number",value:x.inventory_qty,onChange:e=>b("inventory_qty",parseFloat(e.target.value)||0),placeholder:"0",step:"0.01",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-white/80 mb-1",children:"불량률 (%)"}),(0,r.jsx)("input",{type:"number",value:x.defect_rate,onChange:e=>b("defect_rate",parseFloat(e.target.value)||0),placeholder:"0",step:"0.01",min:"0",max:"100",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary"})]})]}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)("button",{type:"submit",disabled:m,className:"px-6 py-2 bg-primary text-white rounded-lg font-medium hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:m?"생성 중...":"제품 생성"})})]})]})]}),"reports"===e&&(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsxs)("div",{className:"stitch-card p-4",children:[(0,r.jsx)("h3",{className:"stitch-h1 text-lg font-semibold mb-3",children:"CBAM 보고서"}),(0,r.jsx)("p",{className:"stitch-caption text-white/60 text-sm",children:"CBAM 관련 보고서를 생성하고 관리합니다."}),(0,r.jsx)("div",{className:"mt-3 p-3 bg-white/5 rounded-lg",children:(0,r.jsx)("p",{className:"text-white/60 text-sm",children:"보고서 기능은 준비 중입니다."})})]})}),"settings"===e&&(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsxs)("div",{className:"stitch-card p-4",children:[(0,r.jsx)("h3",{className:"stitch-h1 text-lg font-semibold mb-3",children:"CBAM 설정"}),(0,r.jsx)("p",{className:"stitch-caption text-white/60 text-sm",children:"CBAM 관련 설정을 관리합니다."}),(0,r.jsx)("div",{className:"mt-3 p-3 bg-white/5 rounded-lg",children:(0,r.jsx)("p",{className:"text-white/60 text-sm",children:"설정 기능은 준비 중입니다."})})]})})]})]}),h&&(0,r.jsxs)("div",{className:"fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 ".concat("success"===h.type?"bg-green-500 text-white":"error"===h.type?"bg-red-500 text-white":"bg-blue-500 text-white"),children:[(0,r.jsx)("span",{children:h.message}),(0,r.jsx)("button",{onClick:()=>g(null),className:"ml-2 hover:opacity-80",children:"✕"})]})]})}},6201:function(e,t,s){"use strict";var r=s(3107),a=s(8396),l=s(3340),n=s(348),o=s(6239),i=s(9571),c=s(5729),d=s(5473),x=s(634),u=s(2203),m=s(3697),p=s(8328),h=s(212),g=s(2252),b=s(5828),y=s(4867);t.Z=e=>{let{children:t}=e,s=(0,l.usePathname)(),f=(0,l.useRouter)(),[j,w]=(0,a.useState)(!1),[v,N]=(0,a.useState)(!1),[C,k]=(0,a.useState)(!1),D=[{name:"홈",href:"/dashboard",icon:o.Z,current:"/dashboard"===s,description:"ESG 요약 및 최근 활동"},{name:"LCA",href:"/lca",icon:i.Z,current:s.startsWith("/lca"),description:"생명주기 평가 프로젝트 관리"},{name:"CBAM",href:"/cbam",icon:c.Z,current:s.startsWith("/cbam"),description:"CBAM 보고서 및 계산"},{name:"데이터 업로드",href:"/data-upload",icon:d.Z,current:"/data-upload"===s,description:"ESG 데이터 업로드 및 관리"},{name:"설정",href:"/settings",icon:x.Z,current:"/settings"===s,description:"계정 및 환경설정"}],S=e=>{f.push(e),w(!1),N(!1)};return(0,a.useEffect)(()=>{let e=e=>{let t=e.target;j&&!t.closest(".sidebar")&&w(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[j]),(0,a.useEffect)(()=>{N(!1),w(!1)},[s]),(0,r.jsxs)("div",{className:"h-screen bg-ecotrace-background text-ecotrace-text flex flex-col",children:[(0,r.jsx)("header",{className:"border-b border-ecotrace-border bg-ecotrace-background/95 backdrop-blur-sm sticky top-0 z-50 flex-shrink-0",children:(0,r.jsx)("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("button",{onClick:()=>w(!j),className:"lg:hidden p-2 rounded-lg hover:bg-ecotrace-secondary/10",children:(0,r.jsx)(u.Z,{className:"w-5 h-5"})}),(0,r.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-ecotrace-accent to-ecotrace-accent/70 rounded-lg flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("span",{className:"text-xl font-bold text-white",children:n.OB.NEXT_PUBLIC_APP_NAME}),(0,r.jsx)("span",{className:"text-xs text-ecotrace-textSecondary",children:"ESG Platform"})]})]}),(0,r.jsx)("nav",{className:"hidden lg:flex items-center gap-6",children:D.map(e=>(0,r.jsxs)("button",{onClick:()=>S(e.href),className:(0,n.cn)("text-sm font-medium transition-all duration-200 px-3 py-2 rounded-lg cursor-pointer flex items-center gap-2",e.current?"text-ecotrace-text bg-ecotrace-secondary/20 border border-ecotrace-accent/30":"text-ecotrace-textSecondary hover:text-ecotrace-text hover:bg-ecotrace-secondary/10"),children:[(0,r.jsx)(e.icon,{className:"w-4 h-4"}),e.name]},e.name))}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("button",{className:"p-2 rounded-lg hover:bg-ecotrace-secondary/10",children:(0,r.jsx)(m.Z,{className:"w-5 h-5"})}),(0,r.jsxs)("button",{className:"p-2 rounded-lg hover:bg-ecotrace-secondary/10 relative",children:[(0,r.jsx)(p.Z,{className:"w-5 h-5"}),(0,r.jsx)("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full"})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("button",{onClick:()=>k(!C),className:"flex items-center gap-2 p-2 rounded-lg hover:bg-ecotrace-secondary/10",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-ecotrace-accent rounded-full flex items-center justify-center",children:(0,r.jsx)(h.Z,{className:"w-4 h-4 text-white"})}),(0,r.jsx)(g.Z,{className:"w-4 h-4"})]}),C&&(0,r.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-ecotrace-secondary border border-ecotrace-border rounded-lg shadow-lg py-2",children:[(0,r.jsxs)("button",{onClick:()=>S("/settings"),className:"w-full px-4 py-2 text-left hover:bg-ecotrace-secondary/50 flex items-center gap-2",children:[(0,r.jsx)(x.Z,{className:"w-4 h-4"}),"설정"]}),(0,r.jsxs)("button",{onClick:()=>{f.push("/")},className:"w-full px-4 py-2 text-left hover:bg-ecotrace-secondary/50 flex items-center gap-2",children:[(0,r.jsx)(b.Z,{className:"w-4 h-4"}),"홈으로"]})]})]})]})]})})}),(0,r.jsxs)("div",{className:"flex flex-1 min-h-0",children:[(0,r.jsx)("div",{className:(0,n.cn)("fixed inset-y-0 left-0 z-40 w-64 bg-ecotrace-secondary border-r border-ecotrace-border transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0 sidebar",j?"translate-x-0":"-translate-x-full"),children:(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-ecotrace-border flex-shrink-0",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-white",children:"메뉴"}),(0,r.jsx)("button",{onClick:()=>w(!1),className:"lg:hidden p-1 rounded-lg hover:bg-ecotrace-secondary/50",children:(0,r.jsx)(y.Z,{className:"w-5 h-5"})})]}),(0,r.jsx)("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto",children:D.map(e=>(0,r.jsxs)("button",{onClick:()=>S(e.href),className:(0,n.cn)("w-full text-left p-3 rounded-lg transition-all duration-200 flex items-center gap-3 group",e.current?"bg-ecotrace-accent text-white":"text-ecotrace-textSecondary hover:text-white hover:bg-ecotrace-secondary/50"),children:[(0,r.jsx)(e.icon,{className:(0,n.cn)("w-5 h-5",e.current?"text-white":"text-ecotrace-textSecondary group-hover:text-white")}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("div",{className:"font-medium",children:e.name}),(0,r.jsx)("div",{className:"text-xs opacity-75",children:e.description})]})]},e.name))}),(0,r.jsx)("div",{className:"p-4 border-t border-ecotrace-border flex-shrink-0",children:(0,r.jsx)("div",{className:"text-xs text-ecotrace-textSecondary text-center",children:"GreenSteel v1.0.0"})})]})}),(0,r.jsx)("main",{className:"flex-1 min-w-0 overflow-auto",children:t})]}),j&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden"})]})}}},function(e){e.O(0,[868,714,974,529,348,309,691,744],function(){return e(e.s=9428)}),_N_E=e.O()}]);