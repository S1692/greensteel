(()=>{var e={};e.id=226,e.ids=[226],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},3628:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GlobalError:()=>s.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d}),n(9068),n(6637),n(7846);var r=n(6323),o=n(8682),i=n(7783),s=n.n(i),a=n(9846),l={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>a[e]);n.d(t,l);let d=["",{children:["(protected)",{children:["cbam",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(n.bind(n,9068)),"C:\\Users\\sdhg\\Desktop\\greensteel-main\\greensteel-main\\frontend\\src\\app\\(protected)\\cbam\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(n.bind(n,6637)),"C:\\Users\\sdhg\\Desktop\\greensteel-main\\greensteel-main\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(n.bind(n,7846)),"C:\\Users\\sdhg\\Desktop\\greensteel-main\\greensteel-main\\frontend\\src\\app\\not-found.tsx"]}],c=["C:\\Users\\sdhg\\Desktop\\greensteel-main\\greensteel-main\\frontend\\src\\app\\(protected)\\cbam\\page.tsx"],u="/(protected)/cbam/page",h={require:n,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:o.x.APP_PAGE,page:"/(protected)/cbam/page",pathname:"/cbam",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3913:(e,t,n)=>{Promise.resolve().then(n.bind(n,3653))},4180:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});let r=(0,n(4410).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},2906:(e,t,n)=>{"use strict";/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(7892),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=r.useState,s=r.useEffect,a=r.useLayoutEffect,l=r.useDebugValue;function d(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!o(e,n)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=i({inst:{value:n,getSnapshot:t}}),o=r[0].inst,c=r[1];return a(function(){o.value=n,o.getSnapshot=t,d(o)&&c({inst:o})},[e,n,t]),s(function(){return d(o)&&c({inst:o}),e(function(){d(o)&&c({inst:o})})},[e]),l(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:c},5203:(e,t,n)=>{"use strict";/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(7892),o=n(1685),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=o.useSyncExternalStore,a=r.useRef,l=r.useEffect,d=r.useMemo,c=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var u=a(null);if(null===u.current){var h={hasValue:!1,value:null};u.current=h}else h=u.current;var p=s(e,(u=d(function(){function e(e){if(!l){if(l=!0,s=e,e=r(e),void 0!==o&&h.hasValue){var t=h.value;if(o(t,e))return a=t}return a=e}if(t=a,i(s,e))return t;var n=r(e);return void 0!==o&&o(t,n)?(s=e,t):(s=e,a=n)}var s,a,l=!1,d=void 0===n?null:n;return[function(){return e(t())},null===d?void 0:function(){return e(d())}]},[t,n,r,o]))[0],u[1]);return l(function(){h.hasValue=!0,h.value=p},[p]),c(p),p}},1685:(e,t,n)=>{"use strict";e.exports=n(2906)},5262:(e,t,n)=>{"use strict";e.exports=n(5203)},3653:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>iE});var r,o,i,s,a,l,d,c,u,h=n(3020),p=n(7892),g=n.n(p),f=n(8825),m=n(4180);function x(){}function y(e){return null==e?x:function(){return this.querySelector(e)}}function b(){return[]}function v(e){return null==e?b:function(){return this.querySelectorAll(e)}}function w(e){return function(){return this.matches(e)}}function _(e){return function(t){return t.matches(e)}}var N=Array.prototype.find;function S(){return this.firstElementChild}var j=Array.prototype.filter;function C(){return Array.from(this.children)}function k(e){return Array(e.length)}function M(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function D(e,t,n,r,o,i){for(var s,a=0,l=t.length,d=i.length;a<d;++a)(s=t[a])?(s.__data__=i[a],r[a]=s):n[a]=new M(e,i[a]);for(;a<l;++a)(s=t[a])&&(o[a]=s)}function E(e,t,n,r,o,i,s){var a,l,d,c=new Map,u=t.length,h=i.length,p=Array(u);for(a=0;a<u;++a)(l=t[a])&&(p[a]=d=s.call(l,l.__data__,a,t)+"",c.has(d)?o[a]=l:c.set(d,l));for(a=0;a<h;++a)d=s.call(e,i[a],a,i)+"",(l=c.get(d))?(r[a]=l,l.__data__=i[a],c.delete(d)):n[a]=new M(e,i[a]);for(a=0;a<u;++a)(l=t[a])&&c.get(p[a])===l&&(o[a]=l)}function $(e){return e.__data__}function A(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}M.prototype={constructor:M,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var P="http://www.w3.org/1999/xhtml";let I={svg:"http://www.w3.org/2000/svg",xhtml:P,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function O(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),I.hasOwnProperty(t)?{space:I[t],local:e}:e}function R(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function B(e,t){return e.style.getPropertyValue(t)||R(e).getComputedStyle(e,null).getPropertyValue(t)}function L(e){return e.trim().split(/^|\s+/)}function H(e){return e.classList||new z(e)}function z(e){this._node=e,this._names=L(e.getAttribute("class")||"")}function T(e,t){for(var n=H(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function V(e,t){for(var n=H(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function F(){this.textContent=""}function q(){this.innerHTML=""}function Z(){this.nextSibling&&this.parentNode.appendChild(this)}function X(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Y(e){var t=O(e);return(t.local?function(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}:function(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===P&&t.documentElement.namespaceURI===P?t.createElement(e):t.createElementNS(n,e)}})(t)}function W(){return null}function K(){var e=this.parentNode;e&&e.removeChild(this)}function U(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function G(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Q(e){return function(){var t=this.__on;if(t){for(var n,r=0,o=-1,i=t.length;r<i;++r)(n=t[r],e.type&&n.type!==e.type||n.name!==e.name)?t[++o]=n:this.removeEventListener(n.type,n.listener,n.options);++o?t.length=o:delete this.__on}}}function J(e,t,n){return function(){var r,o=this.__on,i=function(e){t.call(this,e,this.__data__)};if(o){for(var s=0,a=o.length;s<a;++s)if((r=o[s]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),r.value=t;return}}this.addEventListener(e.type,i,n),r={type:e.type,name:e.name,value:t,listener:i,options:n},o?o.push(r):this.__on=[r]}}function ee(e,t,n){var r=R(e),o=r.CustomEvent;"function"==typeof o?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}z.prototype={add:function(e){0>this._names.indexOf(e)&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var et=[null];function en(e,t){this._groups=e,this._parents=t}function er(){return new en([[document.documentElement]],et)}en.prototype=er.prototype={constructor:en,select:function(e){"function"!=typeof e&&(e=y(e));for(var t=this._groups,n=t.length,r=Array(n),o=0;o<n;++o)for(var i,s,a=t[o],l=a.length,d=r[o]=Array(l),c=0;c<l;++c)(i=a[c])&&(s=e.call(i,i.__data__,c,a))&&("__data__"in i&&(s.__data__=i.__data__),d[c]=s);return new en(r,this._parents)},selectAll:function(e){if("function"==typeof e){var t;t=e,e=function(){var e;return e=t.apply(this,arguments),null==e?[]:Array.isArray(e)?e:Array.from(e)}}else e=v(e);for(var n=this._groups,r=n.length,o=[],i=[],s=0;s<r;++s)for(var a,l=n[s],d=l.length,c=0;c<d;++c)(a=l[c])&&(o.push(e.call(a,a.__data__,c,l)),i.push(a));return new en(o,i)},selectChild:function(e){var t;return this.select(null==e?S:(t="function"==typeof e?e:_(e),function(){return N.call(this.children,t)}))},selectChildren:function(e){var t;return this.selectAll(null==e?C:(t="function"==typeof e?e:_(e),function(){return j.call(this.children,t)}))},filter:function(e){"function"!=typeof e&&(e=w(e));for(var t=this._groups,n=t.length,r=Array(n),o=0;o<n;++o)for(var i,s=t[o],a=s.length,l=r[o]=[],d=0;d<a;++d)(i=s[d])&&e.call(i,i.__data__,d,s)&&l.push(i);return new en(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,$);var n=t?E:D,r=this._parents,o=this._groups;"function"!=typeof e&&(y=e,e=function(){return y});for(var i=o.length,s=Array(i),a=Array(i),l=Array(i),d=0;d<i;++d){var c=r[d],u=o[d],h=u.length,p="object"==typeof(x=e.call(c,c&&c.__data__,d,r))&&"length"in x?x:Array.from(x),g=p.length,f=a[d]=Array(g),m=s[d]=Array(g);n(c,u,f,m,l[d]=Array(h),p,t);for(var x,y,b,v,w=0,_=0;w<g;++w)if(b=f[w]){for(w>=_&&(_=w+1);!(v=m[_])&&++_<g;);b._next=v||null}}return(s=new en(s,r))._enter=a,s._exit=l,s},enter:function(){return new en(this._enter||this._groups.map(k),this._parents)},exit:function(){return new en(this._exit||this._groups.map(k),this._parents)},join:function(e,t,n){var r=this.enter(),o=this,i=this.exit();return"function"==typeof e?(r=e(r))&&(r=r.selection()):r=r.append(e+""),null!=t&&(o=t(o))&&(o=o.selection()),null==n?i.remove():n(i),r&&o?r.merge(o).order():o},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,i=r.length,s=Math.min(o,i),a=Array(o),l=0;l<s;++l)for(var d,c=n[l],u=r[l],h=c.length,p=a[l]=Array(h),g=0;g<h;++g)(d=c[g]||u[g])&&(p[g]=d);for(;l<o;++l)a[l]=n[l];return new en(a,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,o=e[t],i=o.length-1,s=o[i];--i>=0;)(r=o[i])&&(s&&4^r.compareDocumentPosition(s)&&s.parentNode.insertBefore(r,s),s=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=A);for(var n=this._groups,r=n.length,o=Array(r),i=0;i<r;++i){for(var s,a=n[i],l=a.length,d=o[i]=Array(l),c=0;c<l;++c)(s=a[c])&&(d[c]=s);d.sort(t)}return new en(o,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length;o<i;++o){var s=r[o];if(s)return s}return null},size:function(){let e=0;for(let t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o,i=t[n],s=0,a=i.length;s<a;++s)(o=i[s])&&e.call(o,o.__data__,s,i);return this},attr:function(e,t){var n=O(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}}:"function"==typeof t?n.local?function(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}:function(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}:n.local?function(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}:function(e,t){return function(){this.setAttribute(e,t)}})(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?function(e){return function(){this.style.removeProperty(e)}}:"function"==typeof t?function(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}:function(e,t,n){return function(){this.style.setProperty(e,t,n)}})(e,t,null==n?"":n)):B(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?function(e){return function(){delete this[e]}}:"function"==typeof t?function(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}:function(e,t){return function(){this[e]=t}})(e,t)):this.node()[e]},classed:function(e,t){var n=L(e+"");if(arguments.length<2){for(var r=H(this.node()),o=-1,i=n.length;++o<i;)if(!r.contains(n[o]))return!1;return!0}return this.each(("function"==typeof t?function(e,t){return function(){(t.apply(this,arguments)?T:V)(this,e)}}:t?function(e){return function(){T(this,e)}}:function(e){return function(){V(this,e)}})(n,t))},text:function(e){return arguments.length?this.each(null==e?F:("function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}:function(e){return function(){this.textContent=e}})(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?q:("function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(e){return function(){this.innerHTML=e}})(e)):this.node().innerHTML},raise:function(){return this.each(Z)},lower:function(){return this.each(X)},append:function(e){var t="function"==typeof e?e:Y(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var n="function"==typeof e?e:Y(e),r=null==t?W:"function"==typeof t?t:y(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(K)},clone:function(e){return this.select(e?G:U)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,o,i=(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}),s=i.length;if(arguments.length<2){var a=this.node().__on;if(a){for(var l,d=0,c=a.length;d<c;++d)for(r=0,l=a[d];r<s;++r)if((o=i[r]).type===l.type&&o.name===l.name)return l.value}return}for(r=0,a=t?J:Q;r<s;++r)this.each(a(i[r],t,n));return this},dispatch:function(e,t){return this.each(("function"==typeof t?function(e,t){return function(){return ee(this,e,t.apply(this,arguments))}}:function(e,t){return function(){return ee(this,e,t)}})(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,o=e[t],i=0,s=o.length;i<s;++i)(r=o[i])&&(yield r)}};var eo={value:()=>{}};function ei(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw Error("illegal type: "+e);r[e]=[]}return new es(r)}function es(e){this._=e}function ea(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=eo,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}es.prototype=ei.prototype={constructor:es,on:function(e,t){var n,r=this._,o=(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw Error("unknown type: "+e);return{type:e,name:t}}),i=-1,s=o.length;if(arguments.length<2){for(;++i<s;)if((n=(e=o[i]).type)&&(n=function(e,t){for(var n,r=0,o=e.length;r<o;++r)if((n=e[r]).name===t)return n.value}(r[n],e.name)))return n;return}if(null!=t&&"function"!=typeof t)throw Error("invalid callback: "+t);for(;++i<s;)if(n=(e=o[i]).type)r[n]=ea(r[n],e.name,t);else if(null==t)for(n in r)r[n]=ea(r[n],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new es(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,o=Array(n),i=0;i<n;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw Error("unknown type: "+e);for(r=this._[e],i=0,n=r.length;i<n;++i)r[i].value.apply(t,o)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw Error("unknown type: "+e);for(var r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)}};var el,ed,ec=0,eu=0,eh=0,ep=0,eg=0,ef=0,em="object"==typeof performance&&performance.now?performance:Date,ex="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ey(){return eg||(ex(eb),eg=em.now()+ef)}function eb(){eg=0}function ev(){this._call=this._time=this._next=null}function ew(e,t,n){var r=new ev;return r.restart(e,t,n),r}function e_(){eg=(ep=em.now())+ef,ec=eu=0;try{!function(){ey(),++ec;for(var e,t=el;t;)(e=eg-t._time)>=0&&t._call.call(void 0,e),t=t._next;--ec}()}finally{ec=0,function(){for(var e,t,n=el,r=1/0;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:el=t);ed=e,eS(r)}(),eg=0}}function eN(){var e=em.now(),t=e-ep;t>1e3&&(ef-=t,ep=e)}function eS(e){!ec&&(eu&&(eu=clearTimeout(eu)),e-eg>24?(e<1/0&&(eu=setTimeout(e_,e-em.now()-ef)),eh&&(eh=clearInterval(eh))):(eh||(ep=em.now(),eh=setInterval(eN,1e3)),ec=1,ex(e_)))}function ej(e,t,n){var r=new ev;return t=null==t?0:+t,r.restart(n=>{r.stop(),e(n+t)},t,n),r}ev.prototype=ew.prototype={constructor:ev,restart:function(e,t,n){if("function"!=typeof e)throw TypeError("callback is not a function");n=(null==n?ey():+n)+(null==t?0:+t),this._next||ed===this||(ed?ed._next=this:el=this,ed=this),this._call=e,this._time=n,eS()},stop:function(){this._call&&(this._call=null,this._time=1/0,eS())}};var eC=ei("start","end","cancel","interrupt"),ek=[];function eM(e,t,n,r,o,i){var s=e.__transition;if(s){if(n in s)return}else e.__transition={};(function(e,t,n){var r,o=e.__transition;function i(l){var d,c,u,h;if(1!==n.state)return a();for(d in o)if((h=o[d]).name===n.name){if(3===h.state)return ej(i);4===h.state?(h.state=6,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete o[d]):+d<t&&(h.state=6,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete o[d])}if(ej(function(){3===n.state&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(l))}),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(d=0,n.state=3,r=Array(u=n.tween.length),c=-1;d<u;++d)(h=n.tween[d].value.call(e,e.__data__,n.index,n.group))&&(r[++c]=h);r.length=c+1}}function s(t){for(var o=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(a),n.state=5,1),i=-1,s=r.length;++i<s;)r[i].call(e,o);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),a())}function a(){for(var r in n.state=6,n.timer.stop(),delete o[t],o)return;delete e.__transition}o[t]=n,n.timer=ew(function(e){n.state=1,n.timer.restart(i,n.delay,n.time),n.delay<=e&&i(e-n.delay)},0,n.time)})(e,n,{name:t,index:r,group:o,on:eC,tween:ek,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:0})}function eD(e,t){var n=e$(e,t);if(n.state>0)throw Error("too late; already scheduled");return n}function eE(e,t){var n=e$(e,t);if(n.state>3)throw Error("too late; already running");return n}function e$(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw Error("transition not found");return n}function eA(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var eP=180/Math.PI,eI={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function eO(e,t,n,r,o,i){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:o,translateY:i,rotate:Math.atan2(t,e)*eP,skewX:Math.atan(l)*eP,scaleX:s,scaleY:a}}function eR(e,t,n,r){function o(e){return e.length?e.pop()+" ":""}return function(i,s){var a,l,d,c,u=[],h=[];return i=e(i),s=e(s),function(e,r,o,i,s,a){if(e!==o||r!==i){var l=s.push("translate(",null,t,null,n);a.push({i:l-4,x:eA(e,o)},{i:l-2,x:eA(r,i)})}else(o||i)&&s.push("translate("+o+t+i+n)}(i.translateX,i.translateY,s.translateX,s.translateY,u,h),(a=i.rotate)!==(l=s.rotate)?(a-l>180?l+=360:l-a>180&&(a+=360),h.push({i:u.push(o(u)+"rotate(",null,r)-2,x:eA(a,l)})):l&&u.push(o(u)+"rotate("+l+r),(d=i.skewX)!==(c=s.skewX)?h.push({i:u.push(o(u)+"skewX(",null,r)-2,x:eA(d,c)}):c&&u.push(o(u)+"skewX("+c+r),function(e,t,n,r,i,s){if(e!==n||t!==r){var a=i.push(o(i)+"scale(",null,",",null,")");s.push({i:a-4,x:eA(e,n)},{i:a-2,x:eA(t,r)})}else(1!==n||1!==r)&&i.push(o(i)+"scale("+n+","+r+")")}(i.scaleX,i.scaleY,s.scaleX,s.scaleY,u,h),i=s=null,function(e){for(var t,n=-1,r=h.length;++n<r;)u[(t=h[n]).i]=t.x(e);return u.join("")}}}var eB=eR(function(e){let t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?eI:eO(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),eL=eR(function(e){return null==e?eI:(r||(r=document.createElementNS("http://www.w3.org/2000/svg","g")),r.setAttribute("transform",e),e=r.transform.baseVal.consolidate())?eO((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):eI},", ",")",")");function eH(e,t,n){var r=e._id;return e.each(function(){var e=eE(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return e$(e,r).value[t]}}function ez(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function eT(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function eV(){}var eF="\\s*([+-]?\\d+)\\s*",eq="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",eZ="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",eX=/^#([0-9a-f]{3,8})$/,eY=RegExp(`^rgb\\(${eF},${eF},${eF}\\)$`),eW=RegExp(`^rgb\\(${eZ},${eZ},${eZ}\\)$`),eK=RegExp(`^rgba\\(${eF},${eF},${eF},${eq}\\)$`),eU=RegExp(`^rgba\\(${eZ},${eZ},${eZ},${eq}\\)$`),eG=RegExp(`^hsl\\(${eq},${eZ},${eZ}\\)$`),eQ=RegExp(`^hsla\\(${eq},${eZ},${eZ},${eq}\\)$`),eJ={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function e0(){return this.rgb().formatHex()}function e1(){return this.rgb().formatRgb()}function e2(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=eX.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?e3(t):3===n?new e6(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?e4(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?e4(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=eY.exec(e))?new e6(t[1],t[2],t[3],1):(t=eW.exec(e))?new e6(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=eK.exec(e))?e4(t[1],t[2],t[3],t[4]):(t=eU.exec(e))?e4(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=eG.exec(e))?tn(t[1],t[2]/100,t[3]/100,1):(t=eQ.exec(e))?tn(t[1],t[2]/100,t[3]/100,t[4]):eJ.hasOwnProperty(e)?e3(eJ[e]):"transparent"===e?new e6(NaN,NaN,NaN,0):null}function e3(e){return new e6(e>>16&255,e>>8&255,255&e,1)}function e4(e,t,n,r){return r<=0&&(e=t=n=NaN),new e6(e,t,n,r)}function e5(e,t,n,r){var o;return 1==arguments.length?((o=e)instanceof eV||(o=e2(o)),o)?new e6((o=o.rgb()).r,o.g,o.b,o.opacity):new e6:new e6(e,t,n,null==r?1:r)}function e6(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function e7(){return`#${tt(this.r)}${tt(this.g)}${tt(this.b)}`}function e8(){let e=e9(this.opacity);return`${1===e?"rgb(":"rgba("}${te(this.r)}, ${te(this.g)}, ${te(this.b)}${1===e?")":`, ${e})`}`}function e9(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function te(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function tt(e){return((e=te(e))<16?"0":"")+e.toString(16)}function tn(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new to(e,t,n,r)}function tr(e){if(e instanceof to)return new to(e.h,e.s,e.l,e.opacity);if(e instanceof eV||(e=e2(e)),!e)return new to;if(e instanceof to)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),i=Math.max(t,n,r),s=NaN,a=i-o,l=(i+o)/2;return a?(s=t===i?(n-r)/a+(n<r)*6:n===i?(r-t)/a+2:(t-n)/a+4,a/=l<.5?i+o:2-i-o,s*=60):a=l>0&&l<1?0:s,new to(s,a,l,e.opacity)}function to(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function ti(e){return(e=(e||0)%360)<0?e+360:e}function ts(e){return Math.max(0,Math.min(1,e||0))}function ta(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}function tl(e,t,n,r,o){var i=e*e,s=i*e;return((1-3*e+3*i-s)*t+(4-6*i+3*s)*n+(1+3*e+3*i-3*s)*r+s*o)/6}ez(eV,e2,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:e0,formatHex:e0,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return tr(this).formatHsl()},formatRgb:e1,toString:e1}),ez(e6,e5,eT(eV,{brighter(e){return e=null==e?1.4285714285714286:Math.pow(1.4285714285714286,e),new e6(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new e6(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new e6(te(this.r),te(this.g),te(this.b),e9(this.opacity))},displayable(){return -.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:e7,formatHex:e7,formatHex8:function(){return`#${tt(this.r)}${tt(this.g)}${tt(this.b)}${tt((isNaN(this.opacity)?1:this.opacity)*255)}`},formatRgb:e8,toString:e8})),ez(to,function(e,t,n,r){return 1==arguments.length?tr(e):new to(e,t,n,null==r?1:r)},eT(eV,{brighter(e){return e=null==e?1.4285714285714286:Math.pow(1.4285714285714286,e),new to(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new to(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new e6(ta(e>=240?e-240:e+120,o,r),ta(e,o,r),ta(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new to(ti(this.h),ts(this.s),ts(this.l),e9(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=e9(this.opacity);return`${1===e?"hsl(":"hsla("}${ti(this.h)}, ${100*ts(this.s)}%, ${100*ts(this.l)}%${1===e?")":`, ${e})`}`}}));let td=e=>()=>e;function tc(e,t){var n=t-e;return n?function(t){return e+t*n}:td(isNaN(e)?t:e)}let tu=function e(t){var n,r=1==(n=+(n=t))?tc:function(e,t){var r,o,i;return t-e?(r=e,o=t,r=Math.pow(r,i=n),o=Math.pow(o,i)-r,i=1/i,function(e){return Math.pow(r+e*o,i)}):td(isNaN(e)?t:e)};function o(e,t){var n=r((e=e5(e)).r,(t=e5(t)).r),o=r(e.g,t.g),i=r(e.b,t.b),s=tc(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=o(t),e.b=i(t),e.opacity=s(t),e+""}}return o.gamma=e,o}(1);function th(e){return function(t){var n,r,o=t.length,i=Array(o),s=Array(o),a=Array(o);for(n=0;n<o;++n)r=e5(t[n]),i[n]=r.r||0,s[n]=r.g||0,a[n]=r.b||0;return i=e(i),s=e(s),a=e(a),r.opacity=1,function(e){return r.r=i(e),r.g=s(e),r.b=a(e),r+""}}}th(function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),o=e[r],i=e[r+1],s=r>0?e[r-1]:2*o-i,a=r<t-1?e[r+2]:2*i-o;return tl((n-r/t)*t,s,o,i,a)}}),th(function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),o=e[(r+t-1)%t],i=e[r%t],s=e[(r+1)%t],a=e[(r+2)%t];return tl((n-r/t)*t,o,i,s,a)}});var tp=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,tg=RegExp(tp.source,"g");function tf(e,t){var n;return("number"==typeof t?eA:t instanceof e2?tu:(n=e2(t))?(t=n,tu):function(e,t){var n,r,o,i,s,a=tp.lastIndex=tg.lastIndex=0,l=-1,d=[],c=[];for(e+="",t+="";(o=tp.exec(e))&&(i=tg.exec(t));)(s=i.index)>a&&(s=t.slice(a,s),d[l]?d[l]+=s:d[++l]=s),(o=o[0])===(i=i[0])?d[l]?d[l]+=i:d[++l]=i:(d[++l]=null,c.push({i:l,x:eA(o,i)})),a=tg.lastIndex;return a<t.length&&(s=t.slice(a),d[l]?d[l]+=s:d[++l]=s),d.length<2?c[0]?(n=c[0].x,function(e){return n(e)+""}):(r=t,function(){return r}):(t=c.length,function(e){for(var n,r=0;r<t;++r)d[(n=c[r]).i]=n.x(e);return d.join("")})})(e,t)}var tm=er.prototype.constructor;function tx(e){return function(){this.style.removeProperty(e)}}var ty=0;function tb(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}var tv=er.prototype;tb.prototype=(function(e){return er().transition(e)}).prototype={constructor:tb,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=y(e));for(var r=this._groups,o=r.length,i=Array(o),s=0;s<o;++s)for(var a,l,d=r[s],c=d.length,u=i[s]=Array(c),h=0;h<c;++h)(a=d[h])&&(l=e.call(a,a.__data__,h,d))&&("__data__"in a&&(l.__data__=a.__data__),u[h]=l,eM(u[h],t,n,h,u,e$(a,n)));return new tb(i,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=v(e));for(var r=this._groups,o=r.length,i=[],s=[],a=0;a<o;++a)for(var l,d=r[a],c=d.length,u=0;u<c;++u)if(l=d[u]){for(var h,p=e.call(l,l.__data__,u,d),g=e$(l,n),f=0,m=p.length;f<m;++f)(h=p[f])&&eM(h,t,n,f,p,g);i.push(p),s.push(l)}return new tb(i,s,t,n)},selectChild:tv.selectChild,selectChildren:tv.selectChildren,filter:function(e){"function"!=typeof e&&(e=w(e));for(var t=this._groups,n=t.length,r=Array(n),o=0;o<n;++o)for(var i,s=t[o],a=s.length,l=r[o]=[],d=0;d<a;++d)(i=s[d])&&e.call(i,i.__data__,d,s)&&l.push(i);return new tb(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw Error();for(var t=this._groups,n=e._groups,r=t.length,o=n.length,i=Math.min(r,o),s=Array(r),a=0;a<i;++a)for(var l,d=t[a],c=n[a],u=d.length,h=s[a]=Array(u),p=0;p<u;++p)(l=d[p]||c[p])&&(h[p]=l);for(;a<r;++a)s[a]=t[a];return new tb(s,this._parents,this._name,this._id)},selection:function(){return new tm(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=++ty,r=this._groups,o=r.length,i=0;i<o;++i)for(var s,a=r[i],l=a.length,d=0;d<l;++d)if(s=a[d]){var c=e$(s,t);eM(s,e,n,d,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new tb(r,this._parents,e,n)},call:tv.call,nodes:tv.nodes,node:tv.node,size:tv.size,empty:tv.empty,each:tv.each,on:function(e,t){var n,r,o,i=this._id;return arguments.length<2?e$(this.node(),i).on.on(e):this.each((o=(e+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})?eD:eE,function(){var s=o(this,i),a=s.on;a!==n&&(r=(n=a).copy()).on(e,t),s.on=r}))},attr:function(e,t){var n=O(e),r="transform"===n?eL:tf;return this.attrTween(e,"function"==typeof t?(n.local?function(e,t,n){var r,o,i;return function(){var s,a,l=n(this);return null==l?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local))===(a=l+"")?null:s===r&&a===o?i:(o=a,i=t(r=s,l))}}:function(e,t,n){var r,o,i;return function(){var s,a,l=n(this);return null==l?void this.removeAttribute(e):(s=this.getAttribute(e))===(a=l+"")?null:s===r&&a===o?i:(o=a,i=t(r=s,l))}})(n,r,eH(this,"attr."+e,t)):null==t?(n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}})(n):(n.local?function(e,t,n){var r,o,i=n+"";return function(){var s=this.getAttributeNS(e.space,e.local);return s===i?null:s===r?o:o=t(r=s,n)}}:function(e,t,n){var r,o,i=n+"";return function(){var s=this.getAttribute(e);return s===i?null:s===r?o:o=t(r=s,n)}})(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw Error();var r=O(e);return this.tween(n,(r.local?function(e,t){var n,r;function o(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&function(t){this.setAttributeNS(e.space,e.local,o.call(this,t))}),n}return o._value=t,o}:function(e,t){var n,r;function o(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&function(t){this.setAttribute(e,o.call(this,t))}),n}return o._value=t,o})(r,t))},style:function(e,t,n){var r,o,i,s,a,l,d,c,u,h,p,g,f,m,x,y,b,v,w,_,N,S="transform"==(e+="")?eB:tf;return null==t?this.styleTween(e,(r=e,function(){var e=B(this,r),t=(this.style.removeProperty(r),B(this,r));return e===t?null:e===o&&t===i?s:s=S(o=e,i=t)})).on("end.style."+e,tx(e)):"function"==typeof t?this.styleTween(e,(a=e,l=eH(this,"style."+e,t),function(){var e=B(this,a),t=l(this),n=t+"";return null==t&&(this.style.removeProperty(a),n=t=B(this,a)),e===n?null:e===d&&n===c?u:(c=n,u=S(d=e,t))})).each((h=this._id,b="end."+(y="style."+(p=e)),function(){var e=eE(this,h),t=e.on,n=null==e.value[y]?x||(x=tx(p)):void 0;(t!==g||m!==n)&&(f=(g=t).copy()).on(b,m=n),e.on=f})):this.styleTween(e,(v=e,N=t+"",function(){var e=B(this,v);return e===N?null:e===w?_:_=S(w=e,t)}),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw Error();return this.tween(r,function(e,t,n){var r,o;function i(){var i=t.apply(this,arguments);return i!==o&&(r=(o=i)&&function(t){this.style.setProperty(e,i.call(this,t),n)}),r}return i._value=t,i}(e,t,null==n?"":n))},text:function(e){var t,n;return this.tween("text","function"==typeof e?(t=eH(this,"text",e),function(){var e=t(this);this.textContent=null==e?"":e}):(n=null==e?"":e+"",function(){this.textContent=n}))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw Error();return this.tween(t,function(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&function(e){this.textContent=r.call(this,e)}),t}return r._value=e,r}(e))},remove:function(){var e;return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,o=e$(this.node(),n).tween,i=0,s=o.length;i<s;++i)if((r=o[i]).name===e)return r.value;return null}return this.each((null==t?function(e,t){var n,r;return function(){var o=eE(this,e),i=o.tween;if(i!==n){r=n=i;for(var s=0,a=r.length;s<a;++s)if(r[s].name===t){(r=r.slice()).splice(s,1);break}}o.tween=r}}:function(e,t,n){var r,o;if("function"!=typeof n)throw Error();return function(){var i=eE(this,e),s=i.tween;if(s!==r){o=(r=s).slice();for(var a={name:t,value:n},l=0,d=o.length;l<d;++l)if(o[l].name===t){o[l]=a;break}l===d&&o.push(a)}i.tween=o}})(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){eD(this,e).delay=+t.apply(this,arguments)}}:function(e,t){return t=+t,function(){eD(this,e).delay=t}})(t,e)):e$(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){eE(this,e).duration=+t.apply(this,arguments)}}:function(e,t){return t=+t,function(){eE(this,e).duration=t}})(t,e)):e$(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw Error();return function(){eE(this,e).ease=t}}(t,e)):e$(this.node(),t).ease},easeVarying:function(e){var t;if("function"!=typeof e)throw Error();return this.each((t=this._id,function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw Error();eE(this,t).ease=n}))},end:function(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(i,s){var a={value:s},l={value:function(){0==--o&&i()}};n.each(function(){var n=eE(this,r),o=n.on;o!==e&&((t=(e=o).copy())._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),n.on=t}),0===o&&i()})},[Symbol.iterator]:tv[Symbol.iterator]};var tw={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function t_(e,t,n){this.k=e,this.x=t,this.y=n}er.prototype.interrupt=function(e){return this.each(function(){!function(e,t){var n,r,o,i=e.__transition,s=!0;if(i){for(o in t=null==t?null:t+"",i){if((n=i[o]).name!==t){s=!1;continue}r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete i[o]}s&&delete e.__transition}}(this,e)})},er.prototype.transition=function(e){var t,n;e instanceof tb?(t=e._id,e=e._name):(t=++ty,(n=tw).time=ey(),e=null==e?null:e+"");for(var r=this._groups,o=r.length,i=0;i<o;++i)for(var s,a=r[i],l=a.length,d=0;d<l;++d)(s=a[d])&&eM(s,e,t,d,a,n||function(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw Error(`transition ${t} not found`);return n}(s,t));return new tb(r,this._parents,e,t)},t_.prototype={constructor:t_,scale:function(e){return 1===e?this:new t_(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new t_(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new t_(1,0,0),t_.prototype;let tN={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${"source"===e?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},tS=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],tj=["Enter"," ","Escape"],tC={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};(function(e){e.Strict="strict",e.Loose="loose"})(o||(o={})),function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"}(i||(i={})),function(e){e.Partial="partial",e.Full="full"}(s||(s={}));let tk={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(a||(a={})),function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"}(l||(l={})),function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"}(d||(d={}));let tM={[d.Left]:d.Right,[d.Right]:d.Left,[d.Top]:d.Bottom,[d.Bottom]:d.Top};function tD(e){return null===e?null:e?"valid":"invalid"}let tE=e=>"id"in e&&"source"in e&&"target"in e,t$=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),tA=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),tP=(e,t=[0,0])=>{let{width:n,height:r}=t8(e),o=e.origin??t,i=n*o[0],s=r*o[1];return{x:e.position.x-i,y:e.position.y-s}},tI=(e,t={nodeOrigin:[0,0]})=>0===e.length?{x:0,y:0,width:0,height:0}:tY(e.reduce((e,n)=>{let r="string"==typeof n,o=t.nodeLookup||r?void 0:n;return t.nodeLookup&&(o=r?t.nodeLookup.get(n):tA(n)?n:t.nodeLookup.get(n.id)),tZ(e,o?tK(o,t.nodeOrigin):{x:0,y:0,x2:0,y2:0})},{x:1/0,y:1/0,x2:-1/0,y2:-1/0})),tO=(e,t={})=>{if(0===e.size)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(e=>{if(void 0===t.filter||t.filter(e)){let t=tK(e);n=tZ(n,t)}}),tY(n)},tR=(e,t,[n,r,o]=[0,0,1],i=!1,s=!1)=>{let a={...t2(t,[n,r,o]),width:t.width/o,height:t.height/o},l=[];for(let t of e.values()){let{measured:e,selectable:n=!0,hidden:r=!1}=t;if(s&&!n||r)continue;let o=e.width??t.width??t.initialWidth??null,d=e.height??t.height??t.initialHeight??null,c=tG(a,tW(t)),u=(o??0)*(d??0),h=i&&c>0;(!t.internals.handleBounds||h||c>=u||t.dragging)&&l.push(t)}return l},tB=(e,t)=>{let n=new Set;return e.forEach(e=>{n.add(e.id)}),t.filter(e=>n.has(e.source)||n.has(e.target))};async function tL({nodes:e,width:t,height:n,panZoom:r,minZoom:o,maxZoom:i},s){if(0===e.size)return Promise.resolve(!0);let a=t5(tO(function(e,t){let n=new Map,r=t?.nodes?new Set(t.nodes.map(e=>e.id)):null;return e.forEach(e=>{e.measured.width&&e.measured.height&&(t?.includeHiddenNodes||!e.hidden)&&(!r||r.has(e.id))&&n.set(e.id,e)}),n}(e,s)),t,n,s?.minZoom??o,s?.maxZoom??i,s?.padding??.1);return await r.setViewport(a,{duration:s?.duration,ease:s?.ease,interpolate:s?.interpolate}),Promise.resolve(!0)}async function tH({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:o}){let i=new Set(e.map(e=>e.id)),s=[];for(let e of n){if(!1===e.deletable)continue;let t=i.has(e.id),n=!t&&e.parentId&&s.find(t=>t.id===e.parentId);(t||n)&&s.push(e)}let a=new Set(t.map(e=>e.id)),l=r.filter(e=>!1!==e.deletable),d=tB(s,l);for(let e of l)a.has(e.id)&&!d.find(t=>t.id===e.id)&&d.push(e);if(!o)return{edges:d,nodes:s};let c=await o({nodes:s,edges:d});return"boolean"==typeof c?c?{edges:d,nodes:s}:{edges:[],nodes:[]}:c}let tz=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),tT=(e={x:0,y:0},t,n)=>({x:tz(e.x,t[0][0],t[1][0]-(n?.width??0)),y:tz(e.y,t[0][1],t[1][1]-(n?.height??0))});function tV(e,t,n){let{width:r,height:o}=t8(n),{x:i,y:s}=n.internals.positionAbsolute;return tT(e,[[i,s],[i+r,s+o]],t)}let tF=(e,t,n)=>e<t?tz(Math.abs(e-t),1,t)/t:e>n?-tz(Math.abs(e-n),1,t)/t:0,tq=(e,t,n=15,r=40)=>[tF(e.x,r,t.width-r)*n,tF(e.y,r,t.height-r)*n],tZ=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),tX=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),tY=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),tW=(e,t=[0,0])=>{let{x:n,y:r}=tA(e)?e.internals.positionAbsolute:tP(e,t);return{x:n,y:r,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},tK=(e,t=[0,0])=>{let{x:n,y:r}=tA(e)?e.internals.positionAbsolute:tP(e,t);return{x:n,y:r,x2:n+(e.measured?.width??e.width??e.initialWidth??0),y2:r+(e.measured?.height??e.height??e.initialHeight??0)}},tU=(e,t)=>tY(tZ(tX(e),tX(t))),tG=(e,t)=>Math.ceil(Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x))*Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y))),tQ=e=>tJ(e.width)&&tJ(e.height)&&tJ(e.x)&&tJ(e.y),tJ=e=>!isNaN(e)&&isFinite(e),t0=(e,t)=>{},t1=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),t2=({x:e,y:t},[n,r,o],i=!1,s=[1,1])=>{let a={x:(e-n)/o,y:(t-r)/o};return i?t1(a,s):a},t3=({x:e,y:t},[n,r,o])=>({x:e*o+n,y:t*o+r});function t4(e,t){if("number"==typeof e)return Math.floor((t-t/(1+e))*.5);if("string"==typeof e&&e.endsWith("px")){let t=parseFloat(e);if(!Number.isNaN(t))return Math.floor(t)}if("string"==typeof e&&e.endsWith("%")){let n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}let t5=(e,t,n,r,o,i)=>{let s=function(e,t,n){if("string"==typeof e||"number"==typeof e){let r=t4(e,n),o=t4(e,t);return{top:r,right:o,bottom:r,left:o,x:2*o,y:2*r}}if("object"==typeof e){let r=t4(e.top??e.y??0,n),o=t4(e.bottom??e.y??0,n),i=t4(e.left??e.x??0,t),s=t4(e.right??e.x??0,t);return{top:r,right:s,bottom:o,left:i,x:i+s,y:r+o}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}(i,t,n),a=tz(Math.min((t-s.x)/e.width,(n-s.y)/e.height),r,o),l=e.x+e.width/2,d=e.y+e.height/2,c=t/2-l*a,u=n/2-d*a,h=function(e,t,n,r,o,i){let{x:s,y:a}=t3(e,[t,n,r]),{x:l,y:d}=t3({x:e.x+e.width,y:e.y+e.height},[t,n,r]);return{left:Math.floor(s),top:Math.floor(a),right:Math.floor(o-l),bottom:Math.floor(i-d)}}(e,c,u,a,t,n),p={left:Math.min(h.left-s.left,0),top:Math.min(h.top-s.top,0),right:Math.min(h.right-s.right,0),bottom:Math.min(h.bottom-s.bottom,0)};return{x:c-p.left+p.right,y:u-p.top+p.bottom,zoom:a}},t6=()=>"undefined"!=typeof navigator&&navigator?.userAgent?.indexOf("Mac")>=0;function t7(e){return void 0!==e&&"parent"!==e}function t8(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function t9(e){return(e.measured?.width??e.width??e.initialWidth)!==void 0&&(e.measured?.height??e.height??e.initialHeight)!==void 0}function ne(e,t){if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}let nt=e=>({width:e.offsetWidth,height:e.offsetHeight}),nn=e=>e?.getRootNode?.()||window?.document,nr=["INPUT","SELECT","TEXTAREA"],no=e=>"clientX"in e,ni=(e,t)=>{let n=no(e),r=n?e.clientX:e.touches?.[0].clientX,o=n?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:o-(t?.top??0)}},ns=(e,t,n,r,o)=>{let i=t.querySelectorAll(`.${e}`);return i&&i.length?Array.from(i).map(t=>{let i=t.getBoundingClientRect();return{id:t.getAttribute("data-handleid"),type:e,nodeId:o,position:t.getAttribute("data-handlepos"),x:(i.left-n.left)/r,y:(i.top-n.top)/r,...nt(t)}}):null};function na({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:o,sourceControlY:i,targetControlX:s,targetControlY:a}){let l=.125*e+.375*o+.375*s+.125*n,d=.125*t+.375*i+.375*a+.125*r;return[l,d,Math.abs(l-e),Math.abs(d-t)]}function nl(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function nd({pos:e,x1:t,y1:n,x2:r,y2:o,c:i}){switch(e){case d.Left:return[t-nl(t-r,i),n];case d.Right:return[t+nl(r-t,i),n];case d.Top:return[t,n-nl(n-o,i)];case d.Bottom:return[t,n+nl(o-n,i)]}}function nc({sourceX:e,sourceY:t,sourcePosition:n=d.Bottom,targetX:r,targetY:o,targetPosition:i=d.Top,curvature:s=.25}){let[a,l]=nd({pos:n,x1:e,y1:t,x2:r,y2:o,c:s}),[c,u]=nd({pos:i,x1:r,y1:o,x2:e,y2:t,c:s}),[h,p,g,f]=na({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:a,sourceControlY:l,targetControlX:c,targetControlY:u});return[`M${e},${t} C${a},${l} ${c},${u} ${r},${o}`,h,p,g,f]}function nu({sourceX:e,sourceY:t,targetX:n,targetY:r}){let o=Math.abs(n-e)/2,i=Math.abs(r-t)/2;return[n<e?n+o:n-o,r<t?r+i:r-i,o,i]}let nh=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,np=(e,t)=>t.some(t=>t.source===e.source&&t.target===e.target&&(t.sourceHandle===e.sourceHandle||!t.sourceHandle&&!e.sourceHandle)&&(t.targetHandle===e.targetHandle||!t.targetHandle&&!e.targetHandle)),ng=(e,t)=>{let n;return e.source&&e.target?np(n=tE(e)?{...e}:{...e,id:nh(e)},t)?t:(null===n.sourceHandle&&delete n.sourceHandle,null===n.targetHandle&&delete n.targetHandle,t.concat(n)):(t0("006",tN.error006()),t)};function nf({sourceX:e,sourceY:t,targetX:n,targetY:r}){let[o,i,s,a]=nu({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,o,i,s,a]}let nm={[d.Left]:{x:-1,y:0},[d.Right]:{x:1,y:0},[d.Top]:{x:0,y:-1},[d.Bottom]:{x:0,y:1}},nx=({source:e,sourcePosition:t=d.Bottom,target:n})=>t===d.Left||t===d.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},ny=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function nb({sourceX:e,sourceY:t,sourcePosition:n=d.Bottom,targetX:r,targetY:o,targetPosition:i=d.Top,borderRadius:s=5,centerX:a,centerY:l,offset:c=20,stepPosition:u=.5}){let[h,p,g,f,m]=function({source:e,sourcePosition:t=d.Bottom,target:n,targetPosition:r=d.Top,center:o,offset:i,stepPosition:s}){let a,l;let c=nm[t],u=nm[r],h={x:e.x+c.x*i,y:e.y+c.y*i},p={x:n.x+u.x*i,y:n.y+u.y*i},g=nx({source:h,sourcePosition:t,target:p}),f=0!==g.x?"x":"y",m=g[f],x=[],y={x:0,y:0},b={x:0,y:0},[,,v,w]=nu({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(c[f]*u[f]==-1){"x"===f?(a=o.x??h.x+(p.x-h.x)*s,l=o.y??(h.y+p.y)/2):(a=o.x??(h.x+p.x)/2,l=o.y??h.y+(p.y-h.y)*s);let e=[{x:a,y:h.y},{x:a,y:p.y}],t=[{x:h.x,y:l},{x:p.x,y:l}];x=c[f]===m?"x"===f?e:t:"x"===f?t:e}else{let o=[{x:h.x,y:p.y}],s=[{x:p.x,y:h.y}];if(x="x"===f?c.x===m?s:o:c.y===m?o:s,t===r){let t=Math.abs(e[f]-n[f]);if(t<=i){let r=Math.min(i-1,i-t);c[f]===m?y[f]=(h[f]>e[f]?-1:1)*r:b[f]=(p[f]>n[f]?-1:1)*r}}if(t!==r){let e="x"===f?"y":"x",t=c[f]===u[e],n=h[e]>p[e],r=h[e]<p[e];(1===c[f]&&(!t&&n||t&&r)||1!==c[f]&&(!t&&r||t&&n))&&(x="x"===f?o:s)}let d={x:h.x+y.x,y:h.y+y.y},g={x:p.x+b.x,y:p.y+b.y};Math.max(Math.abs(d.x-x[0].x),Math.abs(g.x-x[0].x))>=Math.max(Math.abs(d.y-x[0].y),Math.abs(g.y-x[0].y))?(a=(d.x+g.x)/2,l=x[0].y):(a=x[0].x,l=(d.y+g.y)/2)}return[[e,{x:h.x+y.x,y:h.y+y.y},...x,{x:p.x+b.x,y:p.y+b.y},n],a,l,v,w]}({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:o},targetPosition:i,center:{x:a,y:l},offset:c,stepPosition:u});return[h.reduce((e,t,n)=>e+(n>0&&n<h.length-1?function(e,t,n,r){let o=Math.min(ny(e,t)/2,ny(t,n)/2,r),{x:i,y:s}=t;if(e.x===i&&i===n.x||e.y===s&&s===n.y)return`L${i} ${s}`;if(e.y===s){let t=e.x<n.x?-1:1,r=e.y<n.y?1:-1;return`L ${i+o*t},${s}Q ${i},${s} ${i},${s+o*r}`}let a=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${i},${s+o*l}Q ${i},${s} ${i+o*a},${s}`}(h[n-1],t,h[n+1],s):`${0===n?"M":"L"}${t.x} ${t.y}`),""),p,g,f,m]}function nv(e){return e&&!!(e.internals.handleBounds||e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function nw(e){if(!e)return null;let t=[],n=[];for(let r of e)r.width=r.width??1,r.height=r.height??1,"source"===r.type?t.push(r):"target"===r.type&&n.push(r);return{source:t,target:n}}function n_(e,t,n=d.Left,r=!1){let o=(t?.x??0)+e.internals.positionAbsolute.x,i=(t?.y??0)+e.internals.positionAbsolute.y,{width:s,height:a}=t??t8(e);if(r)return{x:o+s/2,y:i+a/2};switch(t?.position??n){case d.Top:return{x:o+s/2,y:i};case d.Right:return{x:o+s,y:i+a/2};case d.Bottom:return{x:o+s/2,y:i+a};case d.Left:return{x:o,y:i+a/2}}}function nN(e,t){return e&&(t?e.find(e=>e.id===t):e[0])||null}function nS(e,t){if(!e)return"";if("string"==typeof e)return e;let n=t?`${t}__`:"";return`${n}${Object.keys(e).sort().map(t=>`${t}=${e[t]}`).join("&")}`}let nj={nodeOrigin:[0,0],nodeExtent:tS,elevateNodesOnSelect:!0,defaults:{}},nC={...nj,checkEquality:!0};function nk(e,t){let n={...e};for(let e in t)void 0!==t[e]&&(n[e]=t[e]);return n}function nM(e,t,n,r){let o=nk(nC,r),i=e.length>0,s=new Map(t),a=o?.elevateNodesOnSelect?1e3:0;for(let l of(t.clear(),n.clear(),e)){let e=s.get(l.id);if(o.checkEquality&&l===e?.internals.userNode)t.set(l.id,e);else{let n=tT(tP(l,o.nodeOrigin),t7(l.extent)?l.extent:o.nodeExtent,t8(l));e={...o.defaults,...l,measured:{width:l.measured?.width,height:l.measured?.height},internals:{positionAbsolute:n,handleBounds:l.measured?e?.internals.handleBounds:void 0,z:nE(l,a),userNode:l}},t.set(l.id,e)}void 0!==e.measured&&void 0!==e.measured.width&&void 0!==e.measured.height||e.hidden||(i=!1),l.parentId&&nD(e,t,n,r)}return i}function nD(e,t,n,r){let{elevateNodesOnSelect:o,nodeOrigin:i,nodeExtent:s}=nk(nj,r),a=e.parentId,l=t.get(a);if(!l){console.warn(`Parent node ${a} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}!function(e,t){if(!e.parentId)return;let n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}(e,n);let{x:d,y:c,z:u}=function(e,t,n,r,o){let{x:i,y:s}=t.internals.positionAbsolute,a=t8(e),l=tP(e,n),d=t7(e.extent)?tT(l,e.extent,a):l,c=tT({x:i+d.x,y:s+d.y},r,a);"parent"===e.extent&&(c=tV(c,a,t));let u=nE(e,o),h=t.internals.z??0;return{x:c.x,y:c.y,z:h>=u?h+1:u}}(e,l,i,s,o?1e3:0),{positionAbsolute:h}=e.internals,p=d!==h.x||c!==h.y;(p||u!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:p?{x:d,y:c}:h,z:u}})}function nE(e,t){return(tJ(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function n$(e,t,n,r=[0,0]){let o=[],i=new Map;for(let n of e){let e=t.get(n.parentId);if(!e)continue;let r=tU(i.get(n.parentId)?.expandedRect??tW(e),n.rect);i.set(n.parentId,{expandedRect:r,parent:e})}return i.size>0&&i.forEach(({expandedRect:t,parent:i},s)=>{let a=i.internals.positionAbsolute,l=t8(i),d=i.origin??r,c=t.x<a.x?Math.round(Math.abs(a.x-t.x)):0,u=t.y<a.y?Math.round(Math.abs(a.y-t.y)):0,h=Math.max(l.width,Math.round(t.width)),p=Math.max(l.height,Math.round(t.height)),g=(h-l.width)*d[0],f=(p-l.height)*d[1];(c>0||u>0||g||f)&&(o.push({id:s,type:"position",position:{x:i.position.x-c+g,y:i.position.y-u+f}}),n.get(s)?.forEach(t=>{e.some(e=>e.id===t.id)||o.push({id:t.id,type:"position",position:{x:t.position.x+c,y:t.position.y+u}})})),(l.width<t.width||l.height<t.height||c||u)&&o.push({id:s,type:"dimensions",setAttributes:!0,dimensions:{width:h+(c?d[0]*c-g:0),height:p+(u?d[1]*u-f:0)}})}),o}async function nA({delta:e,panZoom:t,transform:n,translateExtent:r,width:o,height:i}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);let s=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[o,i]],r);return Promise.resolve(!!s&&(s.x!==n[0]||s.y!==n[1]||s.k!==n[2]))}function nP(e,t,n,r,o,i){let s=o,a=r.get(s)||new Map;r.set(s,a.set(n,t)),s=`${o}-${e}`;let l=r.get(s)||new Map;if(r.set(s,l.set(n,t)),i){s=`${o}-${e}-${i}`;let a=r.get(s)||new Map;r.set(s,a.set(n,t))}}function nI(e,t,n){for(let r of(e.clear(),t.clear(),n)){let{source:n,target:o,sourceHandle:i=null,targetHandle:s=null}=r,a={edgeId:r.id,source:n,target:o,sourceHandle:i,targetHandle:s},l=`${n}-${i}--${o}-${s}`;nP("source",a,`${o}-${s}--${n}-${i}`,e,n,i),nP("target",a,l,e,o,s),t.set(r.id,r)}}function nO(e,t,n,r,o,i=!1){let s=r.get(e);if(!s)return null;let a="strict"===o?s.internals.handleBounds?.[t]:[...s.internals.handleBounds?.source??[],...s.internals.handleBounds?.target??[]],l=(n?a?.find(e=>e.id===n):a?.[0])??null;return l&&i?{...l,...n_(s,l,l.position,!0)}:l}function nR(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}let nB=()=>!0;function nL(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:s,doc:a,lib:l,flowId:d,isValidConnection:c=nB,nodeLookup:u}){let h="target"===s,p=t?a.querySelector(`.${l}-flow__handle[data-id="${d}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:g,y:f}=ni(e),m=a.elementFromPoint(g,f),x=m?.classList.contains(`${l}-flow__handle`)?m:p,y={handleDomNode:x,isValid:!1,connection:null,toHandle:null};if(x){let e=nR(void 0,x),t=x.getAttribute("data-nodeid"),s=x.getAttribute("data-handleid"),a=x.classList.contains("connectable"),l=x.classList.contains("connectableend");if(!t||!e)return y;let d={source:h?t:r,sourceHandle:h?s:i,target:h?r:t,targetHandle:h?i:s};y.connection=d;let p=a&&l&&(n===o.Strict?h&&"source"===e||!h&&"target"===e:t!==r||s!==i);y.isValid=p&&c(d),y.toHandle=nO(t,e,s,u,n,!0)}return y}let nH={onPointerDown:function(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:o,edgeUpdaterType:i,isTarget:s,domNode:a,nodeLookup:l,lib:c,autoPanOnConnect:u,flowId:h,panBy:p,cancelConnection:g,onConnectStart:f,onConnect:m,onConnectEnd:x,isValidConnection:y=nB,onReconnectEnd:b,updateConnection:v,getTransform:w,getFromHandle:_,autoPanSpeed:N,dragThreshold:S=1,handleDomNode:j}){let C;let k=nn(e.target),M=0,{x:D,y:E}=ni(e),$=nR(i,j),A=a?.getBoundingClientRect(),P=!1;if(!A||!$)return;let I=nO(o,$,r,l,t);if(!I)return;let O=ni(e,A),R=!1,B=null,L=!1,H=null,z={...I,nodeId:o,type:$,position:I.position},T=l.get(o),V={inProgress:!0,isValid:null,from:n_(T,z,d.Left,!0),fromHandle:z,fromPosition:z.position,fromNode:T,to:O,toHandle:null,toPosition:tM[z.position],toNode:null};function F(){P=!0,v(V),f?.(e,{nodeId:o,handleId:r,handleType:$})}function q(e){var i,a;let d;if(!P){let{x:t,y:n}=ni(e),r=t-D,o=n-E;if(!(r*r+o*o>S*S))return;F()}if(!_()||!z){Z(e);return}let g=w();C=function(e,t,n,r){let o=[],i=1/0;for(let s of function(e,t,n){let r=[],o={x:e.x-n,y:e.y-n,width:2*n,height:2*n};for(let e of t.values())tG(o,tW(e))>0&&r.push(e);return r}(e,n,t+250))for(let n of[...s.internals.handleBounds?.source??[],...s.internals.handleBounds?.target??[]]){if(r.nodeId===n.nodeId&&r.type===n.type&&r.id===n.id)continue;let{x:a,y:l}=n_(s,n,n.position,!0),d=Math.sqrt(Math.pow(a-e.x,2)+Math.pow(l-e.y,2));d>t||(d<i?(o=[{...n,x:a,y:l}],i=d):d===i&&o.push({...n,x:a,y:l}))}if(!o.length)return null;if(o.length>1){let e="source"===r.type?"target":"source";return o.find(t=>t.type===e)??o[0]}return o[0]}(t2(O=ni(e,A),g,!1,[1,1]),n,l,z),R||(function e(){if(!u||!A)return;let[t,n]=tq(O,A,N);p({x:t,y:n}),M=requestAnimationFrame(e)}(),R=!0);let f=nL(e,{handle:C,connectionMode:t,fromNodeId:o,fromHandleId:r,fromType:s?"target":"source",isValidConnection:y,doc:k,lib:c,flowId:h,nodeLookup:l});H=f.handleDomNode,B=f.connection,i=!!C,a=f.isValid,d=null,a?d=!0:i&&!a&&(d=!1),L=d;let m={...V,isValid:L,to:f.toHandle&&L?t3({x:f.toHandle.x,y:f.toHandle.y},g):O,toHandle:f.toHandle,toPosition:L&&f.toHandle?f.toHandle.position:tM[z.position],toNode:f.toHandle?l.get(f.toHandle.nodeId):null};L&&C&&V.toHandle&&m.toHandle&&V.toHandle.type===m.toHandle.type&&V.toHandle.nodeId===m.toHandle.nodeId&&V.toHandle.id===m.toHandle.id&&V.to.x===m.to.x&&V.to.y===m.to.y||(v(m),V=m)}function Z(e){if(P){(C||H)&&B&&L&&m?.(B);let{inProgress:t,...n}=V,r={...n,toPosition:V.toHandle?V.toPosition:null};x?.(e,r),i&&b?.(e,r)}g(),cancelAnimationFrame(M),R=!1,L=!1,B=null,H=null,k.removeEventListener("mousemove",q),k.removeEventListener("mouseup",Z),k.removeEventListener("touchmove",q),k.removeEventListener("touchend",Z)}0===S&&F(),k.addEventListener("mousemove",q),k.addEventListener("mouseup",Z),k.addEventListener("touchmove",q),k.addEventListener("touchend",Z)},isValid:nL};function nz(e){if("string"==typeof e||"number"==typeof e)return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)""!==(r=nz(e[n]))&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}!function(e){e.Line="line",e.Handle="handle"}(c||(c={}));var nT=n(5262);let nV=e=>{let t;let n=new Set,r=(e,r)=>{let o="function"==typeof e?e(t):e;if(!Object.is(o,t)){let e=t;t=(null!=r?r:"object"!=typeof o||null===o)?o:Object.assign({},t,o),n.forEach(n=>n(t,e))}},o=()=>t,i={setState:r,getState:o,getInitialState:()=>s,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},s=t=e(r,o,i);return i},nF=e=>e?nV(e):nV,{useDebugValue:nq}=p,{useSyncExternalStoreWithSelector:nZ}=nT,nX=e=>e;function nY(e,t=nX,n){let r=nZ(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return nq(r),r}let nW=(e,t)=>{let n=nF(e),r=(e,r=t)=>nY(n,e,r);return Object.assign(r,n),r},nK=(e,t)=>e?nW(e,t):nW;function nU(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(let[n,r]of e)if(!Object.is(r,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}let n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}n(3932);let nG=(0,p.createContext)(null),nQ=nG.Provider,nJ=tN.error001();function n0(e,t){let n=(0,p.useContext)(nG);if(null===n)throw Error(nJ);return nY(n,e,t)}function n1(){let e=(0,p.useContext)(nG);if(null===e)throw Error(nJ);return(0,p.useMemo)(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}let n2={display:"none"},n3={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},n4="react-flow__node-desc",n5="react-flow__edge-desc",n6=e=>e.ariaLiveMessage,n7=e=>e.ariaLabelConfig;function n8({rfId:e}){let t=n0(n6);return(0,h.jsx)("div",{id:`react-flow__aria-live-${e}`,"aria-live":"assertive","aria-atomic":"true",style:n3,children:t})}function n9({rfId:e,disableKeyboardA11y:t}){let n=n0(n7);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{id:`${n4}-${e}`,style:n2,children:t?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),(0,h.jsx)("div",{id:`${n5}-${e}`,style:n2,children:n["edge.a11yDescription.default"]}),!t&&(0,h.jsx)(n8,{rfId:e})]})}let re=(0,p.forwardRef)(({position:e="top-left",children:t,className:n,style:r,...o},i)=>{let s=`${e}`.split("-");return(0,h.jsx)("div",{className:nz(["react-flow__panel",n,...s]),style:r,ref:i,...o,children:t})});function rt({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:(0,h.jsx)(re,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:(0,h.jsx)("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}re.displayName="Panel";let rn=e=>{let t=[],n=[];for(let[,n]of e.nodeLookup)n.selected&&t.push(n.internals.userNode);for(let[,t]of e.edgeLookup)t.selected&&n.push(t);return{selectedNodes:t,selectedEdges:n}},rr=e=>e.id;function ro(e,t){return nU(e.selectedNodes.map(rr),t.selectedNodes.map(rr))&&nU(e.selectedEdges.map(rr),t.selectedEdges.map(rr))}function ri({onSelectionChange:e}){n1();let{selectedNodes:t,selectedEdges:n}=n0(rn,ro);return null}let rs=e=>!!e.onSelectionChangeHandlers;function ra({onSelectionChange:e}){let t=n0(rs);return e||t?(0,h.jsx)(ri,{onSelectionChange:e}):null}let rl=[0,0],rd={x:0,y:0,zoom:1},rc=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance","ariaLabelConfig","rfId"],ru=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),rh={translateExtent:tS,nodeOrigin:rl,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function rp(e){let{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:o,setTranslateExtent:i,setNodeExtent:s,reset:a,setDefaultNodesAndEdges:l,setPaneClickDistance:d}=n0(ru,nU),c=n1(),u=(0,p.useRef)(rh);return(0,p.useEffect)(()=>{for(let a of rc){let l=e[a];l!==u.current[a]&&void 0!==e[a]&&("nodes"===a?t(l):"edges"===a?n(l):"minZoom"===a?r(l):"maxZoom"===a?o(l):"translateExtent"===a?i(l):"nodeExtent"===a?s(l):"paneClickDistance"===a?d(l):"ariaLabelConfig"===a?c.setState({ariaLabelConfig:{...tC,...l||{}}}):"fitView"===a?c.setState({fitViewQueued:l}):"fitViewOptions"===a?c.setState({fitViewOptions:l}):c.setState({[a]:l}))}u.current=e},rc.map(t=>e[t])),null}let rg="undefined"!=typeof document?document:null;function rf(e=null,t={target:rg,actInsideInputWithModifier:!0}){let[n,r]=(0,p.useState)(!1);(0,p.useRef)(!1),(0,p.useRef)(new Set([]));let[o,i]=(0,p.useMemo)(()=>{if(null!==e){let t=(Array.isArray(e)?e:[e]).filter(e=>"string"==typeof e).map(e=>e.replace("+","\n").replace("\n\n","\n+").split("\n")),n=t.reduce((e,t)=>e.concat(...t),[]);return[t,n]}return[[],[]]},[e]);return n}let rm=()=>{let e=n1();return(0,p.useMemo)(()=>({zoomIn:t=>{let{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomOut:t=>{let{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{let{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{let{transform:[r,o,i],panZoom:s}=e.getState();return s?(await s.setViewport({x:t.x??r,y:t.y??o,zoom:t.zoom??i},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{let[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},setCenter:async(t,n,r)=>e.getState().setCenter(t,n,r),fitBounds:async(t,n)=>{let{width:r,height:o,minZoom:i,maxZoom:s,panZoom:a}=e.getState(),l=t5(t,r,o,i,s,n?.padding??.1);return a?(await a.setViewport(l,{duration:n?.duration,ease:n?.ease,interpolate:n?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{let{transform:r,snapGrid:o,snapToGrid:i,domNode:s}=e.getState();if(!s)return t;let{x:a,y:l}=s.getBoundingClientRect(),d={x:t.x-a,y:t.y-l},c=n.snapGrid??o;return t2(d,r,n.snapToGrid??i,c)},flowToScreenPosition:t=>{let{transform:n,domNode:r}=e.getState();if(!r)return t;let{x:o,y:i}=r.getBoundingClientRect(),s=t3(t,n);return{x:s.x+o,y:s.y+i}}}),[])};function rx(e,t){let n=[],r=new Map,o=[];for(let t of e){if("add"===t.type){o.push(t);continue}if("remove"===t.type||"replace"===t.type)r.set(t.id,[t]);else{let e=r.get(t.id);e?e.push(t):r.set(t.id,[t])}}for(let e of t){let t=r.get(e.id);if(!t){n.push(e);continue}if("remove"===t[0].type)continue;if("replace"===t[0].type){n.push({...t[0].item});continue}let o={...e};for(let e of t)(function(e,t){switch(e.type){case"select":t.selected=e.selected;break;case"position":void 0!==e.position&&(t.position=e.position),void 0!==e.dragging&&(t.dragging=e.dragging);break;case"dimensions":void 0!==e.dimensions&&(t.measured??={},t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&((!0===e.setAttributes||"width"===e.setAttributes)&&(t.width=e.dimensions.width),(!0===e.setAttributes||"height"===e.setAttributes)&&(t.height=e.dimensions.height))),"boolean"==typeof e.resizing&&(t.resizing=e.resizing)}})(e,o);n.push(o)}return o.length&&o.forEach(e=>{void 0!==e.index?n.splice(e.index,0,{...e.item}):n.push({...e.item})}),n}function ry(e,t){return{id:e,type:"select",selected:t}}function rb(e,t=new Set,n=!1){let r=[];for(let[o,i]of e){let e=t.has(o);(void 0!==i.selected||e)&&i.selected!==e&&(n&&(i.selected=e),r.push(ry(i.id,e)))}return r}function rv({items:e=[],lookup:t}){let n=[],r=new Map(e.map(e=>[e.id,e]));for(let[r,o]of e.entries()){let e=t.get(o.id),i=e?.internals?.userNode??e;void 0!==i&&i!==o&&n.push({id:o.id,item:o,type:"replace"}),void 0===i&&n.push({item:o,type:"add",index:r})}for(let[e]of t)void 0===r.get(e)&&n.push({id:e,type:"remove"});return n}function rw(e){return{id:e.id,type:"remove"}}let r_=e=>t$(e),rN=e=>tE(e);function rS(e){return(0,p.forwardRef)(e)}let rj=p.useEffect;function rC(e){let[t,n]=(0,p.useState)(BigInt(0)),[r]=(0,p.useState)(()=>{var e;let t;return e=()=>n(e=>e+BigInt(1)),t=[],{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}});return rj(()=>{let t=r.get();t.length&&(e(t),r.reset())},[t]),r}let rk=(0,p.createContext)(null);function rM({children:e}){let t=n1(),n=rC((0,p.useCallback)(e=>{let{nodes:n=[],setNodes:r,hasDefaultNodes:o,onNodesChange:i,nodeLookup:s,fitViewQueued:a}=t.getState(),l=n;for(let t of e)l="function"==typeof t?t(l):t;let d=rv({items:l,lookup:s});o&&r(l),d.length>0?i?.(d):a&&window.requestAnimationFrame(()=>{let{fitViewQueued:e,nodes:n,setNodes:r}=t.getState();e&&r(n)})},[])),r=rC((0,p.useCallback)(e=>{let{edges:n=[],setEdges:r,hasDefaultEdges:o,onEdgesChange:i,edgeLookup:s}=t.getState(),a=n;for(let t of e)a="function"==typeof t?t(a):t;o?r(a):i&&i(rv({items:a,lookup:s}))},[])),o=(0,p.useMemo)(()=>({nodeQueue:n,edgeQueue:r}),[]);return(0,h.jsx)(rk.Provider,{value:o,children:e})}let rD=e=>!!e.panZoom;function rE(){let e=rm(),t=n1(),n=function(){let e=(0,p.useContext)(rk);if(!e)throw Error("useBatchContext must be used within a BatchProvider");return e}(),r=n0(rD),o=(0,p.useMemo)(()=>{let e=e=>t.getState().nodeLookup.get(e),r=e=>{n.nodeQueue.push(e)},o=e=>{n.edgeQueue.push(e)},i=e=>{let{nodeLookup:n,nodeOrigin:r}=t.getState(),o=r_(e)?e:n.get(e.id),i=o.parentId?function(e,t={width:0,height:0},n,r,o){let i={...e},s=r.get(n);if(s){let e=s.origin||o;i.x+=s.internals.positionAbsolute.x-(t.width??0)*e[0],i.y+=s.internals.positionAbsolute.y-(t.height??0)*e[1]}return i}(o.position,o.measured,o.parentId,n,r):o.position;return tW({...o,position:i,width:o.measured?.width??o.width,height:o.measured?.height??o.height})},s=(e,t,n={replace:!1})=>{r(r=>r.map(r=>{if(r.id===e){let e="function"==typeof t?t(r):t;return n.replace&&r_(e)?e:{...r,...e}}return r}))},a=(e,t,n={replace:!1})=>{o(r=>r.map(r=>{if(r.id===e){let e="function"==typeof t?t(r):t;return n.replace&&rN(e)?e:{...r,...e}}return r}))};return{getNodes:()=>t.getState().nodes.map(e=>({...e})),getNode:t=>e(t)?.internals.userNode,getInternalNode:e,getEdges:()=>{let{edges:e=[]}=t.getState();return e.map(e=>({...e}))},getEdge:e=>t.getState().edgeLookup.get(e),setNodes:r,setEdges:o,addNodes:e=>{let t=Array.isArray(e)?e:[e];n.nodeQueue.push(e=>[...e,...t])},addEdges:e=>{let t=Array.isArray(e)?e:[e];n.edgeQueue.push(e=>[...e,...t])},toObject:()=>{let{nodes:e=[],edges:n=[],transform:r}=t.getState(),[o,i,s]=r;return{nodes:e.map(e=>({...e})),edges:n.map(e=>({...e})),viewport:{x:o,y:i,zoom:s}}},deleteElements:async({nodes:e=[],edges:n=[]})=>{let{nodes:r,edges:o,onNodesDelete:i,onEdgesDelete:s,triggerNodeChanges:a,triggerEdgeChanges:l,onDelete:d,onBeforeDelete:c}=t.getState(),{nodes:u,edges:h}=await tH({nodesToRemove:e,edgesToRemove:n,nodes:r,edges:o,onBeforeDelete:c}),p=h.length>0,g=u.length>0;if(p){let e=h.map(rw);s?.(h),l(e)}if(g){let e=u.map(rw);i?.(u),a(e)}return(g||p)&&d?.({nodes:u,edges:h}),{deletedNodes:u,deletedEdges:h}},getIntersectingNodes:(e,n=!0,r)=>{let o=tQ(e),s=o?e:i(e),a=void 0!==r;return s?(r||t.getState().nodes).filter(r=>{let i=t.getState().nodeLookup.get(r.id);if(i&&!o&&(r.id===e.id||!i.internals.positionAbsolute))return!1;let l=tW(a?r:i),d=tG(l,s);return n&&d>0||d>=l.width*l.height||d>=s.width*s.height}):[]},isNodeIntersecting:(e,t,n=!0)=>{let r=tQ(e)?e:i(e);if(!r)return!1;let o=tG(r,t);return n&&o>0||o>=r.width*r.height},updateNode:s,updateNodeData:(e,t,n={replace:!1})=>{s(e,e=>{let r="function"==typeof t?t(e):t;return n.replace?{...e,data:r}:{...e,data:{...e.data,...r}}},n)},updateEdge:a,updateEdgeData:(e,t,n={replace:!1})=>{a(e,e=>{let r="function"==typeof t?t(e):t;return n.replace?{...e,data:r}:{...e,data:{...e.data,...r}}},n)},getNodesBounds:e=>{let{nodeLookup:n,nodeOrigin:r}=t.getState();return tI(e,{nodeLookup:n,nodeOrigin:r})},getHandleConnections:({type:e,id:n,nodeId:r})=>Array.from(t.getState().connectionLookup.get(`${r}-${e}${n?`-${n}`:""}`)?.values()??[]),getNodeConnections:({type:e,handleId:n,nodeId:r})=>Array.from(t.getState().connectionLookup.get(`${r}${e?n?`-${e}-${n}`:`-${e}`:""}`)?.values()??[]),fitView:async e=>{let r,o;let i=t.getState().fitViewResolver??{promise:new Promise((e,t)=>{r=e,o=t}),resolve:r,reject:o};return t.setState({fitViewQueued:!0,fitViewOptions:e,fitViewResolver:i}),n.nodeQueue.push(e=>[...e]),i.promise}}},[]);return(0,p.useMemo)(()=>({...o,...e,viewportInitialized:r}),[r])}let r$=void 0,rA={position:"absolute",width:"100%",height:"100%",top:0,left:0},rP=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function rI({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:o=.5,panOnScrollMode:s=i.Free,zoomOnDoubleClick:a=!0,panOnDrag:l=!0,defaultViewport:d,translateExtent:c,minZoom:u,maxZoom:g,zoomActivationKeyCode:f,preventScrolling:m=!0,children:x,noWheelClassName:y,noPanClassName:b,onViewportChange:v,isControlledViewport:w,paneClickDistance:_}){let N=n1(),S=(0,p.useRef)(null),{userSelectionActive:j,lib:C}=n0(rP,nU);return rf(f),(0,p.useRef)(),n1(),(0,p.useCallback)(e=>{v?.({x:e[0],y:e[1],zoom:e[2]}),w||N.setState({transform:e})},[v,w]),(0,h.jsx)("div",{className:"react-flow__renderer",ref:S,style:rA,children:x})}let rO=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function rR(){let{userSelectionActive:e,userSelectionRect:t}=n0(rO,nU);return e&&t?(0,h.jsx)("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}let rB=(e,t)=>n=>{n.target===t.current&&e?.(n)},rL=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function rH({isSelecting:e,selectionKeyPressed:t,selectionMode:n=s.Full,panOnDrag:r,selectionOnDrag:o,onSelectionStart:i,onSelectionEnd:a,onPaneClick:l,onPaneContextMenu:d,onPaneScroll:c,onPaneMouseEnter:u,onPaneMouseMove:g,onPaneMouseLeave:f,children:m}){let x=n1(),{userSelectionActive:y,elementsSelectable:b,dragging:v,connectionInProgress:w}=n0(rL,nU),_=b&&(e||y),N=(0,p.useRef)(null),S=(0,p.useRef)(),j=(0,p.useRef)(new Set),C=(0,p.useRef)(new Set),k=(0,p.useRef)(!1),M=(0,p.useRef)(!1),D=e=>{if(k.current||w){k.current=!1;return}l?.(e),x.getState().resetSelectedElements(),x.setState({nodesSelectionActive:!1})},E=!0===r||Array.isArray(r)&&r.includes(0);return(0,h.jsxs)("div",{className:nz(["react-flow__pane",{draggable:E,dragging:v,selection:e}]),onClick:_?void 0:rB(D,N),onContextMenu:rB(e=>{if(Array.isArray(r)&&r?.includes(2)){e.preventDefault();return}d?.(e)},N),onWheel:rB(c?e=>c(e):void 0,N),onPointerEnter:_?void 0:u,onPointerDown:_?t=>{let{resetSelectedElements:n,domNode:r}=x.getState();if(S.current=r?.getBoundingClientRect(),!b||!e||0!==t.button||t.target!==N.current||!S.current)return;t.target?.setPointerCapture?.(t.pointerId),M.current=!0,k.current=!1;let{x:o,y:s}=ni(t.nativeEvent,S.current);n(),x.setState({userSelectionRect:{width:0,height:0,startX:o,startY:s,x:o,y:s}}),i?.(t)}:g,onPointerMove:_?e=>{let{userSelectionRect:t,transform:r,nodeLookup:o,edgeLookup:i,connectionLookup:a,triggerNodeChanges:l,triggerEdgeChanges:d,defaultEdgeOptions:c}=x.getState();if(!S.current||!t)return;k.current=!0;let{x:u,y:h}=ni(e.nativeEvent,S.current),{startX:p,startY:g}=t,f={startX:p,startY:g,x:u<p?u:p,y:h<g?h:g,width:Math.abs(u-p),height:Math.abs(h-g)},m=j.current,y=C.current;j.current=new Set(tR(o,f,r,n===s.Partial,!0).map(e=>e.id)),C.current=new Set;let b=c?.selectable??!0;for(let e of j.current){let t=a.get(e);if(t)for(let{edgeId:e}of t.values()){let t=i.get(e);t&&(t.selectable??b)&&C.current.add(e)}}ne(m,j.current)||l(rb(o,j.current,!0)),ne(y,C.current)||d(rb(i,C.current)),x.setState({userSelectionRect:f,userSelectionActive:!0,nodesSelectionActive:!1})}:g,onPointerUp:_?e=>{if(0!==e.button||!M.current)return;e.target?.releasePointerCapture?.(e.pointerId);let{userSelectionRect:n}=x.getState();!y&&n&&e.target===N.current&&D?.(e),x.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:j.current.size>0}),a?.(e),(t||o)&&(k.current=!1),M.current=!1}:void 0,onPointerLeave:f,ref:N,style:rA,children:[m,(0,h.jsx)(rR,{})]})}function rz({id:e,store:t,unselect:n=!1,nodeRef:r}){let{addSelectedNodes:o,unselectNodesAndEdges:i,multiSelectionActive:s,nodeLookup:a,onError:l}=t.getState(),d=a.get(e);if(!d){l?.("012",tN.error012(e));return}t.setState({nodesSelectionActive:!1}),d.selected?(n||d.selected&&s)&&(i({nodes:[d],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):o([e])}function rT({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:o,isSelectable:i,nodeClickDistance:s}){n1();let[a,l]=(0,p.useState)(!1);return(0,p.useRef)(),a}let rV=e=>t=>t.selected&&(t.draggable||e&&void 0===t.draggable);function rF(){let e=n1();return(0,p.useCallback)(t=>{let{nodeExtent:n,snapToGrid:r,snapGrid:o,nodesDraggable:i,onError:s,updateNodePositions:a,nodeLookup:l,nodeOrigin:d}=e.getState(),c=new Map,u=rV(i),h=r?o[0]:5,p=r?o[1]:5,g=t.direction.x*h*t.factor,f=t.direction.y*p*t.factor;for(let[,e]of l){if(!u(e))continue;let t={x:e.internals.positionAbsolute.x+g,y:e.internals.positionAbsolute.y+f};r&&(t=t1(t,o));let{position:i,positionAbsolute:a}=function({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:o,onError:i}){let s=n.get(e),a=s.parentId?n.get(s.parentId):void 0,{x:l,y:d}=a?a.internals.positionAbsolute:{x:0,y:0},c=s.origin??r,u=s.extent||o;if("parent"!==s.extent||s.expandParent)a&&t7(s.extent)&&(u=[[s.extent[0][0]+l,s.extent[0][1]+d],[s.extent[1][0]+l,s.extent[1][1]+d]]);else if(a){let e=a.measured.width,t=a.measured.height;e&&t&&(u=[[l,d],[l+e,d+t]])}else i?.("005",tN.error005());let h=t7(u)?tT(t,u,s.measured):t;return(void 0===s.measured.width||void 0===s.measured.height)&&i?.("015",tN.error015()),{position:{x:h.x-l+(s.measured.width??0)*c[0],y:h.y-d+(s.measured.height??0)*c[1]},positionAbsolute:h}}({nodeId:e.id,nextPosition:t,nodeLookup:l,nodeExtent:n,nodeOrigin:d,onError:s});e.position=i,e.internals.positionAbsolute=a,c.set(e.id,e)}a(c)},[])}let rq=(0,p.createContext)(null),rZ=rq.Provider;rq.Consumer;let rX=()=>(0,p.useContext)(rq),rY=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),rW=(e,t,n)=>r=>{let{connectionClickStartHandle:i,connectionMode:s,connection:a}=r,{fromHandle:l,toHandle:d,isValid:c}=a,u=d?.nodeId===e&&d?.id===t&&d?.type===n;return{connectingFrom:l?.nodeId===e&&l?.id===t&&l?.type===n,connectingTo:u,clickConnecting:i?.nodeId===e&&i?.id===t&&i?.type===n,isPossibleEndHandle:s===o.Strict?l?.type!==n:e!==l?.nodeId||t!==l?.id,connectionInProcess:!!l,clickConnectionInProcess:!!i,valid:u&&c}},rK=(0,p.memo)(rS(function({type:e="source",position:t=d.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:o=!0,isConnectableEnd:i=!0,id:s,onConnect:a,children:l,className:c,onMouseDown:u,onTouchStart:p,...g},f){let m=s||null,x="target"===e,y=n1(),b=rX(),{connectOnClick:v,noPanClassName:w,rfId:_}=n0(rY,nU),{connectingFrom:N,connectingTo:S,clickConnecting:j,isPossibleEndHandle:C,connectionInProcess:k,clickConnectionInProcess:M,valid:D}=n0(rW(b,m,e),nU);b||y.getState().onError?.("010",tN.error010());let E=e=>{let{defaultEdgeOptions:t,onConnect:n,hasDefaultEdges:r}=y.getState(),o={...t,...e};if(r){let{edges:e,setEdges:t}=y.getState();t(ng(o,e))}n?.(o),a?.(o)},$=e=>{if(!b)return;let t=no(e.nativeEvent);if(o&&(t&&0===e.button||!t)){let t=y.getState();nH.onPointerDown(e.nativeEvent,{handleDomNode:e.currentTarget,autoPanOnConnect:t.autoPanOnConnect,connectionMode:t.connectionMode,connectionRadius:t.connectionRadius,domNode:t.domNode,nodeLookup:t.nodeLookup,lib:t.lib,isTarget:x,handleId:m,nodeId:b,flowId:t.rfId,panBy:t.panBy,cancelConnection:t.cancelConnection,onConnectStart:t.onConnectStart,onConnectEnd:t.onConnectEnd,updateConnection:t.updateConnection,onConnect:E,isValidConnection:n||t.isValidConnection,getTransform:()=>y.getState().transform,getFromHandle:()=>y.getState().connection.fromHandle,autoPanSpeed:t.autoPanSpeed,dragThreshold:t.connectionDragThreshold})}t?u?.(e):p?.(e)};return(0,h.jsx)("div",{"data-handleid":m,"data-nodeid":b,"data-handlepos":t,"data-id":`${_}-${b}-${m}-${e}`,className:nz(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",w,c,{source:!x,target:x,connectable:r,connectablestart:o,connectableend:i,clickconnecting:j,connectingfrom:N,connectingto:S,valid:D,connectionindicator:r&&(!k||C)&&(k||M?i:o)}]),onMouseDown:$,onTouchStart:$,onClick:v?t=>{let{onClickConnectStart:r,onClickConnectEnd:i,connectionClickStartHandle:s,connectionMode:a,isValidConnection:l,lib:d,rfId:c,nodeLookup:u,connection:h}=y.getState();if(!b||!s&&!o)return;if(!s){r?.(t.nativeEvent,{nodeId:b,handleId:m,handleType:e}),y.setState({connectionClickStartHandle:{nodeId:b,type:e,id:m}});return}let p=nn(t.target),g=n||l,{connection:f,isValid:x}=nH.isValid(t.nativeEvent,{handle:{nodeId:b,id:m,type:e},connectionMode:a,fromNodeId:s.nodeId,fromHandleId:s.id||null,fromType:s.type,isValidConnection:g,flowId:c,doc:p,lib:d,nodeLookup:u});x&&f&&E(f);let v=structuredClone(h);delete v.inProgress,v.toPosition=v.toHandle?v.toHandle.position:null,i?.(t,v),y.setState({connectionClickStartHandle:null})}:void 0,ref:f,...g,children:l})})),rU={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},rG={input:function({data:e,isConnectable:t,sourcePosition:n=d.Bottom}){return(0,h.jsxs)(h.Fragment,{children:[e?.label,(0,h.jsx)(rK,{type:"source",position:n,isConnectable:t})]})},default:function({data:e,isConnectable:t,targetPosition:n=d.Top,sourcePosition:r=d.Bottom}){return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(rK,{type:"target",position:n,isConnectable:t}),e?.label,(0,h.jsx)(rK,{type:"source",position:r,isConnectable:t})]})},output:function({data:e,isConnectable:t,targetPosition:n=d.Top}){return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(rK,{type:"target",position:n,isConnectable:t}),e?.label]})},group:function(){return null}},rQ=e=>{let{width:t,height:n,x:r,y:o}=tO(e.nodeLookup,{filter:e=>!!e.selected});return{width:tJ(t)?t:null,height:tJ(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${o}px)`}};function rJ({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){let r=n1(),{width:o,height:i,transformString:s,userSelectionActive:a}=n0(rQ,nU),l=rF(),d=(0,p.useRef)(null);return(rT({nodeRef:d}),!a&&o&&i)?(0,h.jsx)("div",{className:nz(["react-flow__nodesselection","react-flow__container",t]),style:{transform:s},children:(0,h.jsx)("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:e?t=>{e(t,r.getState().nodes.filter(e=>e.selected))}:void 0,tabIndex:n?void 0:-1,onKeyDown:n?void 0:e=>{Object.prototype.hasOwnProperty.call(rU,e.key)&&(e.preventDefault(),l({direction:rU[e.key],factor:e.shiftKey?4:1}))},style:{width:o,height:i}})}):null}let r0=void 0,r1=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function r2({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:i,onPaneScroll:s,paneClickDistance:a,deleteKeyCode:l,selectionKeyCode:d,selectionOnDrag:c,selectionMode:u,onSelectionStart:p,onSelectionEnd:g,multiSelectionKeyCode:f,panActivationKeyCode:m,zoomActivationKeyCode:x,elementsSelectable:y,zoomOnScroll:b,zoomOnPinch:v,panOnScroll:w,panOnScrollSpeed:_,panOnScrollMode:N,zoomOnDoubleClick:S,panOnDrag:j,defaultViewport:C,translateExtent:k,minZoom:M,maxZoom:D,preventScrolling:E,onSelectionContextMenu:$,noWheelClassName:A,noPanClassName:P,disableKeyboardA11y:I,onViewportChange:O,isControlledViewport:R}){let{nodesSelectionActive:B,userSelectionActive:L}=n0(r1),H=rf(d,{target:r0}),z=rf(m,{target:r0}),T=z||j,V=z||w,F=c&&!0!==T,q=H||L||F;return function({deleteKeyCode:e,multiSelectionKeyCode:t}){n1();let{deleteElements:n}=rE();rf(e,{actInsideInputWithModifier:!1}),rf(t,{target:r$})}({deleteKeyCode:l,multiSelectionKeyCode:f}),(0,h.jsx)(rI,{onPaneContextMenu:i,elementsSelectable:y,zoomOnScroll:b,zoomOnPinch:v,panOnScroll:V,panOnScrollSpeed:_,panOnScrollMode:N,zoomOnDoubleClick:S,panOnDrag:!H&&T,defaultViewport:C,translateExtent:k,minZoom:M,maxZoom:D,zoomActivationKeyCode:x,preventScrolling:E,noWheelClassName:A,noPanClassName:P,onViewportChange:O,isControlledViewport:R,paneClickDistance:a,children:(0,h.jsxs)(rH,{onSelectionStart:p,onSelectionEnd:g,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:i,onPaneScroll:s,panOnDrag:T,isSelecting:!!q,selectionMode:u,selectionKeyPressed:H,selectionOnDrag:F,children:[e,B&&(0,h.jsx)(rJ,{onSelectionContextMenu:$,noPanClassName:P,disableKeyboardA11y:I})]})})}r2.displayName="FlowRenderer";let r3=(0,p.memo)(r2),r4=e=>t=>e?tR(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(e=>e.id):Array.from(t.nodeLookup.keys()),r5=e=>e.updateNodeInternals;function r6({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:o,onContextMenu:i,onDoubleClick:s,nodesDraggable:a,elementsSelectable:l,nodesConnectable:d,nodesFocusable:c,resizeObserver:u,noDragClassName:g,noPanClassName:f,disableKeyboardA11y:m,rfId:x,nodeTypes:y,nodeClickDistance:b,onError:v}){let{node:w,internals:_,isParent:N}=n0(t=>{let n=t.nodeLookup.get(e),r=t.parentLookup.has(e);return{node:n,internals:n.internals,isParent:r}},nU),S=w.type||"default",j=y?.[S]||rG[S];void 0===j&&(v?.("003",tN.error003(S)),S="default",j=y?.default||rG.default);let C=!!(w.draggable||a&&void 0===w.draggable),k=!!(w.selectable||l&&void 0===w.selectable),M=!!(w.connectable||d&&void 0===w.connectable),D=!!(w.focusable||c&&void 0===w.focusable),E=n1(),$=t9(w),A=function({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){n1();let o=(0,p.useRef)(null);return(0,p.useRef)(null),(0,p.useRef)(e.sourcePosition),(0,p.useRef)(e.targetPosition),(0,p.useRef)(t),n&&e.internals.handleBounds,o}({node:w,nodeType:S,hasDimensions:$,resizeObserver:u}),P=rT({nodeRef:A,disabled:w.hidden||!C,noDragClassName:g,handleSelector:w.dragHandle,nodeId:e,isSelectable:k,nodeClickDistance:b}),I=rF();if(w.hidden)return null;let O=t8(w),R=void 0===w.internals.handleBounds?{width:w.width??w.initialWidth??w.style?.width,height:w.height??w.initialHeight??w.style?.height}:{width:w.width??w.style?.width,height:w.height??w.style?.height},B=k||C||t||n||r||o;return(0,h.jsx)("div",{className:nz(["react-flow__node",`react-flow__node-${S}`,{[f]:C},w.className,{selected:w.selected,selectable:k,parent:N,draggable:C,dragging:P}]),ref:A,style:{zIndex:_.z,transform:`translate(${_.positionAbsolute.x}px,${_.positionAbsolute.y}px)`,pointerEvents:B?"all":"none",visibility:$?"visible":"hidden",...w.style,...R},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:n?e=>n(e,{..._.userNode}):void 0,onMouseMove:r?e=>r(e,{..._.userNode}):void 0,onMouseLeave:o?e=>o(e,{..._.userNode}):void 0,onContextMenu:i?e=>i(e,{..._.userNode}):void 0,onClick:n=>{let{selectNodesOnDrag:r,nodeDragThreshold:o}=E.getState();k&&(!r||!C||o>0)&&rz({id:e,store:E,nodeRef:A}),t&&t(n,{..._.userNode})},onDoubleClick:s?e=>s(e,{..._.userNode}):void 0,onKeyDown:D?t=>{if(!function(e){let t=e.composedPath?.()?.[0]||e.target;return t?.nodeType===1&&(nr.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey"))}(t.nativeEvent)&&!m){if(tj.includes(t.key)&&k)rz({id:e,store:E,unselect:"Escape"===t.key,nodeRef:A});else if(C&&w.selected&&Object.prototype.hasOwnProperty.call(rU,t.key)){t.preventDefault();let{ariaLabelConfig:e}=E.getState();E.setState({ariaLiveMessage:e["node.a11yDescription.ariaLiveMessage"]({direction:t.key.replace("Arrow","").toLowerCase(),x:~~_.positionAbsolute.x,y:~~_.positionAbsolute.y})}),I({direction:rU[t.key],factor:t.shiftKey?4:1})}}}:void 0,tabIndex:D?0:void 0,onFocus:D?()=>{if(m||!A.current?.matches(":focus-visible"))return;let{transform:t,width:n,height:r,autoPanOnNodeFocus:o,setCenter:i}=E.getState();o&&(tR(new Map([[e,w]]),{x:0,y:0,width:n,height:r},t,!0).length>0||i(w.position.x+O.width/2,w.position.y+O.height/2,{zoom:t[2]}))}:void 0,role:w.ariaRole??(D?"group":void 0),"aria-roledescription":"node","aria-describedby":m?void 0:`${n4}-${x}`,"aria-label":w.ariaLabel,...w.domAttributes,children:(0,h.jsx)(rZ,{value:e,children:(0,h.jsx)(j,{id:e,data:w.data,type:S,positionAbsoluteX:_.positionAbsolute.x,positionAbsoluteY:_.positionAbsolute.y,selected:w.selected??!1,selectable:k,draggable:C,deletable:w.deletable??!0,isConnectable:M,sourcePosition:w.sourcePosition,targetPosition:w.targetPosition,dragging:P,dragHandle:w.dragHandle,zIndex:_.z,parentId:w.parentId,...O})})})}let r7=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function r8(e){var t;let{nodesDraggable:n,nodesConnectable:r,nodesFocusable:o,elementsSelectable:i,onError:s}=n0(r7,nU),a=(t=e.onlyRenderVisibleElements,n0((0,p.useCallback)(r4(t),[t]),nU)),l=function(){let e=n0(r5),[t]=(0,p.useState)(()=>"undefined"==typeof ResizeObserver?null:new ResizeObserver(t=>{let n=new Map;t.forEach(e=>{let t=e.target.getAttribute("data-id");n.set(t,{id:t,nodeElement:e.target,force:!0})}),e(n)}));return t}();return(0,h.jsx)("div",{className:"react-flow__nodes",style:rA,children:a.map(t=>(0,h.jsx)(r6,{id:t,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:l,nodesDraggable:n,nodesConnectable:r,nodesFocusable:o,elementsSelectable:i,nodeClickDistance:e.nodeClickDistance,onError:s},t))})}r8.displayName="NodeRenderer";let r9=(0,p.memo)(r8),oe={[l.Arrow]:({color:e="none",strokeWidth:t=1})=>{let n={strokeWidth:t,...e&&{stroke:e}};return(0,h.jsx)("polyline",{style:n,strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"})},[l.ArrowClosed]:({color:e="none",strokeWidth:t=1})=>{let n={strokeWidth:t,...e&&{stroke:e,fill:e}};return(0,h.jsx)("polyline",{style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})}},ot=({id:e,type:t,color:n,width:r=12.5,height:o=12.5,markerUnits:i="strokeWidth",strokeWidth:s,orient:a="auto-start-reverse"})=>{let l=function(e){let t=n1();return(0,p.useMemo)(()=>Object.prototype.hasOwnProperty.call(oe,e)?oe[e]:(t.getState().onError?.("009",tN.error009(e)),null),[e])}(t);return l?(0,h.jsx)("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:a,refX:"0",refY:"0",children:(0,h.jsx)(l,{color:n,strokeWidth:s})}):null},on=({defaultColor:e,rfId:t})=>{let n=n0(e=>e.edges),r=n0(e=>e.defaultEdgeOptions),o=(0,p.useMemo)(()=>(function(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:o}){let i=new Set;return e.reduce((e,s)=>([s.markerStart||r,s.markerEnd||o].forEach(r=>{if(r&&"object"==typeof r){let o=nS(r,t);i.has(o)||(e.push({id:o,color:r.color||n,...r}),i.add(o))}}),e),[]).sort((e,t)=>e.id.localeCompare(t.id))})(n,{id:t,defaultColor:e,defaultMarkerStart:r?.markerStart,defaultMarkerEnd:r?.markerEnd}),[n,r,t,e]);return o.length?(0,h.jsx)("svg",{className:"react-flow__marker","aria-hidden":"true",children:(0,h.jsx)("defs",{children:o.map(e=>(0,h.jsx)(ot,{id:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,strokeWidth:e.strokeWidth,orient:e.orient},e.id))})}):null};on.displayName="MarkerDefinitions";var or=(0,p.memo)(on);function oo({x:e,y:t,label:n,labelStyle:r,labelShowBg:o=!0,labelBgStyle:i,labelBgPadding:s=[2,4],labelBgBorderRadius:a=2,children:l,className:d,...c}){let[u,g]=(0,p.useState)({x:1,y:0,width:0,height:0}),f=nz(["react-flow__edge-textwrapper",d]),m=(0,p.useRef)(null);return n?(0,h.jsxs)("g",{transform:`translate(${e-u.width/2} ${t-u.height/2})`,className:f,visibility:u.width?"visible":"hidden",...c,children:[o&&(0,h.jsx)("rect",{width:u.width+2*s[0],x:-s[0],y:-s[1],height:u.height+2*s[1],className:"react-flow__edge-textbg",style:i,rx:a,ry:a}),(0,h.jsx)("text",{className:"react-flow__edge-text",y:u.height/2,dy:"0.3em",ref:m,style:r,children:n}),l]}):null}oo.displayName="EdgeText";let oi=(0,p.memo)(oo);function os({path:e,labelX:t,labelY:n,label:r,labelStyle:o,labelShowBg:i,labelBgStyle:s,labelBgPadding:a,labelBgBorderRadius:l,interactionWidth:d=20,...c}){return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("path",{...c,d:e,fill:"none",className:nz(["react-flow__edge-path",c.className])}),d?(0,h.jsx)("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:d,className:"react-flow__edge-interaction"}):null,r&&tJ(t)&&tJ(n)?(0,h.jsx)(oi,{x:t,y:n,label:r,labelStyle:o,labelShowBg:i,labelBgStyle:s,labelBgPadding:a,labelBgBorderRadius:l}):null]})}function oa({pos:e,x1:t,y1:n,x2:r,y2:o}){return e===d.Left||e===d.Right?[.5*(t+r),n]:[t,.5*(n+o)]}function ol({sourceX:e,sourceY:t,sourcePosition:n=d.Bottom,targetX:r,targetY:o,targetPosition:i=d.Top}){let[s,a]=oa({pos:n,x1:e,y1:t,x2:r,y2:o}),[l,c]=oa({pos:i,x1:r,y1:o,x2:e,y2:t}),[u,h,p,g]=na({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:s,sourceControlY:a,targetControlX:l,targetControlY:c});return[`M${e},${t} C${s},${a} ${l},${c} ${r},${o}`,u,h,p,g]}function od(e){return(0,p.memo)(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:i,sourcePosition:s,targetPosition:a,label:l,labelStyle:d,labelShowBg:c,labelBgStyle:u,labelBgPadding:p,labelBgBorderRadius:g,style:f,markerEnd:m,markerStart:x,interactionWidth:y})=>{let[b,v,w]=ol({sourceX:n,sourceY:r,sourcePosition:s,targetX:o,targetY:i,targetPosition:a}),_=e.isInternal?void 0:t;return(0,h.jsx)(os,{id:_,path:b,labelX:v,labelY:w,label:l,labelStyle:d,labelShowBg:c,labelBgStyle:u,labelBgPadding:p,labelBgBorderRadius:g,style:f,markerEnd:m,markerStart:x,interactionWidth:y})})}let oc=od({isInternal:!1}),ou=od({isInternal:!0});function oh(e){return(0,p.memo)(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:i,label:s,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:p,style:g,sourcePosition:f=d.Bottom,targetPosition:m=d.Top,markerEnd:x,markerStart:y,pathOptions:b,interactionWidth:v})=>{let[w,_,N]=nb({sourceX:n,sourceY:r,sourcePosition:f,targetX:o,targetY:i,targetPosition:m,borderRadius:b?.borderRadius,offset:b?.offset,stepPosition:b?.stepPosition}),S=e.isInternal?void 0:t;return(0,h.jsx)(os,{id:S,path:w,labelX:_,labelY:N,label:s,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:p,style:g,markerEnd:x,markerStart:y,interactionWidth:v})})}oc.displayName="SimpleBezierEdge",ou.displayName="SimpleBezierEdgeInternal";let op=oh({isInternal:!1}),og=oh({isInternal:!0});function of(e){return(0,p.memo)(({id:t,...n})=>{let r=e.isInternal?void 0:t;return(0,h.jsx)(op,{...n,id:r,pathOptions:(0,p.useMemo)(()=>({borderRadius:0,offset:n.pathOptions?.offset}),[n.pathOptions?.offset])})})}op.displayName="SmoothStepEdge",og.displayName="SmoothStepEdgeInternal";let om=of({isInternal:!1}),ox=of({isInternal:!0});function oy(e){return(0,p.memo)(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:i,label:s,labelStyle:a,labelShowBg:l,labelBgStyle:d,labelBgPadding:c,labelBgBorderRadius:u,style:p,markerEnd:g,markerStart:f,interactionWidth:m})=>{let[x,y,b]=nf({sourceX:n,sourceY:r,targetX:o,targetY:i}),v=e.isInternal?void 0:t;return(0,h.jsx)(os,{id:v,path:x,labelX:y,labelY:b,label:s,labelStyle:a,labelShowBg:l,labelBgStyle:d,labelBgPadding:c,labelBgBorderRadius:u,style:p,markerEnd:g,markerStart:f,interactionWidth:m})})}om.displayName="StepEdge",ox.displayName="StepEdgeInternal";let ob=oy({isInternal:!1}),ov=oy({isInternal:!0});function ow(e){return(0,p.memo)(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:i,sourcePosition:s=d.Bottom,targetPosition:a=d.Top,label:l,labelStyle:c,labelShowBg:u,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:f,style:m,markerEnd:x,markerStart:y,pathOptions:b,interactionWidth:v})=>{let[w,_,N]=nc({sourceX:n,sourceY:r,sourcePosition:s,targetX:o,targetY:i,targetPosition:a,curvature:b?.curvature}),S=e.isInternal?void 0:t;return(0,h.jsx)(os,{id:S,path:w,labelX:_,labelY:N,label:l,labelStyle:c,labelShowBg:u,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:f,style:m,markerEnd:x,markerStart:y,interactionWidth:v})})}ob.displayName="StraightEdge",ov.displayName="StraightEdgeInternal";let o_=ow({isInternal:!1}),oN=ow({isInternal:!0});o_.displayName="BezierEdge",oN.displayName="BezierEdgeInternal";let oS={default:oN,straight:ov,step:ox,smoothstep:og,simplebezier:ou},oj={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},oC=(e,t,n)=>n===d.Left?e-t:n===d.Right?e+t:e,ok=(e,t,n)=>n===d.Top?e-t:n===d.Bottom?e+t:e,oM="react-flow__edgeupdater";function oD({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:o,onMouseEnter:i,onMouseOut:s,type:a}){return(0,h.jsx)("circle",{onMouseDown:o,onMouseEnter:i,onMouseOut:s,className:nz([oM,`${oM}-${a}`]),cx:oC(t,r,e),cy:ok(n,r,e),r:r,stroke:"transparent",fill:"transparent"})}function oE({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:o,targetX:i,targetY:s,sourcePosition:a,targetPosition:l,onReconnect:d,onReconnectStart:c,onReconnectEnd:u,setReconnecting:p,setUpdateHover:g}){let f=n1(),m=(e,t)=>{if(0!==e.button)return;let{autoPanOnConnect:r,domNode:o,isValidConnection:i,connectionMode:s,connectionRadius:a,lib:l,onConnectStart:h,onConnectEnd:g,cancelConnection:m,nodeLookup:x,rfId:y,panBy:b,updateConnection:v}=f.getState(),w="target"===t.type;nH.onPointerDown(e.nativeEvent,{autoPanOnConnect:r,connectionMode:s,connectionRadius:a,domNode:o,handleId:t.id,nodeId:t.nodeId,nodeLookup:x,isTarget:w,edgeUpdaterType:t.type,lib:l,flowId:y,cancelConnection:m,panBy:b,isValidConnection:i,onConnect:e=>d?.(n,e),onConnectStart:(r,o)=>{p(!0),c?.(e,n,t.type),h?.(r,o)},onConnectEnd:g,onReconnectEnd:(e,r)=>{p(!1),u?.(e,n,t.type,r)},updateConnection:v,getTransform:()=>f.getState().transform,getFromHandle:()=>f.getState().connection.fromHandle,dragThreshold:f.getState().connectionDragThreshold,handleDomNode:e.currentTarget})},x=()=>g(!0),y=()=>g(!1);return(0,h.jsxs)(h.Fragment,{children:[(!0===e||"source"===e)&&(0,h.jsx)(oD,{position:a,centerX:r,centerY:o,radius:t,onMouseDown:e=>m(e,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),onMouseEnter:x,onMouseOut:y,type:"source"}),(!0===e||"target"===e)&&(0,h.jsx)(oD,{position:l,centerX:i,centerY:s,radius:t,onMouseDown:e=>m(e,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),onMouseEnter:x,onMouseOut:y,type:"target"})]})}function o$({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:i,onDoubleClick:s,onContextMenu:a,onMouseEnter:l,onMouseMove:c,onMouseLeave:u,reconnectRadius:g,onReconnect:f,onReconnectStart:m,onReconnectEnd:x,rfId:y,edgeTypes:b,noPanClassName:v,onError:w,disableKeyboardA11y:_}){let N=n0(t=>t.edgeLookup.get(e)),S=n0(e=>e.defaultEdgeOptions),j=(N=S?{...S,...N}:N).type||"default",C=b?.[j]||oS[j];void 0===C&&(w?.("011",tN.error011(j)),j="default",C=b?.default||oS.default);let k=!!(N.focusable||t&&void 0===N.focusable),M=void 0!==f&&(N.reconnectable||n&&void 0===N.reconnectable),D=!!(N.selectable||r&&void 0===N.selectable),E=(0,p.useRef)(null),[$,A]=(0,p.useState)(!1),[P,I]=(0,p.useState)(!1),O=n1(),{zIndex:R,sourceX:B,sourceY:L,targetX:H,targetY:z,sourcePosition:T,targetPosition:V}=n0((0,p.useCallback)(t=>{let n=t.nodeLookup.get(N.source),r=t.nodeLookup.get(N.target);if(!n||!r)return{zIndex:N.zIndex,...oj};let i=function(e){let{sourceNode:t,targetNode:n}=e;if(!nv(t)||!nv(n))return null;let r=t.internals.handleBounds||nw(t.handles),i=n.internals.handleBounds||nw(n.handles),s=nN(r?.source??[],e.sourceHandle),a=nN(e.connectionMode===o.Strict?i?.target??[]:(i?.target??[]).concat(i?.source??[]),e.targetHandle);if(!s||!a)return e.onError?.("008",tN.error008(s?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;let l=s?.position||d.Bottom,c=a?.position||d.Top,u=n_(t,s,l),h=n_(n,a,c);return{sourceX:u.x,sourceY:u.y,targetX:h.x,targetY:h.y,sourcePosition:l,targetPosition:c}}({id:e,sourceNode:n,targetNode:r,sourceHandle:N.sourceHandle||null,targetHandle:N.targetHandle||null,connectionMode:t.connectionMode,onError:w});return{zIndex:function({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r,elevateOnSelect:o=!1}){return void 0!==r?r:(o&&n?1e3:0)+Math.max(e.parentId?e.internals.z:0,t.parentId?t.internals.z:0)}({selected:N.selected,zIndex:N.zIndex,sourceNode:n,targetNode:r,elevateOnSelect:t.elevateEdgesOnSelect}),...i||oj}},[N.source,N.target,N.sourceHandle,N.targetHandle,N.selected,N.zIndex]),nU),F=(0,p.useMemo)(()=>N.markerStart?`url('#${nS(N.markerStart,y)}')`:void 0,[N.markerStart,y]),q=(0,p.useMemo)(()=>N.markerEnd?`url('#${nS(N.markerEnd,y)}')`:void 0,[N.markerEnd,y]);if(N.hidden||null===B||null===L||null===H||null===z)return null;let Z=s?e=>{s(e,{...N})}:void 0,X=a?e=>{a(e,{...N})}:void 0,Y=l?e=>{l(e,{...N})}:void 0,W=c?e=>{c(e,{...N})}:void 0,K=u?e=>{u(e,{...N})}:void 0;return(0,h.jsx)("svg",{style:{zIndex:R},children:(0,h.jsxs)("g",{className:nz(["react-flow__edge",`react-flow__edge-${j}`,N.className,v,{selected:N.selected,animated:N.animated,inactive:!D&&!i,updating:$,selectable:D}]),onClick:t=>{let{addSelectedEdges:n,unselectNodesAndEdges:r,multiSelectionActive:o}=O.getState();D&&(O.setState({nodesSelectionActive:!1}),N.selected&&o?(r({nodes:[],edges:[N]}),E.current?.blur()):n([e])),i&&i(t,N)},onDoubleClick:Z,onContextMenu:X,onMouseEnter:Y,onMouseMove:W,onMouseLeave:K,onKeyDown:k?t=>{if(!_&&tj.includes(t.key)&&D){let{unselectNodesAndEdges:n,addSelectedEdges:r}=O.getState();"Escape"===t.key?(E.current?.blur(),n({edges:[N]})):r([e])}}:void 0,tabIndex:k?0:void 0,role:N.ariaRole??(k?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":null===N.ariaLabel?void 0:N.ariaLabel||`Edge from ${N.source} to ${N.target}`,"aria-describedby":k?`${n5}-${y}`:void 0,ref:E,...N.domAttributes,children:[!P&&(0,h.jsx)(C,{id:e,source:N.source,target:N.target,type:N.type,selected:N.selected,animated:N.animated,selectable:D,deletable:N.deletable??!0,label:N.label,labelStyle:N.labelStyle,labelShowBg:N.labelShowBg,labelBgStyle:N.labelBgStyle,labelBgPadding:N.labelBgPadding,labelBgBorderRadius:N.labelBgBorderRadius,sourceX:B,sourceY:L,targetX:H,targetY:z,sourcePosition:T,targetPosition:V,data:N.data,style:N.style,sourceHandleId:N.sourceHandle,targetHandleId:N.targetHandle,markerStart:F,markerEnd:q,pathOptions:"pathOptions"in N?N.pathOptions:void 0,interactionWidth:N.interactionWidth}),M&&(0,h.jsx)(oE,{edge:N,isReconnectable:M,reconnectRadius:g,onReconnect:f,onReconnectStart:m,onReconnectEnd:x,sourceX:B,sourceY:L,targetX:H,targetY:z,sourcePosition:T,targetPosition:V,setUpdateHover:A,setReconnecting:I})]})})}let oA=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function oP({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:o,onReconnect:i,onEdgeContextMenu:s,onEdgeMouseEnter:a,onEdgeMouseMove:l,onEdgeMouseLeave:d,onEdgeClick:c,reconnectRadius:u,onEdgeDoubleClick:g,onReconnectStart:f,onReconnectEnd:m,disableKeyboardA11y:x}){let{edgesFocusable:y,edgesReconnectable:b,elementsSelectable:v,onError:w}=n0(oA,nU),_=n0((0,p.useCallback)(e=>{if(!t)return e.edges.map(e=>e.id);let n=[];if(e.width&&e.height)for(let t of e.edges){let r=e.nodeLookup.get(t.source),o=e.nodeLookup.get(t.target);r&&o&&function({sourceNode:e,targetNode:t,width:n,height:r,transform:o}){let i=tZ(tK(e),tK(t));return i.x===i.x2&&(i.x2+=1),i.y===i.y2&&(i.y2+=1),tG({x:-o[0]/o[2],y:-o[1]/o[2],width:n/o[2],height:r/o[2]},tY(i))>0}({sourceNode:r,targetNode:o,width:e.width,height:e.height,transform:e.transform})&&n.push(t.id)}return n},[t]),nU);return(0,h.jsxs)("div",{className:"react-flow__edges",children:[(0,h.jsx)(or,{defaultColor:e,rfId:n}),_.map(e=>(0,h.jsx)(o$,{id:e,edgesFocusable:y,edgesReconnectable:b,elementsSelectable:v,noPanClassName:o,onReconnect:i,onContextMenu:s,onMouseEnter:a,onMouseMove:l,onMouseLeave:d,onClick:c,reconnectRadius:u,onDoubleClick:g,onReconnectStart:f,onReconnectEnd:m,rfId:n,onError:w,edgeTypes:r,disableKeyboardA11y:x},e))]})}oP.displayName="EdgeRenderer";let oI=(0,p.memo)(oP),oO=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function oR({children:e}){let t=n0(oO);return(0,h.jsx)("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}let oB=e=>e.panZoom?.syncViewport;function oL(e){return e.connection.inProgress?{...e.connection,to:t2(e.connection.to,e.transform)}:{...e.connection}}let oH=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function oz({containerStyle:e,style:t,type:n,component:r}){let{nodesConnectable:o,width:i,height:s,isValid:a,inProgress:l}=n0(oH,nU);return i&&o&&l?(0,h.jsx)("svg",{style:e,width:i,height:s,className:"react-flow__connectionline react-flow__container",children:(0,h.jsx)("g",{className:nz(["react-flow__connection",tD(a)]),children:(0,h.jsx)(oT,{style:t,type:n,CustomComponent:r,isValid:a})})}):null}let oT=({style:e,type:t=a.Bezier,CustomComponent:n,isValid:r})=>{var o;let{inProgress:i,from:s,fromNode:l,fromHandle:d,fromPosition:c,to:u,toNode:p,toHandle:g,toPosition:f}=n0(oL,nU);if(!i)return;if(n)return(0,h.jsx)(n,{connectionLineType:t,connectionLineStyle:e,fromNode:l,fromHandle:d,fromX:s.x,fromY:s.y,toX:u.x,toY:u.y,fromPosition:c,toPosition:f,connectionStatus:tD(r),toNode:p,toHandle:g});let m="",x={sourceX:s.x,sourceY:s.y,sourcePosition:c,targetX:u.x,targetY:u.y,targetPosition:f};switch(t){case a.Bezier:[m]=nc(x);break;case a.SimpleBezier:[m]=ol(x);break;case a.Step:[m]=nb({...x,borderRadius:0});break;case a.SmoothStep:[m]=nb(x);break;default:[m]=nf(x)}return(0,h.jsx)("path",{d:m,fill:"none",className:"react-flow__connection-path",style:e})};oT.displayName="ConnectionLine";let oV={};function oF(e=oV){(0,p.useRef)(e),n1()}function oq({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:o,onNodeDoubleClick:i,onEdgeDoubleClick:s,onNodeMouseEnter:a,onNodeMouseMove:l,onNodeMouseLeave:d,onNodeContextMenu:c,onSelectionContextMenu:u,onSelectionStart:g,onSelectionEnd:f,connectionLineType:m,connectionLineStyle:x,connectionLineComponent:y,connectionLineContainerStyle:b,selectionKeyCode:v,selectionOnDrag:w,selectionMode:_,multiSelectionKeyCode:N,panActivationKeyCode:S,zoomActivationKeyCode:j,deleteKeyCode:C,onlyRenderVisibleElements:k,elementsSelectable:M,defaultViewport:D,translateExtent:E,minZoom:$,maxZoom:A,preventScrolling:P,defaultMarkerColor:I,zoomOnScroll:O,zoomOnPinch:R,panOnScroll:B,panOnScrollSpeed:L,panOnScrollMode:H,zoomOnDoubleClick:z,panOnDrag:T,onPaneClick:V,onPaneMouseEnter:F,onPaneMouseMove:q,onPaneMouseLeave:Z,onPaneScroll:X,onPaneContextMenu:Y,paneClickDistance:W,nodeClickDistance:K,onEdgeContextMenu:U,onEdgeMouseEnter:G,onEdgeMouseMove:Q,onEdgeMouseLeave:J,reconnectRadius:ee,onReconnect:et,onReconnectStart:en,onReconnectEnd:er,noDragClassName:eo,noWheelClassName:ei,noPanClassName:es,disableKeyboardA11y:ea,nodeExtent:el,rfId:ed,viewport:ec,onViewportChange:eu}){return oF(e),oF(t),n1(),(0,p.useRef)(!1),rE(),(0,p.useRef)(!1),n0(oB),n1(),(0,h.jsx)(r3,{onPaneClick:V,onPaneMouseEnter:F,onPaneMouseMove:q,onPaneMouseLeave:Z,onPaneContextMenu:Y,onPaneScroll:X,paneClickDistance:W,deleteKeyCode:C,selectionKeyCode:v,selectionOnDrag:w,selectionMode:_,onSelectionStart:g,onSelectionEnd:f,multiSelectionKeyCode:N,panActivationKeyCode:S,zoomActivationKeyCode:j,elementsSelectable:M,zoomOnScroll:O,zoomOnPinch:R,zoomOnDoubleClick:z,panOnScroll:B,panOnScrollSpeed:L,panOnScrollMode:H,panOnDrag:T,defaultViewport:D,translateExtent:E,minZoom:$,maxZoom:A,onSelectionContextMenu:u,preventScrolling:P,noDragClassName:eo,noWheelClassName:ei,noPanClassName:es,disableKeyboardA11y:ea,onViewportChange:eu,isControlledViewport:!!ec,children:(0,h.jsxs)(oR,{children:[(0,h.jsx)(oI,{edgeTypes:t,onEdgeClick:o,onEdgeDoubleClick:s,onReconnect:et,onReconnectStart:en,onReconnectEnd:er,onlyRenderVisibleElements:k,onEdgeContextMenu:U,onEdgeMouseEnter:G,onEdgeMouseMove:Q,onEdgeMouseLeave:J,reconnectRadius:ee,defaultMarkerColor:I,noPanClassName:es,disableKeyboardA11y:ea,rfId:ed}),(0,h.jsx)(oz,{style:x,type:m,component:y,containerStyle:b}),(0,h.jsx)("div",{className:"react-flow__edgelabel-renderer"}),(0,h.jsx)(r9,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:i,onNodeMouseEnter:a,onNodeMouseMove:l,onNodeMouseLeave:d,onNodeContextMenu:c,nodeClickDistance:K,onlyRenderVisibleElements:k,noPanClassName:es,noDragClassName:eo,disableKeyboardA11y:ea,nodeExtent:el,rfId:ed}),(0,h.jsx)("div",{className:"react-flow__viewport-portal"})]})})}oq.displayName="GraphView";let oZ=(0,p.memo)(oq),oX=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:a,fitViewOptions:l,minZoom:d=.5,maxZoom:c=2,nodeOrigin:u,nodeExtent:h}={})=>{let p=new Map,g=new Map,f=new Map,m=new Map,x=r??t??[],y=n??e??[],b=u??[0,0],v=h??tS;nI(f,m,x);let w=nM(y,p,g,{nodeOrigin:b,nodeExtent:v,elevateNodesOnSelect:!1}),_=[0,0,1];if(a&&i&&s){let{x:e,y:t,zoom:n}=t5(tO(p,{filter:e=>!!((e.width||e.initialWidth)&&(e.height||e.initialHeight))}),i,s,d,c,l?.padding??.1);_=[e,t,n]}return{rfId:"1",width:0,height:0,transform:_,nodes:y,nodesInitialized:w,nodeLookup:p,parentLookup:g,edges:x,edgeLookup:m,connectionLookup:f,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:void 0!==n,hasDefaultEdges:void 0!==r,panZoom:null,minZoom:d,maxZoom:c,translateExtent:tS,nodeExtent:v,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:o.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:b,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:a??!1,fitViewOptions:l,fitViewResolver:null,connection:{...tk},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:t0,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:tC}},oY=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:i,fitView:s,fitViewOptions:a,minZoom:l,maxZoom:d,nodeOrigin:c,nodeExtent:u})=>nK((h,p)=>{async function g(){let{nodeLookup:e,panZoom:t,fitViewOptions:n,fitViewResolver:r,width:o,height:i,minZoom:s,maxZoom:a}=p();t&&(await tL({nodes:e,width:o,height:i,panZoom:t,minZoom:s,maxZoom:a},n),r?.resolve(!0),h({fitViewResolver:null}))}return{...oX({nodes:e,edges:t,width:o,height:i,fitView:s,fitViewOptions:a,minZoom:l,maxZoom:d,nodeOrigin:c,nodeExtent:u,defaultNodes:n,defaultEdges:r}),setNodes:e=>{let{nodeLookup:t,parentLookup:n,nodeOrigin:r,elevateNodesOnSelect:o,fitViewQueued:i}=p(),s=nM(e,t,n,{nodeOrigin:r,nodeExtent:u,elevateNodesOnSelect:o,checkEquality:!0});i&&s?(g(),h({nodes:e,nodesInitialized:s,fitViewQueued:!1,fitViewOptions:void 0})):h({nodes:e,nodesInitialized:s})},setEdges:e=>{let{connectionLookup:t,edgeLookup:n}=p();nI(t,n,e),h({edges:e})},setDefaultNodesAndEdges:(e,t)=>{if(e){let{setNodes:t}=p();t(e),h({hasDefaultNodes:!0})}if(t){let{setEdges:e}=p();e(t),h({hasDefaultEdges:!0})}},updateNodeInternals:e=>{let{triggerNodeChanges:t,nodeLookup:n,parentLookup:r,domNode:o,nodeOrigin:i,nodeExtent:s,debug:a,fitViewQueued:l}=p(),{changes:d,updatedInternals:c}=function(e,t,n,r,o,i){let s=r?.querySelector(".xyflow__viewport"),a=!1;if(!s)return{changes:[],updatedInternals:a};let l=[],d=window.getComputedStyle(s),{m22:c}=new window.DOMMatrixReadOnly(d.transform),u=[];for(let r of e.values()){let e=t.get(r.id);if(!e)continue;if(e.hidden){t.set(e.id,{...e,internals:{...e.internals,handleBounds:void 0}}),a=!0;continue}let s=nt(r.nodeElement),d=e.measured.width!==s.width||e.measured.height!==s.height;if(s.width&&s.height&&(d||!e.internals.handleBounds||r.force)){let h=r.nodeElement.getBoundingClientRect(),p=t7(e.extent)?e.extent:i,{positionAbsolute:g}=e.internals;e.parentId&&"parent"===e.extent?g=tV(g,s,t.get(e.parentId)):p&&(g=tT(g,p,s));let f={...e,measured:s,internals:{...e.internals,positionAbsolute:g,handleBounds:{source:ns("source",r.nodeElement,h,c,e.id),target:ns("target",r.nodeElement,h,c,e.id)}}};t.set(e.id,f),e.parentId&&nD(f,t,n,{nodeOrigin:o}),a=!0,d&&(l.push({id:e.id,type:"dimensions",dimensions:s}),e.expandParent&&e.parentId&&u.push({id:e.id,parentId:e.parentId,rect:tW(f,o)}))}}if(u.length>0){let e=n$(u,t,n,o);l.push(...e)}return{changes:l,updatedInternals:a}}(e,n,r,o,i,s);c&&(function(e,t,n){let r=nk(nj,n);for(let n of e.values())if(n.parentId)nD(n,e,t,r);else{let e=tT(tP(n,r.nodeOrigin),t7(n.extent)?n.extent:r.nodeExtent,t8(n));n.internals.positionAbsolute=e}}(n,r,{nodeOrigin:i,nodeExtent:s}),l?(g(),h({fitViewQueued:!1,fitViewOptions:void 0})):h({}),d?.length>0&&(a&&console.log("React Flow: trigger node changes",d),t?.(d)))},updateNodePositions:(e,t=!1)=>{let n=[],r=[],{nodeLookup:o,triggerNodeChanges:i}=p();for(let[i,s]of e){let e=o.get(i),a=!!(e?.expandParent&&e?.parentId&&s?.position),l={id:i,type:"position",position:a?{x:Math.max(0,s.position.x),y:Math.max(0,s.position.y)}:s.position,dragging:t};a&&e.parentId&&n.push({id:i,parentId:e.parentId,rect:{...s.internals.positionAbsolute,width:s.measured.width??0,height:s.measured.height??0}}),r.push(l)}if(n.length>0){let{parentLookup:e,nodeOrigin:t}=p(),i=n$(n,o,e,t);r.push(...i)}i(r)},triggerNodeChanges:e=>{let{onNodesChange:t,setNodes:n,nodes:r,hasDefaultNodes:o,debug:i}=p();e?.length&&(o&&n(rx(e,r)),i&&console.log("React Flow: trigger node changes",e),t?.(e))},triggerEdgeChanges:e=>{let{onEdgesChange:t,setEdges:n,edges:r,hasDefaultEdges:o,debug:i}=p();e?.length&&(o&&n(rx(e,r)),i&&console.log("React Flow: trigger edge changes",e),t?.(e))},addSelectedNodes:e=>{let{multiSelectionActive:t,edgeLookup:n,nodeLookup:r,triggerNodeChanges:o,triggerEdgeChanges:i}=p();if(t){o(e.map(e=>ry(e,!0)));return}o(rb(r,new Set([...e]),!0)),i(rb(n))},addSelectedEdges:e=>{let{multiSelectionActive:t,edgeLookup:n,nodeLookup:r,triggerNodeChanges:o,triggerEdgeChanges:i}=p();if(t){i(e.map(e=>ry(e,!0)));return}i(rb(n,new Set([...e]))),o(rb(r,new Set,!0))},unselectNodesAndEdges:({nodes:e,edges:t}={})=>{let{edges:n,nodes:r,nodeLookup:o,triggerNodeChanges:i,triggerEdgeChanges:s}=p(),a=(e||r).map(e=>{let t=o.get(e.id);return t&&(t.selected=!1),ry(e.id,!1)}),l=(t||n).map(e=>ry(e.id,!1));i(a),s(l)},setMinZoom:e=>{let{panZoom:t,maxZoom:n}=p();t?.setScaleExtent([e,n]),h({minZoom:e})},setMaxZoom:e=>{let{panZoom:t,minZoom:n}=p();t?.setScaleExtent([n,e]),h({maxZoom:e})},setTranslateExtent:e=>{p().panZoom?.setTranslateExtent(e),h({translateExtent:e})},setPaneClickDistance:e=>{p().panZoom?.setClickDistance(e)},resetSelectedElements:()=>{let{edges:e,nodes:t,triggerNodeChanges:n,triggerEdgeChanges:r,elementsSelectable:o}=p();if(!o)return;let i=t.reduce((e,t)=>t.selected?[...e,ry(t.id,!1)]:e,[]),s=e.reduce((e,t)=>t.selected?[...e,ry(t.id,!1)]:e,[]);n(i),r(s)},setNodeExtent:e=>{let{nodes:t,nodeLookup:n,parentLookup:r,nodeOrigin:o,elevateNodesOnSelect:i,nodeExtent:s}=p();(e[0][0]!==s[0][0]||e[0][1]!==s[0][1]||e[1][0]!==s[1][0]||e[1][1]!==s[1][1])&&(nM(t,n,r,{nodeOrigin:o,nodeExtent:e,elevateNodesOnSelect:i,checkEquality:!1}),h({nodeExtent:e}))},panBy:e=>{let{transform:t,width:n,height:r,panZoom:o,translateExtent:i}=p();return nA({delta:e,panZoom:o,transform:t,translateExtent:i,width:n,height:r})},setCenter:async(e,t,n)=>{let{width:r,height:o,maxZoom:i,panZoom:s}=p();if(!s)return Promise.resolve(!1);let a=void 0!==n?.zoom?n.zoom:i;return await s.setViewport({x:r/2-e*a,y:o/2-t*a,zoom:a},{duration:n?.duration,ease:n?.ease,interpolate:n?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{h({connection:{...tk}})},updateConnection:e=>{h({connection:e})},reset:()=>h({...oX()})}},Object.is);function oW({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:o,initialHeight:i,initialMinZoom:s,initialMaxZoom:a,initialFitViewOptions:l,fitView:d,nodeOrigin:c,nodeExtent:u,children:g}){let[f]=(0,p.useState)(()=>oY({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:i,fitView:d,minZoom:s,maxZoom:a,fitViewOptions:l,nodeOrigin:c,nodeExtent:u}));return(0,h.jsx)(nQ,{value:f,children:(0,h.jsx)(rM,{children:g})})}function oK({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:o,width:i,height:s,fitView:a,fitViewOptions:l,minZoom:d,maxZoom:c,nodeOrigin:u,nodeExtent:g}){return(0,p.useContext)(nG)?(0,h.jsx)(h.Fragment,{children:e}):(0,h.jsx)(oW,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:o,initialWidth:i,initialHeight:s,fitView:a,initialFitViewOptions:l,initialMinZoom:d,initialMaxZoom:c,nodeOrigin:u,nodeExtent:g,children:e})}let oU={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};var oG=rS(function({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:o,nodeTypes:l,edgeTypes:d,onNodeClick:c,onEdgeClick:u,onInit:g,onMove:f,onMoveStart:m,onMoveEnd:x,onConnect:y,onConnectStart:b,onConnectEnd:v,onClickConnectStart:w,onClickConnectEnd:_,onNodeMouseEnter:N,onNodeMouseMove:S,onNodeMouseLeave:j,onNodeContextMenu:C,onNodeDoubleClick:k,onNodeDragStart:M,onNodeDrag:D,onNodeDragStop:E,onNodesDelete:$,onEdgesDelete:A,onDelete:P,onSelectionChange:I,onSelectionDragStart:O,onSelectionDrag:R,onSelectionDragStop:B,onSelectionContextMenu:L,onSelectionStart:H,onSelectionEnd:z,onBeforeDelete:T,connectionMode:V,connectionLineType:F=a.Bezier,connectionLineStyle:q,connectionLineComponent:Z,connectionLineContainerStyle:X,deleteKeyCode:Y="Backspace",selectionKeyCode:W="Shift",selectionOnDrag:K=!1,selectionMode:U=s.Full,panActivationKeyCode:G="Space",multiSelectionKeyCode:Q=t6()?"Meta":"Control",zoomActivationKeyCode:J=t6()?"Meta":"Control",snapToGrid:ee,snapGrid:et,onlyRenderVisibleElements:en=!1,selectNodesOnDrag:er,nodesDraggable:eo,autoPanOnNodeFocus:ei,nodesConnectable:es,nodesFocusable:ea,nodeOrigin:el=rl,edgesFocusable:ed,edgesReconnectable:ec,elementsSelectable:eu=!0,defaultViewport:eh=rd,minZoom:ep=.5,maxZoom:eg=2,translateExtent:ef=tS,preventScrolling:em=!0,nodeExtent:ex,defaultMarkerColor:ey="#b1b1b7",zoomOnScroll:eb=!0,zoomOnPinch:ev=!0,panOnScroll:ew=!1,panOnScrollSpeed:e_=.5,panOnScrollMode:eN=i.Free,zoomOnDoubleClick:eS=!0,panOnDrag:ej=!0,onPaneClick:eC,onPaneMouseEnter:ek,onPaneMouseMove:eM,onPaneMouseLeave:eD,onPaneScroll:eE,onPaneContextMenu:e$,paneClickDistance:eA=0,nodeClickDistance:eP=0,children:eI,onReconnect:eO,onReconnectStart:eR,onReconnectEnd:eB,onEdgeContextMenu:eL,onEdgeDoubleClick:eH,onEdgeMouseEnter:ez,onEdgeMouseMove:eT,onEdgeMouseLeave:eV,reconnectRadius:eF=10,onNodesChange:eq,onEdgesChange:eZ,noDragClassName:eX="nodrag",noWheelClassName:eY="nowheel",noPanClassName:eW="nopan",fitView:eK,fitViewOptions:eU,connectOnClick:eG,attributionPosition:eQ,proOptions:eJ,defaultEdgeOptions:e0,elevateNodesOnSelect:e1,elevateEdgesOnSelect:e2,disableKeyboardA11y:e3=!1,autoPanOnConnect:e4,autoPanOnNodeDrag:e5,autoPanSpeed:e6,connectionRadius:e7,isValidConnection:e8,onError:e9,style:te,id:tt,nodeDragThreshold:tn,connectionDragThreshold:tr,viewport:to,onViewportChange:ti,width:ts,height:ta,colorMode:tl="light",debug:td,onScroll:tc,ariaLabelConfig:tu,...th},tp){let tg=tt||"1",tf=function(e){let[t,n]=(0,p.useState)("system"===e?null:e);return null!==t?t:"light"}(tl),tm=(0,p.useCallback)(e=>{e.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),tc?.(e)},[tc]);return(0,h.jsx)("div",{"data-testid":"rf__wrapper",...th,onScroll:tm,style:{...te,...oU},ref:tp,className:nz(["react-flow",o,tf]),id:tt,role:"application",children:(0,h.jsxs)(oK,{nodes:e,edges:t,width:ts,height:ta,fitView:eK,fitViewOptions:eU,minZoom:ep,maxZoom:eg,nodeOrigin:el,nodeExtent:ex,children:[(0,h.jsx)(oZ,{onInit:g,onNodeClick:c,onEdgeClick:u,onNodeMouseEnter:N,onNodeMouseMove:S,onNodeMouseLeave:j,onNodeContextMenu:C,onNodeDoubleClick:k,nodeTypes:l,edgeTypes:d,connectionLineType:F,connectionLineStyle:q,connectionLineComponent:Z,connectionLineContainerStyle:X,selectionKeyCode:W,selectionOnDrag:K,selectionMode:U,deleteKeyCode:Y,multiSelectionKeyCode:Q,panActivationKeyCode:G,zoomActivationKeyCode:J,onlyRenderVisibleElements:en,defaultViewport:eh,translateExtent:ef,minZoom:ep,maxZoom:eg,preventScrolling:em,zoomOnScroll:eb,zoomOnPinch:ev,zoomOnDoubleClick:eS,panOnScroll:ew,panOnScrollSpeed:e_,panOnScrollMode:eN,panOnDrag:ej,onPaneClick:eC,onPaneMouseEnter:ek,onPaneMouseMove:eM,onPaneMouseLeave:eD,onPaneScroll:eE,onPaneContextMenu:e$,paneClickDistance:eA,nodeClickDistance:eP,onSelectionContextMenu:L,onSelectionStart:H,onSelectionEnd:z,onReconnect:eO,onReconnectStart:eR,onReconnectEnd:eB,onEdgeContextMenu:eL,onEdgeDoubleClick:eH,onEdgeMouseEnter:ez,onEdgeMouseMove:eT,onEdgeMouseLeave:eV,reconnectRadius:eF,defaultMarkerColor:ey,noDragClassName:eX,noWheelClassName:eY,noPanClassName:eW,rfId:tg,disableKeyboardA11y:e3,nodeExtent:ex,viewport:to,onViewportChange:ti}),(0,h.jsx)(rp,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:y,onConnectStart:b,onConnectEnd:v,onClickConnectStart:w,onClickConnectEnd:_,nodesDraggable:eo,autoPanOnNodeFocus:ei,nodesConnectable:es,nodesFocusable:ea,edgesFocusable:ed,edgesReconnectable:ec,elementsSelectable:eu,elevateNodesOnSelect:e1,elevateEdgesOnSelect:e2,minZoom:ep,maxZoom:eg,nodeExtent:ex,onNodesChange:eq,onEdgesChange:eZ,snapToGrid:ee,snapGrid:et,connectionMode:V,translateExtent:ef,connectOnClick:eG,defaultEdgeOptions:e0,fitView:eK,fitViewOptions:eU,onNodesDelete:$,onEdgesDelete:A,onDelete:P,onNodeDragStart:M,onNodeDrag:D,onNodeDragStop:E,onSelectionDrag:R,onSelectionDragStart:O,onSelectionDragStop:B,onMove:f,onMoveStart:m,onMoveEnd:x,noPanClassName:eW,nodeOrigin:el,rfId:tg,autoPanOnConnect:e4,autoPanOnNodeDrag:e5,autoPanSpeed:e6,onError:e9,connectionRadius:e7,isValidConnection:e8,selectNodesOnDrag:er,nodeDragThreshold:tn,connectionDragThreshold:tr,onBeforeDelete:T,paneClickDistance:eA,debug:td,ariaLabelConfig:tu}),(0,h.jsx)(ra,{onSelectionChange:I}),eI,(0,h.jsx)(rt,{proOptions:eJ,position:eQ}),(0,h.jsx)(n9,{rfId:tg,disableKeyboardA11y:e3})]})})});function oQ({dimensions:e,lineWidth:t,variant:n,className:r}){return(0,h.jsx)("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:nz(["react-flow__background-pattern",n,r])})}function oJ({radius:e,className:t}){return(0,h.jsx)("circle",{cx:e,cy:e,r:e,className:nz(["react-flow__background-pattern","dots",t])})}tN.error014(),function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"}(u||(u={}));let o0={[u.Dots]:1,[u.Lines]:1,[u.Cross]:6},o1=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function o2({id:e,variant:t=u.Dots,gap:n=20,size:r,lineWidth:o=1,offset:i=0,color:s,bgColor:a,style:l,className:d,patternClassName:c}){let g=(0,p.useRef)(null),{transform:f,patternId:m}=n0(o1,nU),x=r||o0[t],y=t===u.Dots,b=t===u.Cross,v=Array.isArray(n)?n:[n,n],w=[v[0]*f[2]||1,v[1]*f[2]||1],_=x*f[2],N=Array.isArray(i)?i:[i,i],S=b?[_,_]:w,j=[N[0]*f[2]||1+S[0]/2,N[1]*f[2]||1+S[1]/2],C=`${m}${e||""}`;return(0,h.jsxs)("svg",{className:nz(["react-flow__background",d]),style:{...l,...rA,"--xy-background-color-props":a,"--xy-background-pattern-color-props":s},ref:g,"data-testid":"rf__background",children:[(0,h.jsx)("pattern",{id:C,x:f[0]%w[0],y:f[1]%w[1],width:w[0],height:w[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${j[0]},-${j[1]})`,children:y?(0,h.jsx)(oJ,{radius:_/2,className:c}):(0,h.jsx)(oQ,{dimensions:S,lineWidth:o,variant:t,className:c})}),(0,h.jsx)("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${C})`})]})}o2.displayName="Background";let o3=(0,p.memo)(o2);function o4(){return(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:(0,h.jsx)("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function o5(){return(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:(0,h.jsx)("path",{d:"M0 0h32v4.2H0z"})})}function o6(){return(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:(0,h.jsx)("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function o7(){return(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:(0,h.jsx)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function o8(){return(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:(0,h.jsx)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function o9({children:e,className:t,...n}){return(0,h.jsx)("button",{type:"button",className:nz(["react-flow__controls-button",t]),...n,children:e})}let ie=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function it({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:o,onZoomIn:i,onZoomOut:s,onFitView:a,onInteractiveChange:l,className:d,children:c,position:u="bottom-left",orientation:p="vertical","aria-label":g}){let f=n1(),{isInteractive:m,minZoomReached:x,maxZoomReached:y,ariaLabelConfig:b}=n0(ie,nU),{zoomIn:v,zoomOut:w,fitView:_}=rE();return(0,h.jsxs)(re,{className:nz(["react-flow__controls","horizontal"===p?"horizontal":"vertical",d]),position:u,style:e,"data-testid":"rf__controls","aria-label":g??b["controls.ariaLabel"],children:[t&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(o9,{onClick:()=>{v(),i?.()},className:"react-flow__controls-zoomin",title:b["controls.zoomIn.ariaLabel"],"aria-label":b["controls.zoomIn.ariaLabel"],disabled:y,children:(0,h.jsx)(o4,{})}),(0,h.jsx)(o9,{onClick:()=>{w(),s?.()},className:"react-flow__controls-zoomout",title:b["controls.zoomOut.ariaLabel"],"aria-label":b["controls.zoomOut.ariaLabel"],disabled:x,children:(0,h.jsx)(o5,{})})]}),n&&(0,h.jsx)(o9,{className:"react-flow__controls-fitview",onClick:()=>{_(o),a?.()},title:b["controls.fitView.ariaLabel"],"aria-label":b["controls.fitView.ariaLabel"],children:(0,h.jsx)(o6,{})}),r&&(0,h.jsx)(o9,{className:"react-flow__controls-interactive",onClick:()=>{f.setState({nodesDraggable:!m,nodesConnectable:!m,elementsSelectable:!m}),l?.(!m)},title:b["controls.interactive.ariaLabel"],"aria-label":b["controls.interactive.ariaLabel"],children:m?(0,h.jsx)(o8,{}):(0,h.jsx)(o7,{})}),c]})}it.displayName="Controls";let ir=(0,p.memo)(it),io=(0,p.memo)(function({id:e,x:t,y:n,width:r,height:o,style:i,color:s,strokeColor:a,strokeWidth:l,className:d,borderRadius:c,shapeRendering:u,selected:p,onClick:g}){let{background:f,backgroundColor:m}=i||{};return(0,h.jsx)("rect",{className:nz(["react-flow__minimap-node",{selected:p},d]),x:t,y:n,rx:c,ry:c,width:r,height:o,style:{fill:s||f||m,stroke:a,strokeWidth:l},shapeRendering:u,onClick:g?t=>g(t,e):void 0})}),ii=e=>e.nodes.map(e=>e.id),is=e=>e instanceof Function?e:()=>e,ia=(0,p.memo)(function({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:o,nodeStrokeWidth:i,shapeRendering:s,NodeComponent:a,onClick:l}){let{node:d,x:c,y:u,width:p,height:g}=n0(t=>{let{internals:n}=t.nodeLookup.get(e),r=n.userNode,{x:o,y:i}=n.positionAbsolute,{width:s,height:a}=t8(r);return{node:r,x:o,y:i,width:s,height:a}},nU);return d&&!d.hidden&&t9(d)?(0,h.jsx)(a,{x:c,y:u,width:p,height:g,style:d.style,selected:!!d.selected,className:r(d),color:t(d),borderRadius:o,strokeColor:n(d),strokeWidth:i,shapeRendering:s,onClick:l,id:d.id}):null});var il=(0,p.memo)(function({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:o,nodeComponent:i=io,onClick:s}){let a=n0(ii,nU),l=is(t),d=is(e),c=is(n);return(0,h.jsx)(h.Fragment,{children:a.map(e=>(0,h.jsx)(ia,{id:e,nodeColorFunc:l,nodeStrokeColorFunc:d,nodeClassNameFunc:c,nodeBorderRadius:r,nodeStrokeWidth:o,NodeComponent:i,onClick:s,shapeRendering:"crispEdges"},e))})});let id=e=>!e.hidden,ic=e=>{let t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?tU(tO(e.nodeLookup,{filter:id}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}};function iu({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:o="",nodeBorderRadius:i=5,nodeStrokeWidth:s,nodeComponent:a,bgColor:l,maskColor:d,maskStrokeColor:c,maskStrokeWidth:u,position:g="bottom-right",onClick:f,onNodeClick:m,pannable:x=!1,zoomable:y=!1,ariaLabel:b,inversePan:v,zoomStep:w=1,offsetScale:_=5}){let N=n1(),S=(0,p.useRef)(null),{boundingRect:j,viewBB:C,rfId:k,panZoom:M,translateExtent:D,flowWidth:E,flowHeight:$,ariaLabelConfig:A}=n0(ic,nU),P=e?.width??200,I=e?.height??150,O=Math.max(j.width/P,j.height/I),R=O*P,B=O*I,L=_*O,H=j.x-(R-j.width)/2-L,z=j.y-(B-j.height)/2-L,T=R+2*L,V=B+2*L,F=`react-flow__minimap-desc-${k}`,q=(0,p.useRef)(0),Z=(0,p.useRef)();q.current=O;let X=m?(0,p.useCallback)((e,t)=>{m(e,N.getState().nodeLookup.get(t).internals.userNode)},[]):void 0,Y=b??A["minimap.ariaLabel"];return(0,h.jsx)(re,{position:g,style:{...e,"--xy-minimap-background-color-props":"string"==typeof l?l:void 0,"--xy-minimap-mask-background-color-props":"string"==typeof d?d:void 0,"--xy-minimap-mask-stroke-color-props":"string"==typeof c?c:void 0,"--xy-minimap-mask-stroke-width-props":"number"==typeof u?u*O:void 0,"--xy-minimap-node-background-color-props":"string"==typeof r?r:void 0,"--xy-minimap-node-stroke-color-props":"string"==typeof n?n:void 0,"--xy-minimap-node-stroke-width-props":"number"==typeof s?s:void 0},className:nz(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:(0,h.jsxs)("svg",{width:P,height:I,viewBox:`${H} ${z} ${T} ${V}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":F,ref:S,onClick:f?e=>{let[t,n]=Z.current?.pointer(e)||[0,0];f(e,{x:t,y:n})}:void 0,children:[Y&&(0,h.jsx)("title",{id:F,children:Y}),(0,h.jsx)(il,{onClick:X,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:i,nodeClassName:o,nodeStrokeWidth:s,nodeComponent:a}),(0,h.jsx)("path",{className:"react-flow__minimap-mask",d:`M${H-L},${z-L}h${T+2*L}v${V+2*L}h${-T-2*L}z
        M${C.x},${C.y}h${C.width}v${C.height}h${-C.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}iu.displayName="MiniMap";let ih=(0,p.memo)(iu),ip=(c.Line,c.Handle,{bg:"!bg-green-600",hoverBg:"hover:!bg-green-700",shadow:"drop-shadow(0 0 8px rgba(34,197,94,.3))"}),ig=`!w-4 !h-4 !border-2 !border-white pointer-events-auto ${ip.bg} ${ip.hoverBg}`,im={filter:ip.shadow,zIndex:10},ix=(e=!0)=>[{position:d.Left,type:"target",id:"left"},{position:d.Right,type:"source",id:"right"},{position:d.Top,type:"target",id:"top"},{position:d.Bottom,type:"source",id:"bottom"}].map(({position:t,type:n,id:r})=>h.jsx(rK,{id:r,type:n,position:t,isConnectable:e,className:ig,style:im},r)),iy={default:"bg-white border-gray-800 text-gray-800",primary:"bg-blue-50 border-blue-600 text-blue-900",success:"bg-green-50 border-green-600 text-green-900",warning:"bg-yellow-50 border-yellow-600 text-yellow-900",danger:"bg-red-50 border-red-600 text-red-900",product:"bg-purple-50 border-purple-300 text-purple-800"},ib={sm:"px-2 py-1 min-w-[80px] text-xs",md:"px-4 py-3 min-w-[120px] text-sm",lg:"px-6 py-4 min-w-[160px] text-base"},iv=(0,p.memo)(function({data:e,isConnectable:t=!0,targetPosition:n,sourcePosition:r,variant:o,size:i,showHandles:s,onDoubleClick:a,selected:l}){let d=o||e.variant||"default",c=i||e.size||"md",u=void 0!==s?s:void 0===e.showHandles||e.showHandles,p=`
    ${iy[d]} 
    ${ib[c]}
    border-2 rounded-lg shadow-md relative hover:shadow-lg transition-all duration-200
    hover:scale-105 cursor-pointer
  `.trim();return(0,h.jsxs)("div",{className:`${p} ${l?"border-2 border-opacity-100 shadow-lg":""}`,onDoubleClick:()=>{a&&a({data:e,selected:l})},style:{cursor:e.productData?"pointer":"default",pointerEvents:"auto"},children:[u&&ix(t),(0,h.jsxs)("div",{className:"text-center",children:[(0,h.jsxs)("div",{className:`font-semibold mb-1 ${"lg"===c?"text-lg":"sm"===c?"text-xs":"text-sm"}`,children:["product"===d?"\uD83D\uDCE6 ":"",e.label]}),e.description&&h.jsx("div",{className:`text-opacity-70 ${"lg"===c?"text-sm":"text-xs"}`,children:e.description}),e.productData&&"product"===d&&(0,h.jsxs)("div",{className:"text-xs opacity-60 mt-2",children:[(0,h.jsxs)("div",{className:"flex justify-between",children:[h.jsx("span",{children:"생산량:"}),h.jsx("span",{className:"font-medium",children:e.productData.production_qty||0})]}),(0,h.jsxs)("div",{className:"flex justify-between",children:[h.jsx("span",{children:"수출량:"}),h.jsx("span",{className:"font-medium",children:e.productData.export_qty||0})]})]})]})]})}),iw={default:"bg-white border-gray-800 text-gray-800",primary:"bg-blue-50 border-blue-600 text-blue-900",success:"bg-green-50 border-green-600 text-green-900",warning:"bg-yellow-50 border-yellow-600 text-yellow-900",danger:"bg-red-50 border-red-600 text-red-900",process:"bg-blue-50 border-blue-300 text-blue-800"},i_={sm:"px-2 py-1 min-w-[80px] text-xs",md:"px-4 py-3 min-w-[120px] text-sm",lg:"px-6 py-4 min-w-[160px] text-base"},iN=(0,p.memo)(function({data:e,isConnectable:t=!0,targetPosition:n,sourcePosition:r,variant:o,size:i,showHandles:s,onDoubleClick:a,selected:l}){let d=o||e.variant||"process",c=i||e.size||"md",u=void 0!==s?s:void 0===e.showHandles||e.showHandles,p=`
    ${iw[d]} 
    ${i_[c]}
    border-2 rounded-lg shadow-md relative hover:shadow-lg transition-all duration-200
    hover:scale-105 cursor-pointer
  `.trim();return(0,h.jsxs)("div",{className:`${p} ${l?"border-2 border-opacity-100 shadow-lg":""}`,onDoubleClick:()=>{a&&a({data:e,selected:l})},style:{cursor:e.processData?"pointer":"default",pointerEvents:"auto"},children:[u&&ix(t),(0,h.jsxs)("div",{className:"text-center",children:[(0,h.jsxs)("div",{className:`font-semibold mb-1 ${"lg"===c?"text-lg":"sm"===c?"text-xs":"text-sm"}`,children:["process"===d?"⚙️ ":"",e.label]}),e.description&&h.jsx("div",{className:`text-opacity-70 ${"lg"===c?"text-sm":"text-xs"}`,children:e.description}),e.processData&&(0,h.jsxs)("div",{className:"space-y-1 mt-2",children:[(0,h.jsxs)("div",{className:`text-xs text-opacity-60 ${"lg"===c?"text-sm":"text-xs"}`,children:["공정: ",e.processData.process_name]}),e.processData.energy_source&&(0,h.jsxs)("div",{className:`text-xs text-opacity-60 ${"lg"===c?"text-sm":"text-xs"}`,children:["에너지: ",e.processData.energy_source]}),e.processData.process_type&&(0,h.jsxs)("div",{className:`text-xs text-opacity-60 ${"lg"===c?"text-sm":"text-xs"}`,children:["유형: ",e.processData.process_type]})]})]})]})});var iS=n(4956);n(8520);let ij={custom:({id:e,sourceX:t,sourceY:n,targetX:r,targetY:o,selected:i})=>{let[s]=g().useMemo(()=>{let e=(t+r)/2;return[`M ${t} ${n} Q ${e} ${n} ${r} ${o}`]},[t,n,r,o]);return h.jsx("path",{id:e,className:"react-flow__edge-path",d:s,stroke:i?"#3b82f6":"#6b7280",strokeWidth:i?3:2,fill:"none"})}};function iC(){let[e,t,n]=function(e){let[t,n]=(0,p.useState)(e),r=(0,p.useCallback)(e=>n(t=>rx(e,t)),[]);return[t,n,r]}([]),[r,i,s]=function(e){let[t,n]=(0,p.useState)(e),r=(0,p.useCallback)(e=>n(t=>rx(e,t)),[]);return[t,n,r]}([]),{addNodes:a,addEdges:d}=rE(),[c,u]=(0,p.useState)([]),[g,x]=(0,p.useState)(null),[y,b]=(0,p.useState)(!1),[v,w]=(0,p.useState)({}),[_,N]=(0,p.useState)(null),[S,j]=(0,p.useState)([]),[C,k]=(0,p.useState)(!1),[M,D]=(0,p.useState)([]),[E,$]=(0,p.useState)(null),[A,P]=(0,p.useState)(!1),[I,O]=(0,p.useState)([]),[R,B]=(0,p.useState)("all"),[L,H]=(0,p.useState)(!1),[z,T]=(0,p.useState)([]),[V,F]=(0,p.useState)(!1);(0,p.useCallback)(async()=>{let e=[{id:1,install_name:"포항제철소",reporting_year:"2025",location:"경상북도 포항시",industry_type:"철강제조업"},{id:2,install_name:"광양제철소",reporting_year:"2025",location:"전라남도 광양시",industry_type:"철강제조업"},{id:3,install_name:"울산제철소",reporting_year:"2025",location:"울산광역시",industry_type:"철강제조업"}];console.log("\uD83D\uDD0D 목업 사업장 데이터:",e),u(e),e.length>0&&(x(e[0]),N(e[0].id))},[]),(0,p.useCallback)(async e=>{let t=[{id:1,install_id:e,product_name:"철강 제품 A",product_category:"단순제품",prostart_period:"2024-01-01",proend_period:"2024-12-31",product_amount:1e3,product_cncode:"HS7208",goods_name:"철강판",aggrgoods_name:"열간압연철강판",product_sell:800,product_eusell:200},{id:2,install_id:e,product_name:"알루미늄 제품 B",product_category:"복합제품",prostart_period:"2024-01-01",proend_period:"2024-12-31",product_amount:500,product_cncode:"HS7606",goods_name:"알루미늄판",aggrgoods_name:"압연알루미늄판",product_sell:400,product_eusell:100},{id:3,install_id:e,product_name:"구리 제품 C",product_category:"단순제품",prostart_period:"2024-01-01",proend_period:"2024-12-31",product_amount:300,product_cncode:"HS7408",goods_name:"구리판",aggrgoods_name:"압연구리판",product_sell:250,product_eusell:50}];console.log("\uD83D\uDD0D 목업 제품 데이터:",t),j(t)},[]),(0,p.useCallback)(async e=>{let t=[{id:1,process_name:"압연 공정",start_period:"2024-01-01",end_period:"2024-12-31",products:[{id:1},{id:2},{id:3}],install_id:e,process_type:"제조공정",energy_source:"전기"},{id:2,process_name:"용해 공정",start_period:"2024-01-01",end_period:"2024-12-31",products:[{id:1},{id:2}],install_id:e,process_type:"제조공정",energy_source:"가스"},{id:3,process_name:"주조 공정",start_period:"2024-01-01",end_period:"2024-12-31",products:[{id:2},{id:3}],install_id:e,process_type:"제조공정",energy_source:"전기"},{id:4,process_name:"표면처리 공정",start_period:"2024-01-01",end_period:"2024-12-31",products:[{id:1},{id:3}],install_id:e,process_type:"후처리공정",energy_source:"화학약품"}];console.log("\uD83D\uDD0D 목업 공정 데이터:",t),D(t),O(t)},[]);let q=(0,p.useCallback)(e=>{let n=[],r=[];console.log("\uD83D\uDD0D 목업 캔버스 초기화 (빈 상태):",{installId:e,nodes:n,edges:r}),w(t=>({...t,[e]:{nodes:n,edges:r}})),_===e&&(t(n),i(r))},[_,t,i]);(0,p.useCallback)(async e=>{try{let t=await iS.ZP.get(iS.__.cbam.process.list),n=S.filter(t=>t.install_id===e).map(e=>e.id),r=t.data.filter(e=>e.products&&e.products.some(e=>n.includes(e.id)));O(r),console.log("\uD83D\uDD0D 사업장의 모든 공정들:",r)}catch(e){console.error("전체 공정 목록 조회 실패:",e),O([{id:1,process_name:"제철공정",start_period:"2025-01-01",end_period:"2025-12-31",products:[{id:1}]},{id:2,process_name:"압연공정",start_period:"2025-01-01",end_period:"2025-12-31",products:[{id:2}]},{id:3,process_name:"도금공정",start_period:"2025-01-01",end_period:"2025-12-31",products:[{id:3}]}])}},[S]),(0,p.useCallback)(async()=>{try{let e=await iS.ZP.get(iS.__.cbam.process.list),t=S.filter(e=>e.install_id===g?.id).map(e=>e.id),n=e.data.filter(e=>e.products&&e.products.some(e=>t.includes(e.id)));T(n),console.log("\uD83D\uDD0D 크로스 사업장 공정들:",n)}catch(e){console.error("크로스 사업장 공정 목록 조회 실패:",e),T([{id:1,process_name:"제철공정",start_period:"2025-01-01",end_period:"2025-12-31",products:[{id:1}]},{id:2,process_name:"압연공정",start_period:"2025-01-01",end_period:"2025-12-31",products:[{id:2}]},{id:3,process_name:"도금공정",start_period:"2025-01-01",end_period:"2025-12-31",products:[{id:3}]}])}},[S,g]);let Z=(0,p.useCallback)(async e=>{try{let t=(await iS.ZP.get(iS.__.cbam.process.list)).data.filter(t=>t.products&&t.products.some(t=>t.id===e));D(t),console.log("\uD83D\uDD0D 제품의 공정들:",t)}catch(t){console.error("제품별 공정 목록 조회 실패:",t),D([{id:1,process_name:"제철공정",start_period:"2025-01-01",end_period:"2025-12-31",products:[{id:e}]},{id:2,process_name:"압연공정",start_period:"2025-01-01",end_period:"2025-12-31",products:[{id:e}]}])}},[]),X=(0,p.useCallback)(()=>{b(!0)},[]),Y=(0,p.useCallback)(n=>{console.log("\uD83C\uDFED 사업장 선택:",n),_&&w(t=>({...t,[_]:{nodes:e,edges:r}})),x(n),N(n.id),b(!1);let o=v[n.id];o||(q(n.id),o=v[n.id]),console.log("\uD83D\uDCCA 캔버스 데이터 복원:",o),t(o.nodes),i(o.edges)},[_,e,r,v,t,i,q]),W=(0,p.useCallback)(async()=>{if(!g){alert("먼저 사업장을 선택해주세요.");return}k(!0)},[g]),K=(0,p.useCallback)(e=>{console.log("\uD83D\uDD0D 제품 노드 클릭:",e),$(e);let t=[{id:1,process_name:"압연 공정",start_period:"2025-01-01",end_period:"2025-12-31",energy_source:"전기",process_type:"제조공정"},{id:2,process_name:"용해 공정",start_period:"2025-01-01",end_period:"2025-12-31",energy_source:"가스",process_type:"제조공정"},{id:3,process_name:"주조 공정",start_period:"2025-01-01",end_period:"2025-12-31",energy_source:"전기",process_type:"제조공정"},{id:4,process_name:"표면처리 공정",start_period:"2025-01-01",end_period:"2025-12-31",energy_source:"화학약품",process_type:"후처리공정"}];D(t),P(!0),console.log("\uD83D\uDD0D 목업 공정 데이터 설정 완료:",t)},[]),U=(0,p.useCallback)(()=>{B("all"),H(!0)},[]);(0,p.useCallback)(e=>{$(e),Z(e.id),P(!0)},[Z]);let G=(0,p.useCallback)(e=>{let t=e.id,n=g?.id,r={id:t,product_name:e.product_name,install_id:n,product_type:"단순제품",amount:1e3};a({id:`product-${n}-${t}`,type:"custom",position:{x:400*Math.random()+100,y:300*Math.random()+100},data:{label:r.product_name,description:`제품: ${r.product_name}`,variant:"product",productData:r,install_id:n}}),k(!1),console.log("✅ 목업 제품 노드 추가 완료:",r)},[a,g]),Q=(0,p.useCallback)(e=>{if(!E)return;let t=E.id,n=E.install_id;console.log("\uD83D\uDD0D 공정 선택됨:",{process:e,selectedProduct:E,productId:t,installId:n});let r={id:`process-${n}-${t}-${Date.now()}`,type:"process",position:{x:400,y:100+200*Math.random()},data:{label:e.process_name,description:e.process_name,variant:"process",processData:e,product_names:E.product_name,install_id:n,energy_source:e.energy_source||"전기",process_type:e.process_type||"제조공정"}},o={id:`edge-${n}-${t}-${Date.now()}`,source:`product-${n}-${t}`,target:r.id,type:"custom",data:{label:`${E.product_name} → ${r.data.label}`}};console.log("\uD83D\uDD0D 생성할 공정 노드:",r),console.log("\uD83D\uDD0D 생성할 엣지:",o),a(r),d(o),P(!1),$(null),console.log("✅ 공정 노드 1개 추가 완료:",{processNode:r,newEdge:o})},[E,a,d]),J=(0,p.useCallback)(()=>{a({id:`group-${Date.now()}-${Math.random().toString(36).slice(2)}`,type:"group",position:{x:400*Math.random()+100,y:300*Math.random()+100},style:{width:200,height:100},data:{label:"그룹"}})},[a]);return(0,h.jsxs)("div",{className:"w-full h-full flex flex-col",children:[(0,h.jsxs)("div",{className:"bg-gray-900 text-white p-4",children:[h.jsx("h1",{className:"text-2xl font-bold",children:"CBAM 산정경계설정"}),h.jsx("p",{className:"text-gray-300",children:"CBAM 배출량 산정을 위한 경계를 설정하고 노드를 생성합니다."})]}),h.jsx("div",{className:"bg-gray-800 p-4",children:(0,h.jsxs)("div",{className:"flex items-center gap-4",children:[(0,h.jsxs)("div",{className:"w-48 h-24 bg-gray-700 border-2 border-dashed border-gray-500 rounded-lg flex flex-col items-center justify-center cursor-pointer hover:border-blue-400 hover:bg-gray-600 transition-colors",onClick:X,children:[h.jsx("div",{className:"text-4xl text-gray-400 mb-1",children:"+"}),h.jsx("div",{className:"text-sm text-gray-300",children:"사업장 추가"})]}),Object.keys(v).map(e=>{let t=c.find(t=>t.id===parseInt(e));if(!t)return null;let n=_===parseInt(e),r=v[parseInt(e)],o=r?.nodes?.length||0;return(0,h.jsxs)("div",{className:`w-48 h-24 rounded-lg flex flex-col justify-center p-3 cursor-pointer transition-all ${n?"bg-blue-600 border-2 border-blue-400 shadow-lg":"bg-gray-700 border-2 border-gray-600 hover:border-gray-500"}`,onClick:()=>Y(t),children:[(0,h.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[h.jsx("div",{className:"font-semibold text-white text-sm",children:t.install_name}),(0,h.jsxs)("div",{className:"text-xs text-gray-300",children:[o,"개 노드"]})]}),h.jsx("div",{className:"text-xs text-gray-300",children:t.reporting_year&&`${t.reporting_year}년`}),n&&h.jsx("div",{className:"text-xs text-blue-200 mt-1",children:"활성"})]},e)})]})}),(0,h.jsxs)("div",{className:"bg-gray-800 p-4 flex gap-2",children:[(0,h.jsxs)(f.Z,{onClick:W,disabled:!g,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[h.jsx(m.Z,{className:"h-4 w-4"})," 제품 노드"]}),(0,h.jsxs)(f.Z,{onClick:U,disabled:!g,className:"bg-purple-600 hover:bg-purple-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[h.jsx(m.Z,{className:"h-4 w-4"})," 공정 노드 (크로스 사업장)"]}),(0,h.jsxs)(f.Z,{onClick:J,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[h.jsx(m.Z,{className:"h-4 w-4"})," 그룹 노드"]})]}),h.jsx("div",{className:"flex-1",children:(0,h.jsxs)(oG,{nodes:e,edges:r,onNodesChange:n,onEdgesChange:s,onConnect:e=>d({id:`e-${Date.now()}-${Math.random().toString(36).slice(2)}`,source:e.source,target:e.target,sourceHandle:e.sourceHandle??void 0,targetHandle:e.targetHandle??void 0,type:"custom"}),onNodeClick:(e,t)=>{console.log("\uD83D\uDD0D 노드 클릭됨:",{event:e,node:t}),"custom"===t.type&&t.data.productData&&(console.log("\uD83D\uDD0D 제품 노드 클릭됨:",t.data.productData),K(t.data.productData))},nodeTypes:{custom:iv,process:iN},edgeTypes:ij,connectionMode:o.Loose,defaultEdgeOptions:{type:"custom",markerEnd:{type:l.ArrowClosed}},deleteKeyCode:"Delete",className:"bg-gray-900",fitView:!0,children:[h.jsx(o3,{color:"#334155",gap:24,size:1}),h.jsx(ir,{className:"!bg-gray-800 !border !border-gray-700 !text-gray-200 !rounded-md",position:"bottom-left",style:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"6px"}}),h.jsx(ih,{className:"!border !border-gray-700 !rounded-md",style:{backgroundColor:"#0b1220"},maskColor:"rgba(17,24,39,0.6)",nodeColor:()=>"#a78bfa",nodeStrokeColor:()=>"#e5e7eb",pannable:!0,zoomable:!0})]})}),y&&h.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/60 z-50",children:(0,h.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg max-w-md w-full mx-4 border border-gray-700",children:[(0,h.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("h3",{className:"text-lg font-semibold text-white",children:"사업장 선택"}),h.jsx("button",{onClick:()=>b(!1),className:"text-gray-400 hover:text-gray-200",children:"✕"})]}),h.jsx("div",{className:"space-y-2",children:c.length>0?c.map(e=>(0,h.jsxs)("div",{className:"p-3 border border-gray-600 rounded-lg cursor-pointer hover:bg-gray-700 hover:border-blue-400 transition-colors",onClick:()=>Y(e),children:[h.jsx("div",{className:"font-medium text-white",children:e.install_name}),(0,h.jsxs)("div",{className:"text-sm text-gray-300",children:["ID: ",e.id]}),e.reporting_year&&(0,h.jsxs)("div",{className:"text-sm text-gray-300",children:["보고기간: ",e.reporting_year,"년"]})]},e.id)):h.jsx("div",{className:"text-center py-4 text-gray-400",children:"등록된 사업장이 없습니다."})})]})}),C&&h.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/60 z-50",children:(0,h.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg max-w-md w-full mx-4 border border-gray-700",children:[(0,h.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("h3",{className:"text-lg font-semibold text-white",children:"제품 선택"}),h.jsx("button",{onClick:()=>k(!1),className:"text-gray-400 hover:text-gray-200",children:"✕"})]}),h.jsx("div",{className:"space-y-2",children:S.length>0?S.map(e=>(0,h.jsxs)("div",{className:"p-3 border border-gray-600 rounded-lg cursor-pointer hover:bg-gray-700 hover:border-blue-400 transition-colors",onClick:()=>G(e),children:[h.jsx("div",{className:"font-medium text-white",children:e.product_name}),(0,h.jsxs)("div",{className:"text-sm text-gray-300",children:["카테고리: ",e.product_category]}),(0,h.jsxs)("div",{className:"text-sm text-gray-300",children:["수량: ",e.product_amount]})]},e.id)):h.jsx("div",{className:"text-center py-4 text-gray-400",children:"선택된 사업장에 등록된 제품이 없습니다."})})]})}),A&&h.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/60 z-50",children:(0,h.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg max-w-md w-full mx-4 border border-gray-700",children:[(0,h.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,h.jsxs)("h3",{className:"text-lg font-semibold text-white",children:["공정 추가 - ",E?.product_name]}),h.jsx("button",{onClick:()=>P(!1),className:"text-gray-400 hover:text-gray-200",children:"✕"})]}),h.jsx("div",{className:"space-y-2",children:M.length>0?M.map(e=>(0,h.jsxs)("div",{className:"p-3 border border-gray-600 rounded-lg cursor-pointer hover:bg-gray-700 hover:border-purple-400 transition-colors",onClick:()=>Q(e),children:[h.jsx("div",{className:"font-medium text-white",children:e.process_name}),(0,h.jsxs)("div",{className:"text-sm text-gray-300",children:["시작일: ",e.start_period||"N/A"]}),(0,h.jsxs)("div",{className:"text-sm text-gray-300",children:["종료일: ",e.end_period||"N/A"]})]},e.id)):(0,h.jsxs)("div",{className:"text-center py-4 text-gray-400",children:[E?.product_name,"에 등록된 공정이 없습니다."]})})]})}),L&&h.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/60 z-50",children:(0,h.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg max-w-2xl w-full mx-4 border border-gray-700",children:[(0,h.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,h.jsxs)("h3",{className:"text-lg font-semibold text-white",children:["공정 선택 - ","product"===R?E?.product_name:"전체 공정"]}),h.jsx("button",{onClick:()=>H(!1),className:"text-gray-400 hover:text-gray-200",children:"✕"})]}),(0,h.jsxs)("div",{className:"mb-4 flex gap-2",children:[h.jsx("button",{onClick:()=>B("all"),className:`px-3 py-1 rounded text-sm transition-colors ${"all"===R?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"전체 공정"}),E&&(0,h.jsxs)("button",{onClick:()=>B("product"),className:`px-3 py-1 rounded text-sm transition-colors ${"product"===R?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[E.product_name," 공정만"]})]}),h.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:(()=>{let e="product"===R?I.filter(e=>e.products&&e.products.some(e=>e.id===E?.id)):I;return e.length>0?e.map(e=>{let t=S.filter(t=>e.products&&e.products.some(e=>e.id===t.id)).map(e=>e.product_name).join(", "),n=e.products&&e.products.some(e=>e.install_id!==g?.id),r=c.find(t=>e.products&&e.products.some(e=>e.install_id===t.id));return(0,h.jsxs)("div",{className:`p-3 border rounded-lg cursor-pointer transition-colors ${n?"border-gray-500 bg-gray-700 hover:bg-gray-600":"border-gray-600 hover:bg-gray-700 hover:border-purple-400"}`,onClick:()=>Q(e),children:[h.jsx("div",{className:"font-medium text-white",children:e.process_name}),(0,h.jsxs)("div",{className:"text-sm text-gray-300",children:["사용 제품: ",t||"N/A"]}),n&&(0,h.jsxs)("div",{className:"text-sm text-gray-400",children:["외부 사업장: ",r?.install_name||"알 수 없음"," (읽기 전용)"]}),(0,h.jsxs)("div",{className:"text-sm text-gray-300",children:["시작일: ",e.start_period||"N/A"]}),(0,h.jsxs)("div",{className:"text-sm text-gray-300",children:["종료일: ",e.end_period||"N/A"]})]},e.id)}):h.jsx("div",{className:"text-center py-4 text-gray-400",children:"product"===R?`${E?.product_name}에 등록된 공정이 없습니다.`:"등록된 공정이 없습니다."})})()})]})})]})}function ik(){return h.jsx("div",{className:"w-full h-screen",children:h.jsx(oW,{children:h.jsx(iC,{})})})}var iM=n(9980),iD=n(4549);function iE(){let[e,t]=(0,p.useState)("overview"),[n,r]=(0,p.useState)(""),[o,i]=(0,p.useState)("2025"),[s,a]=(0,p.useState)([{id:11,name:"포항제철소",reportingYear:"2025"}]),[l,d]=(0,p.useState)([]),[c,u]=(0,p.useState)([]),[g,f]=(0,p.useState)(!1),[m,x]=(0,p.useState)(null),[y,b]=(0,p.useState)(!1),[v,w]=(0,p.useState)(!1),[_,N]=(0,p.useState)(!1),[S,j]=(0,p.useState)(null),[C,k]=(0,p.useState)(!1),[M,D]=(0,p.useState)(null),[E,$]=(0,p.useState)({product_name:"",product_category:"단순제품",prostart_period:"",proend_period:"",product_amount:0,product_cncode:"",goods_name:"",aggrgoods_name:"",product_sell:0,product_eusell:0}),[A,P]=(0,p.useState)({process_name:""}),I=(0,p.useCallback)(()=>{if(n&&o){let e={id:s.length>0?Math.max(...s.map(e=>e.id))+1:1,name:n,reportingYear:o};a(t=>[...t,e]),r(""),x({message:"사업장이 성공적으로 생성되었습니다!",type:"success"}),b(!1)}else x({message:"사업장명과 보고기간을 입력해주세요.",type:"error"})},[n,o,s]),O=(0,p.useCallback)(e=>{a(t=>t.filter(t=>t.id!==e)),x({message:"사업장이 삭제되었습니다.",type:"info"})},[]),R=(0,p.useCallback)(e=>{j(e),w(!0),B(e.id),L(e.id)},[]),B=(0,p.useCallback)(async e=>{let t=[{id:1,install_id:e,product_name:"철강 제품 A",product_category:"단순제품",prostart_period:"2024-01-01",proend_period:"2024-12-31",product_amount:1e3,product_cncode:"HS7208",goods_name:"철강판",aggrgoods_name:"열간압연철강판",product_sell:800,product_eusell:200},{id:2,install_id:e,product_name:"알루미늄 제품 B",product_category:"복합제품",prostart_period:"2024-01-01",proend_period:"2024-12-31",product_amount:500,product_cncode:"HS7606",goods_name:"알루미늄판",aggrgoods_name:"압연알루미늄판",product_sell:400,product_eusell:100}];console.log("\uD83D\uDD0D 목업 제품 데이터:",t),d(t)},[]),L=(0,p.useCallback)(async e=>{let t=[{id:1,process_name:"압연 공정",start_period:"2024-01-01",end_period:"2024-12-31",products:[{id:1},{id:2}]},{id:2,process_name:"용해 공정",start_period:"2024-01-01",end_period:"2024-12-31",products:[{id:1}]},{id:3,process_name:"주조 공정",start_period:"2024-01-01",end_period:"2024-12-31",products:[{id:2}]}];console.log("\uD83D\uDD0D 목업 공정 데이터:",t),u(t)},[]),H=(e,t)=>{$(n=>({...n,[e]:t}))},z=(e,t)=>{P(n=>({...n,[e]:t}))},T=(0,p.useCallback)(async()=>{if(!E.product_name||!E.prostart_period||!E.proend_period){x({message:"필수 필드를 모두 입력해주세요.",type:"error"});return}try{let e={id:l.length>0?Math.max(...l.map(e=>e.id))+1:1,install_id:S?.id,...E,created_at:new Date().toISOString()};console.log("✅ 목업 제품 생성:",e),d(t=>[...t,e]),x({message:"제품이 성공적으로 생성되었습니다.",type:"success"}),$({product_name:"",product_category:"단순제품",prostart_period:"",proend_period:"",product_amount:0,product_cncode:"",goods_name:"",aggrgoods_name:"",product_sell:0,product_eusell:0}),k(!1)}catch(e){console.error("❌ 제품 생성 실패:",e),x({message:`제품 생성에 실패했습니다: ${e.message}`,type:"error"})}},[E,S,l]),V=(0,p.useCallback)(async e=>{if(!A.process_name){x({message:"공정명을 입력해주세요.",type:"error"});return}try{let t={id:c.length>0?Math.max(...c.map(e=>e.id))+1:1,process_name:A.process_name,start_period:new Date().toISOString().split("T")[0],end_period:new Date().toISOString().split("T")[0],products:[{id:e}],created_at:new Date().toISOString()};console.log("✅ 목업 공정 생성:",t),u(e=>[...e,t]),x({message:"공정이 성공적으로 생성되었습니다.",type:"success"}),P({process_name:""}),D(null)}catch(e){console.error("❌ 공정 생성 실패:",e),x({message:`공정 생성에 실패했습니다: ${e.message}`,type:"error"})}},[A,c]),F=(0,p.useCallback)(async(e,t)=>{if(confirm(`"${t}" 제품을 삭제하시겠습니까?

⚠️ 주의: 이 제품과 연결된 모든 공정이 함께 삭제됩니다.`))try{d(t=>t.filter(t=>t.id!==e)),u(t=>t.filter(t=>!t.products?.some(t=>t.id===e))),console.log("✅ 목업 제품 삭제 완료"),x({message:`"${t}" 제품이 성공적으로 삭제되었습니다.`,type:"success"})}catch(e){console.error("❌ 제품 삭제 실패:",e),x({message:`제품 삭제에 실패했습니다: ${e.message}`,type:"error"})}},[]),q=(0,p.useCallback)(async(e,t)=>{if(confirm(`"${t}" 공정을 삭제하시겠습니까?`))try{u(t=>t.filter(t=>t.id!==e)),console.log("✅ 목업 공정 삭제 완료"),x({message:`"${t}" 공정이 성공적으로 삭제되었습니다.`,type:"success"})}catch(e){console.error("❌ 공정 삭제 실패:",e),x({message:`공정 삭제에 실패했습니다: ${e.message}`,type:"error"})}},[]);return(0,p.useCallback)(e=>{x({message:`사업장 ID ${e}의 제품 관리 페이지로 이동합니다.`,type:"info"})},[]),(0,p.useCallback)(()=>{x({message:"전체 제품 관리 페이지로 이동합니다.",type:"info"})},[]),(0,p.useCallback)(()=>{x({message:"CBAM 계산이 완료되었습니다.",type:"success"})},[]),(0,h.jsxs)(iM.Z,{children:[(0,h.jsxs)("div",{className:"space-y-6",children:[(0,h.jsxs)("div",{className:"flex flex-col gap-3",children:[h.jsx("h1",{className:"stitch-h1 text-3xl font-bold",children:"CBAM 관리"}),h.jsx("p",{className:"stitch-caption",children:"탄소국경조정메커니즘(CBAM) 프로세스 및 계산 관리"})]}),(0,h.jsxs)("div",{className:"flex space-x-1 p-1 bg-white/5 rounded-lg",children:[h.jsx("button",{onClick:()=>t("overview"),className:`flex-1 px-4 py-2 rounded-md text-sm font-medium transition-colors ${"overview"===e?"bg-primary text-white":"text-white/60 hover:text-white hover:bg-white/5"}`,children:"개요"}),h.jsx("button",{onClick:()=>t("install"),className:`flex-1 px-4 py-2 rounded-md text-sm font-medium transition-colors ${"install"===e?"bg-primary text-white":"text-white/60 hover:text-white hover:bg-white/5"}`,children:"사업장관리"}),h.jsx("button",{onClick:()=>t("boundary"),className:`flex-1 px-4 py-2 rounded-md text-sm font-medium transition-colors ${"boundary"===e?"bg-primary text-white":"text-white/60 hover:text-white hover:bg-white/5"}`,children:"산정경계설정"}),h.jsx("button",{onClick:()=>t("reports"),className:`flex-1 px-4 py-2 rounded-md text-sm font-medium transition-colors ${"reports"===e?"bg-primary text-white":"text-white/60 hover:text-white hover:bg-white/5"}`,children:"보고서"}),h.jsx("button",{onClick:()=>t("settings"),className:`flex-1 px-4 py-2 rounded-md text-sm font-medium transition-colors ${"settings"===e?"bg-primary text-white":"text-white/60 hover:text-white hover:bg-white/5"}`,children:"설정"})]}),"overview"===e&&h.jsx("div",{className:"space-y-6",children:(0,h.jsxs)("div",{className:"stitch-card p-6",children:[h.jsx("h3",{className:"stitch-h1 text-lg font-semibold mb-4",children:"CBAM 개요"}),h.jsx("p",{className:"stitch-caption text-white/60",children:"탄소국경조정메커니즘(CBAM)은 EU가 수입되는 특정 상품의 탄소 배출량에 대해 탄소 가격을 부과하는 제도입니다."}),(0,h.jsxs)("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,h.jsxs)("div",{className:"p-4 bg-white/5 rounded-lg",children:[h.jsx("h4",{className:"font-semibold text-white mb-2",children:"적용 대상"}),h.jsx("p",{className:"text-white/60 text-sm",children:"철강, 시멘트, 알루미늄, 비료, 전기, 수소 등"})]}),(0,h.jsxs)("div",{className:"p-4 bg-white/5 rounded-lg",children:[h.jsx("h4",{className:"font-semibold text-white mb-2",children:"탄소 가격"}),h.jsx("p",{className:"text-white/60 text-sm",children:"EU ETS 평균 가격 기준으로 계산"})]}),(0,h.jsxs)("div",{className:"p-4 bg-white/5 rounded-lg",children:[h.jsx("h4",{className:"font-semibold text-white mb-2",children:"시행 일정"}),h.jsx("p",{className:"text-white/60 text-sm",children:"2023년 10월부터 단계적 시행"})]})]})]})}),"install"===e&&h.jsx("div",{className:"space-y-6",children:(0,h.jsxs)("div",{className:"stitch-card p-6",children:[h.jsx("h3",{className:"stitch-h1 text-lg font-semibold mb-4",children:"CBAM 사업장 관리"}),h.jsx("p",{className:"stitch-caption text-white/60",children:"CBAM 적용 대상 사업장 정보를 생성하고 관리합니다."}),(0,h.jsxs)("div",{className:"mt-6 bg-white/5 rounded-lg p-6 border border-white/10",children:[h.jsx("h4",{className:"font-semibold text-white mb-4 flex items-center gap-2",children:"\uD83C\uDFED 사업장 생성"}),(0,h.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,h.jsxs)("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"사업장명 *"}),h.jsx("input",{type:"text",placeholder:"예: 포항제철소",value:n,onChange:e=>r(e.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,h.jsxs)("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"보고기간 *"}),h.jsx("input",{type:"number",placeholder:"예: 2025",value:o,onChange:e=>i(e.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,min:"2000",max:"2100"})]})]}),h.jsx("div",{className:"flex justify-end",children:h.jsx("button",{onClick:I,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg transition-colors duration-200",children:"\uD83C\uDFED 사업장 생성"})})]}),(0,h.jsxs)("div",{className:"mt-6 bg-white/5 rounded-lg p-6 border border-white/10",children:[(0,h.jsxs)("h4",{className:"font-semibold text-white mb-4 flex items-center gap-2",children:["\uD83D\uDCCB 등록된 사업장 목록 (",s.length,"개)"]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(e=>(0,h.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4 border border-white/20 hover:bg-white/20 transition-all duration-200",children:[(0,h.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[h.jsx("h5",{className:"text-white font-semibold text-lg",children:e.name}),(0,h.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-blue-500/20 text-blue-300",children:["ID: ",e.id]})]}),h.jsx("div",{className:"space-y-1 mb-3",children:(0,h.jsxs)("p",{className:"text-gray-300 text-sm",children:["보고기간: ",e.reportingYear,"년"]})}),(0,h.jsxs)("div",{className:"mt-3 pt-3 border-t border-white/10 flex gap-2",children:[h.jsx("button",{onClick:()=>R(e),className:"flex-1 px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-md transition-colors duration-200",children:"제품 관리"}),h.jsx("button",{onClick:()=>O(e.id),className:"px-3 py-2 bg-red-600 hover:bg-red-700 text-white text-sm font-medium rounded-md transition-colors duration-200",children:"삭제"})]})]},e.id))})]})]})}),"boundary"===e&&h.jsx("div",{className:"space-y-6",children:(0,h.jsxs)("div",{className:"stitch-card p-6",children:[h.jsx("h3",{className:"stitch-h1 text-lg font-semibold mb-4",children:"CBAM 산정경계설정"}),h.jsx("p",{className:"stitch-caption text-white/60",children:"CBAM 배출량 산정을 위한 경계를 설정하고 노드를 생성합니다."}),h.jsx("div",{className:"mt-6",children:h.jsx(ik,{})})]})}),"reports"===e&&h.jsx("div",{className:"space-y-6",children:(0,h.jsxs)("div",{className:"stitch-card p-6",children:[h.jsx("h3",{className:"stitch-h1 text-lg font-semibold mb-4",children:"CBAM 보고서"}),h.jsx("p",{className:"stitch-caption text-white/60",children:"탄소국경조정메커니즘 관련 보고서를 생성하고 관리합니다."}),h.jsx("div",{className:"mt-4 p-4 bg-white/5 rounded-lg",children:h.jsx("p",{className:"text-white/40 text-sm",children:"보고서 기능은 개발 중입니다..."})})]})}),"settings"===e&&h.jsx("div",{className:"space-y-6",children:(0,h.jsxs)("div",{className:"stitch-card p-6",children:[h.jsx("h3",{className:"stitch-h1 text-lg font-semibold mb-4",children:"CBAM 설정"}),h.jsx("p",{className:"stitch-caption text-white/60",children:"CBAM 관련 설정을 구성합니다."}),h.jsx("div",{className:"mt-4 p-4 bg-white/5 rounded-lg",children:h.jsx("p",{className:"text-white/40 text-sm",children:"설정 기능은 개발 중입니다..."})})]})})]}),m&&h.jsx("div",{className:`fixed bottom-4 right-4 p-4 rounded-lg shadow-lg z-50 ${"success"===m.type?"bg-green-500 text-white":"error"===m.type?"bg-red-500 text-white":"bg-blue-500 text-white"}`,children:m.message}),v&&S&&h.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/60 z-50",children:(0,h.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg max-w-4xl w-full mx-4 border border-gray-700 max-h-[90vh] overflow-y-auto",children:[(0,h.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,h.jsxs)("h3",{className:"text-lg font-semibold text-white",children:["\uD83D\uDCE6 제품 관리 - ",S.name]}),h.jsx("button",{onClick:()=>w(!1),className:"text-gray-400 hover:text-gray-200",children:h.jsx(iD.Z,{className:"h-6 w-6"})})]}),(0,h.jsxs)("div",{className:"space-y-6",children:[(0,h.jsxs)("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("h4",{className:"text-md font-semibold text-white",children:"\uD83D\uDCE6 제품 생성"}),h.jsx("button",{onClick:()=>k(!C),className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-md transition-colors duration-200",children:C?"취소":"제품 추가"})]}),C&&(0,h.jsxs)("form",{onSubmit:e=>{e.preventDefault(),T()},className:"space-y-3",children:[(0,h.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,h.jsxs)("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"제품명 *"}),h.jsx("input",{type:"text",value:E.product_name,onChange:e=>H("product_name",e.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",placeholder:"예: 철강, 알루미늄",required:!0})]}),(0,h.jsxs)("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"제품 카테고리"}),(0,h.jsxs)("select",{value:E.product_category,onChange:e=>H("product_category",e.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",required:!0,children:[h.jsx("option",{value:"단순제품",children:"단순제품"}),h.jsx("option",{value:"복합제품",children:"복합제품"})]})]})]}),(0,h.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,h.jsxs)("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"기간 시작일 *"}),h.jsx("input",{type:"date",value:E.prostart_period,onChange:e=>H("prostart_period",e.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",required:!0})]}),(0,h.jsxs)("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"기간 종료일 *"}),h.jsx("input",{type:"date",value:E.proend_period,onChange:e=>H("proend_period",e.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",required:!0})]})]}),h.jsx("button",{type:"submit",className:"w-full px-4 py-2 bg-green-600 hover:bg-green-700 text-white font-medium rounded-md transition-colors duration-200 text-sm",children:"\uD83D\uDCE6 제품 생성"})]})]}),(0,h.jsxs)("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:[(0,h.jsxs)("h4",{className:"text-md font-semibold text-white mb-4",children:["\uD83D\uDCCB 등록된 제품 목록 (",l.length,"개)"]}),0===l.length?h.jsx("p",{className:"text-gray-300 text-center py-4",children:"등록된 제품이 없습니다."}):h.jsx("div",{className:"space-y-4",children:l.map(e=>{let t=c.filter(t=>t.products&&t.products.some(t=>t.id===e.id)),n=M===e.id;return(0,h.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-3 border border-white/20",children:[(0,h.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[h.jsx("h5",{className:"text-white font-semibold text-md",children:e.product_name}),h.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${"단순제품"===e.product_category?"bg-green-500/20 text-green-300":"bg-blue-500/20 text-blue-300"}`,children:e.product_category})]}),(0,h.jsxs)("div",{className:"space-y-1 mb-3",children:[(0,h.jsxs)("p",{className:"text-gray-300 text-xs",children:["기간: ",e.prostart_period," ~ ",e.proend_period]}),(0,h.jsxs)("p",{className:"text-gray-300 text-xs",children:["수량: ",e.product_amount.toLocaleString()]}),(0,h.jsxs)("p",{className:"text-gray-300 text-xs",children:["공정 수: ",t.length,"개"]})]}),t.length>0&&(0,h.jsxs)("div",{className:"mb-3 p-2 bg-white/5 rounded-lg",children:[h.jsx("h6",{className:"text-xs font-medium text-white mb-2",children:"\uD83D\uDCCB 등록된 공정:"}),h.jsx("div",{className:"space-y-1",children:t.map(e=>(0,h.jsxs)("div",{className:"flex justify-between items-center p-1 bg-white/5 rounded text-xs",children:[h.jsx("span",{className:"text-gray-300",children:e.process_name}),h.jsx("button",{onClick:()=>q(e.id,e.process_name),className:"px-1 py-0.5 bg-red-600 hover:bg-red-700 text-white rounded text-xs",children:"삭제"})]},e.id))})]}),n&&(0,h.jsxs)("div",{className:"mb-3 p-3 bg-white/5 rounded-lg border border-purple-500/30",children:[h.jsx("h6",{className:"text-xs font-medium text-white mb-2",children:"\uD83D\uDD04 공정 추가"}),(0,h.jsxs)("form",{onSubmit:t=>{t.preventDefault(),V(e.id)},className:"space-y-2",children:[(0,h.jsxs)("div",{children:[h.jsx("label",{className:"block text-xs font-medium text-gray-300 mb-1",children:"공정명 *"}),h.jsx("input",{type:"text",value:A.process_name,onChange:e=>z("process_name",e.target.value),className:"w-full px-2 py-1 bg-white/10 border border-white/20 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-purple-500 text-xs",placeholder:"예: 압연, 용해, 주조",required:!0})]}),(0,h.jsxs)("div",{className:"flex gap-2",children:[h.jsx("button",{type:"submit",className:"flex-1 px-2 py-1 bg-purple-600 hover:bg-purple-700 text-white text-xs font-medium rounded-md transition-colors duration-200",children:"\uD83D\uDD04 공정 생성"}),h.jsx("button",{type:"button",onClick:()=>D(null),className:"px-2 py-1 bg-gray-600 hover:bg-gray-700 text-white text-xs font-medium rounded-md transition-colors duration-200",children:"취소"})]})]})]}),(0,h.jsxs)("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>D(n?null:e.id),className:"flex-1 px-2 py-1 bg-purple-600 hover:bg-purple-700 text-white text-xs font-medium rounded-md transition-colors duration-200",children:n?"공정 추가 취소":"공정 추가"}),h.jsx("button",{onClick:()=>F(e.id,e.product_name),className:"px-2 py-1 bg-red-600 hover:bg-red-700 text-white text-xs font-medium rounded-md transition-colors duration-200",children:"삭제"})]})]},e.id)})})]})]})]})})]})}},8825:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(3020),o=n(7892),i=n.n(o),s=n(9349);let a=({variant:e="primary",size:t="md",loading:n=!1,asChild:o=!1,className:a,disabled:l,children:d,...c})=>{let u="inline-flex items-center justify-center font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-ecotrace-background disabled:opacity-50 disabled:cursor-not-allowed",h={primary:"bg-ecotrace-primary text-white hover:bg-blue-600 focus:ring-ecotrace-primary",secondary:"bg-ecotrace-secondary text-white hover:bg-gray-700 focus:ring-ecotrace-secondary",outline:"border border-ecotrace-border bg-transparent text-ecotrace-text hover:bg-ecotrace-surface focus:ring-ecotrace-border",ghost:"bg-transparent text-ecotrace-text hover:bg-ecotrace-surface focus:ring-ecotrace-text"},p={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"};return o&&i().isValidElement(d)?i().cloneElement(d,{className:(0,s.cn)(u,h[e],p[t],a),disabled:l||n,...c}):(0,r.jsxs)("button",{className:(0,s.cn)(u,h[e],p[t],a),disabled:l||n,...c,children:[n&&(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.042 1.135 5.824 3 7.938l3-2.647z"})]}),d]})}},9068:(e,t,n)=>{"use strict";n.r(t),n.d(t,{$$typeof:()=>s,__esModule:()=>i,default:()=>a});var r=n(7756);let o=(0,r.createProxy)(String.raw`C:\Users\sdhg\Desktop\greensteel-main\greensteel-main\frontend\src\app\(protected)\cbam\page.tsx`),{__esModule:i,$$typeof:s}=o;o.default;let a=(0,r.createProxy)(String.raw`C:\Users\sdhg\Desktop\greensteel-main\greensteel-main\frontend\src\app\(protected)\cbam\page.tsx#default`)},8520:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),r=t.X(0,[217,538,392,347,790,980],()=>n(3628));module.exports=r})();