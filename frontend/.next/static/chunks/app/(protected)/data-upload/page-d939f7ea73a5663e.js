(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[564],{6421:function(e,s,t){Promise.resolve().then(t.bind(t,60))},5736:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(2289).Z)("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]])},8641:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(2289).Z)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},6733:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(2289).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},1860:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(2289).Z)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},60:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return b}});var a=t(3107),r=t(8396),l=t(6201),c=t(8641),n=t(5473),i=t(6733),d=t(1860),o=t(5736),x=t(2289);let m=(0,x.Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),u=(0,x.Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var h=t(2692),p=t(348),y=e=>{let{tabs:s,activeTab:t,onTabChange:r,variant:l="default",className:c}=e,n={default:"px-4 py-2 rounded-lg transition-colors duration-200",underline:"px-4 py-4 border-b-2 transition-colors duration-200"},i={default:"bg-ecotrace-primary text-white",underline:"border-ecotrace-accent text-ecotrace-text"},d={default:"text-ecotrace-textSecondary hover:text-ecotrace-text hover:bg-ecotrace-surface",underline:"border-transparent text-ecotrace-textSecondary hover:text-ecotrace-text"};return(0,a.jsxs)("div",{className:(0,p.cn)("w-full",c),children:[(0,a.jsx)("div",{className:"flex border-b border-ecotrace-border",children:s.map(e=>(0,a.jsx)("button",{onClick:()=>r(e.id),className:(0,p.cn)(n[l],t===e.id?i[l]:d[l],"focus:outline-none focus:ring-2 focus:ring-ecotrace-primary focus:ring-offset-2 focus:ring-offset-ecotrace-background"),role:"tab","aria-selected":t===e.id,"aria-controls":"panel-".concat(e.id),children:e.label},e.id))}),s.map(e=>(0,a.jsx)("div",{id:"panel-".concat(e.id),role:"tabpanel","aria-labelledby":"tab-".concat(e.id),className:(0,p.cn)("mt-4",t===e.id?"block":"hidden"),children:e.content},e.id))]})},b=()=>{let[e,s]=(0,r.useState)(1),[t,x]=(0,r.useState)("standard"),[b,f]=(0,r.useState)({standard:{rows:[],columns:[]},actual:{rows:[],columns:[]},classification:{rows:[],columns:[]},transport:{rows:[],columns:[]},process:{rows:[],columns:[]}}),[g,j]=(0,r.useState)(!1),[v,N]=(0,r.useState)(null),w=(0,r.useRef)({standard:null,actual:null,classification:null,transport:null,process:null}),k=[{id:"standard",label:"기준정보",subtitle:"(기준 정보)",templateUrl:"/api/templates?type=standard"},{id:"actual",label:"실적정보",subtitle:"(실적 데이터)",templateUrl:"/api/templates?type=actual"},{id:"classification",label:"데이터분류",subtitle:"(분류 데이터)",templateUrl:"/api/templates?type=classification"},{id:"transport",label:"운송정보",subtitle:"(운송 데이터)",templateUrl:"/api/templates?type=transport"},{id:"process",label:"공정정보",subtitle:"(공정 데이터)",templateUrl:"/api/templates?type=process"}],Z=async(e,s)=>{j(!0);try{var t;let a=await (0,p.gY)(e),r=(0,p.wu)(a.headers);f(t=>({...t,[s]:{rows:a.rows,columns:r,fileName:e.name}})),N({message:"".concat(null===(t=k.find(e=>e.id===s))||void 0===t?void 0:t.label," 파일이 성공적으로 업로드되었습니다!"),type:"success"})}catch(e){console.error("파일 업로드 오류:",e),N({message:e instanceof Error?e.message:"파일 업로드 중 오류가 발생했습니다.",type:"error"})}finally{j(!1)}},z=(e,s)=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];a&&Z(a,s)},C=e=>{if(w.current[e]){var s;null===(s=w.current[e])||void 0===s||s.click()}},M=e=>{let s=b[e];if(0===s.columns.length)return;let t={};s.columns.forEach(e=>{t[e.key]=""}),f(s=>({...s,[e]:{...s[e],rows:[...s[e].rows,t]}}))},S=(e,s)=>{f(t=>({...t,[e]:{...t[e],rows:t[e].rows.filter((e,t)=>t!==s)}}))},E=(e,s,t,a)=>{f(r=>({...r,[e]:{...r[e],rows:r[e].rows.map((e,r)=>r===s?{...e,[t]:a}:e)}}))},U=e=>{var s;if(0===b[e].rows.length){N({message:"저장할 데이터가 없습니다.",type:"error"});return}N({message:"".concat(null===(s=k.find(s=>s.id===e))||void 0===s?void 0:s.label," 데이터가 저장되었습니다!"),type:"success"})},V=e=>{var s;if(0===b[e].rows.length){N({message:"확인할 데이터가 없습니다.",type:"error"});return}N({message:"".concat(null===(s=k.find(s=>s.id===e))||void 0===s?void 0:s.label," 데이터 확인이 완료되었습니다!"),type:"success"})},_=e=>{let s=b[e],t=k.find(s=>s.id===e);return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:null==t?void 0:t.label}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:null==t?void 0:t.subtitle})]}),s.fileName&&(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["파일: ",s.fileName," (",s.rows.length,"행)"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(h.zx,{asChild:!0,variant:"outline",size:"sm",className:"flex items-center space-x-2",children:(0,a.jsxs)("a",{href:null==t?void 0:t.templateUrl,download:!0,children:[(0,a.jsx)(c.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"템플릿 다운로드"})]})}),(0,a.jsxs)(h.zx,{onClick:()=>C(e),variant:"outline",size:"sm",className:"flex items-center space-x-2",disabled:g,children:[(0,a.jsx)(n.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:g?"처리 중...":"파일 업로드"})]}),(0,a.jsx)("input",{ref:s=>{w.current[e]=s},type:"file",accept:".csv,.xlsx,.xls",onChange:s=>z(s,e),className:"hidden"})]}),s.rows.length>0&&(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"데이터 미리보기"}),(0,a.jsxs)(h.zx,{onClick:()=>M(e),size:"sm",className:"flex items-center space-x-2",children:[(0,a.jsx)(i.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"행 추가"})]})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full bg-white rounded-lg border border-gray-200",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-gray-50",children:[s.columns.map((e,s)=>(0,a.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-200",children:e.header},s)),(0,a.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-200",children:"작업"})]})}),(0,a.jsx)("tbody",{children:s.rows.map((t,r)=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[s.columns.map((s,l)=>(0,a.jsx)("td",{className:"px-3 py-2 border-b border-gray-200",children:(0,a.jsx)(h.II,{value:t[s.key]||"",onChange:t=>E(e,r,s.key,t.target.value),inputSize:"sm",className:"w-full"})},l)),(0,a.jsx)("td",{className:"px-3 py-2 border-b border-gray-200",children:(0,a.jsx)(h.zx,{onClick:()=>S(e,r),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",children:(0,a.jsx)(d.Z,{className:"w-4 h-4"})})})]},r))})]})}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 pt-3",children:[(0,a.jsx)(h.zx,{onClick:()=>U(e),disabled:0===s.rows.length,variant:"outline",size:"sm",children:"저장"}),(0,a.jsx)(h.zx,{onClick:()=>V(e),disabled:0===s.rows.length,size:"sm",children:"확인"})]})]}),0===s.rows.length&&(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(n.Z,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500 mb-2",children:"파일을 업로드하여 데이터를 시작하세요"}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"CSV, Excel 파일을 지원합니다"})]})]})},A=()=>{let e=b.classification;return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"데이터분류"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"(분류 데이터)"})]}),e.fileName&&(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["파일: ",e.fileName," (",e.rows.length,"행)"]})]}),(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(o.Z,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500 mb-2",children:"데이터분류는 읽기 전용입니다"}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"업로드된 데이터를 분류 기준에 따라 조회할 수 있습니다"})]}),e.rows.length>0&&(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"분류 데이터"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full bg-white rounded-lg border border-gray-200",children:[(0,a.jsx)("thead",{children:(0,a.jsx)("tr",{className:"bg-gray-50",children:e.columns.map((e,s)=>(0,a.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-200",children:e.header},s))})}),(0,a.jsx)("tbody",{children:e.rows.map((s,t)=>(0,a.jsx)("tr",{className:"hover:bg-gray-50",children:e.columns.map((e,t)=>(0,a.jsx)("td",{className:"px-3 py-2 border-b border-gray-200 text-sm text-gray-900",children:s[e.key]||""},t))},t))})]})})]})]})},H=()=>_("transport"),I=()=>_("process"),O=e=>{switch(e){case"standard":case"actual":return _(e);case"classification":return A();case"transport":return H();case"process":return I();default:return null}};return(0,a.jsxs)(l.Z,{children:[(0,a.jsxs)("div",{className:"min-h-screen p-4 space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 text-center",children:"데이터 업로드"}),(0,a.jsx)("p",{className:"text-gray-700 text-sm text-center max-w-2xl mx-auto",children:"각 탭에서 필요한 데이터를 업로드하고 관리합니다"})]}),(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-4",children:(0,a.jsx)(y,{tabs:k.map(e=>({id:e.id,label:e.label,content:O(e.id)})),activeTab:t,onTabChange:e=>x(e),variant:"underline"})})]}),v&&(0,a.jsx)("div",{className:"fixed bottom-6 right-6 p-4 rounded-xl shadow-2xl ".concat("success"===v.type?"bg-green-500 text-white":"bg-red-500 text-white"),children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:["success"===v.type?(0,a.jsx)(m,{className:"w-5 h-5"}):(0,a.jsx)(u,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:v.message})]})})]})}}},function(e){e.O(0,[974,348,637,309,691,744],function(){return e(e.s=6421)}),_N_E=e.O()}]);