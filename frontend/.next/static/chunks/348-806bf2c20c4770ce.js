"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[348],{348:function(e,r,t){t.d(r,{B0:function(){return i},cn:function(){return a},wu:function(){return d},Ez:function(){return w},OB:function(){return f},xA:function(){return s},gY:function(){return l}});var n=t(5936),o=t(3531);function a(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,o.m6)((0,n.W)(r))}async function l(e){return new Promise((r,t)=>{let n=new FileReader;n.onload=n=>{try{var o;let a=null===(o=n.target)||void 0===o?void 0:o.result;if(e.name.endsWith(".csv")){let e=function(e){let r=e.split("\n").filter(e=>e.trim());if(0===r.length)return{rows:[],headers:[]};let t=r[0].split(",").map(e=>e.trim()),n=t.map(e=>e.replace(/[^a-zA-Z0-9가-힣]/g,"_").replace(/^_+|_+$/g,""));return{rows:r.slice(1).map((e,r)=>{let t=e.split(",").map(e=>e.trim()),o={};return n.forEach((e,r)=>{o[e]=t[r]||""}),o}),headers:t}}(a);r(e)}else t(Error("현재 CSV 파일만 지원됩니다. XLSX 파일은 향후 지원 예정입니다."))}catch(e){t(Error("파일 파싱 중 오류가 발생했습니다."))}},n.onerror=()=>{t(Error("파일 읽기 중 오류가 발생했습니다."))},e.name.endsWith(".csv")?n.readAsText(e):t(Error("지원하지 않는 파일 형식입니다. CSV 파일을 사용해주세요."))})}function d(e){return e.map(e=>({key:e.replace(/[^a-zA-Z0-9가-힣]/g,"_").replace(/^_+|_+$/g,"").toLowerCase(),header:e}))}var c=t(3771);async function s(e){var r;let t=null!==(r=c.env.NEXT_PUBLIC_API_BASE)&&void 0!==r?r:"",n="".concat(t).concat(e),o=new AbortController,a=setTimeout(()=>o.abort(),1e4);try{let e=await fetch(n,{cache:"no-store",signal:o.signal,headers:{"Content-Type":"application/json"}});if(clearTimeout(a),!e.ok)throw Error("HTTP error! status: ".concat(e.status));return await e.json()}catch(e){if(clearTimeout(a),e instanceof Error&&"AbortError"===e.name)throw Error("Request timeout");throw e}}let i={base:"/api/v1/lca/base",actual:"/api/v1/lca/actual",transport:"/api/v1/lca/transport",process:"/api/v1/lca/process",manage:e=>"/api/v1/lca/manage?segment=".concat(e)};t(8396);class u{static measurePageLoad(){if(window.performance){let e=window.performance.getEntriesByType("navigation")[0];if(e){let r=e.loadEventEnd-e.loadEventStart,t=e.domContentLoadedEventEnd-e.domContentLoadedEventStart;void 0!==window.gtag&&window.gtag("event","performance_measurement",{event_category:"Performance",event_label:"Page Load",value:Math.round(r),custom_metric_1:Math.round(t)})}}}static measureInteraction(e,r){let t=performance.now();r();let n=performance.now()-t;window.gtag&&window.gtag("event","interaction_performance",{event_category:"performance",event_label:e,value:Math.round(n)})}static measureMemoryUsage(){if("memory"in performance){let e=performance.memory,r=e.usedJSHeapSize/1048576,t=e.totalJSHeapSize/1048576,n=e.jsHeapSizeLimit/1048576;u.memoryData={used:Math.round(r),total:Math.round(t),limit:Math.round(n)}}}}u.memoryData=null;var m=t(3771);let f={NEXT_PUBLIC_GATEWAY_URL:m.env.NEXT_PUBLIC_GATEWAY_URL||"https://your-gateway.railway.app",NEXT_PUBLIC_ENV:m.env.NEXT_PUBLIC_ENV||"development",NEXT_PUBLIC_APP_NAME:m.env.NEXT_PUBLIC_APP_NAME||"greensteel",NEXT_PUBLIC_APP_VERSION:m.env.NEXT_PUBLIC_APP_VERSION||"1.0.0",NEXT_PUBLIC_ENABLE_LCA:"true"===m.env.NEXT_PUBLIC_ENABLE_LCA,NEXT_PUBLIC_ENABLE_CBAM:"true"===m.env.NEXT_PUBLIC_ENABLE_CBAM,NEXT_PUBLIC_ENABLE_DATA_UPLOAD:"true"===m.env.NEXT_PUBLIC_ENABLE_DATA_UPLOAD};if(m.env.NEXT_PUBLIC_GATEWAY_URL)try{let e=new URL(f.NEXT_PUBLIC_GATEWAY_URL);"localhost"===e.hostname||"127.0.0.1"===e.hostname||e.hostname.includes("3000")}catch(e){}var g=t(8757);let _=new Map,A=e=>{let{method:r,url:t,data:n,params:o}=e;return"".concat((null==r?void 0:r.toUpperCase())||"GET",":").concat(t,":").concat(JSON.stringify(n||{}),":").concat(JSON.stringify(o||{}))},b=e=>{try{let r=new URL(e),t=new URL(f.NEXT_PUBLIC_GATEWAY_URL);return r.hostname===t.hostname}catch(e){return!1}},p=()=>{if("undefined"!=typeof document){let e=document.querySelector('meta[name="csrf-token"]');return(null==e?void 0:e.getAttribute("content"))||null}return null},h=async function(e,r){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;try{return await e(r)}catch(o){var n;if(t>0&&((null===(n=o.response)||void 0===n?void 0:n.status)&&o.response.status>=500||!o.response))return await new Promise(e=>setTimeout(e,1e3*(4-t))),h(e,r,t-1);throw o}},E=g.Z.create({baseURL:f.NEXT_PUBLIC_GATEWAY_URL,timeout:3e4,headers:{"Content-Type":"application/json"}});E.interceptors.request.use(e=>{let r=A(e);if(_.has(r)){let e=_.get(r);e&&e.abort()}let t=new AbortController;if(e.signal=t.signal,_.set(r,t),e.url&&!b(e.baseURL+e.url))throw Error("Direct service access is not allowed. Use Gateway only.");let n=p();n&&(e.headers["X-CSRF-Token"]=n);{let r=localStorage.getItem("auth_token");r&&(e.headers.Authorization="Bearer ".concat(r))}return e},e=>Promise.reject(e)),E.interceptors.response.use(e=>{let r=A(e.config);return _.delete(r),e},async e=>{var r,t;if(e.config){let r=A(e.config);_.delete(r)}if((null===(r=e.response)||void 0===r?void 0:r.status)>=500||!e.response){let r=e.config;if(r&&!r._retry)return r._retry=!0,h(E,r)}return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(localStorage.removeItem("auth_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user_email"),window.location.href="/"),Promise.reject(e)});var N=t(3771);async function v(e){try{console.log("영문 주소 변환 시작:",e);let r=document.createElement("script"),t="jusoCallback_"+Date.now();return new Promise((n,o)=>{window[t]=a=>{try{if(console.log("API 응답 데이터:",a),"0"!==a.results.common.errorCode){o(Error("주소 검색 API 에러: ".concat(a.results.common.errorMessage)));return}if(!a.results.juso||0===a.results.juso.length){console.warn("검색된 주소가 없습니다:",e),n(null);return}let r=a.results.juso[0];console.log("첫 번째 결과:",r);let t={roadAddr:r.roadAddr||"",jibunAddr:r.jibunAddr||"",engAddr:r.engAddr||"",zipNo:r.zipNo||"",siNm:r.siNm||"",sggNm:r.sggNm||"",emdNm:r.emdNm||"",rn:r.rn||"",buldMnnm:r.buldMnnm||"",buldSlno:r.buldSlno||""};console.log("API 응답에서 roadAddr:",r.roadAddr),console.log("API 응답에서 engAddr:",r.engAddr),console.log("변환된 주소:",t),n(t)}catch(e){o(e)}finally{delete window[t],document.head.removeChild(r)}},r.src="https://business.juso.go.kr/addrlink/addrEngApiJsonp.do?currentPage=1&countPerPage=10&keyword=".concat(encodeURIComponent(e),"&confmKey=").concat(N.env.NEXT_PUBLIC_ADMINISTRATIVE_API_KEY,"&resultType=json&callback=").concat(t),r.onerror=()=>{o(Error("주소 검색 API 스크립트 로드 실패")),delete window[t]},document.head.appendChild(r),setTimeout(()=>{o(Error("주소 검색 API 타임아웃")),delete window[t],document.head.contains(r)&&document.head.removeChild(r)},1e4)})}catch(e){return console.error("주소 변환 중 오류 발생:",e),null}}async function w(e){try{console.log("주소 영문 변환 시작:",e);let r=e.fullAddress||"".concat(e.cityName||""," ").concat(e.roadAddress||""," ").concat(e.buildingNumber||"").trim();if(!r)throw Error("검색할 주소 키워드가 없습니다.");console.log("전체 주소로 검색:",r);let t=await v(r);if(!t)return console.warn("영문 주소 변환 실패, 카카오 주소 그대로 사용"),{roadAddress:e.roadAddress||"",buildingNumber:e.buildingNumber||"",cityName:e.cityName||"",postalCode:e.postalCode||"",englishAddress:"",englishCity:"",englishRoad:"",fullAddress_en:""};console.log("영문 주소 원본 (roadAddr):",t.roadAddr);let n=function(e){try{console.log("영문 주소 파싱 시작:",e);let r=e.split(",").map(e=>e.trim());if(r.length<2)return console.warn("영문 주소 형식이 올바르지 않습니다:",e),{buildingNumber:"",road:"",city:""};let t=r[0],n=t.split(" "),o="",a="";n.length>=2?(o=n[0],a=n.slice(1).join(" ")):a=t;let l="";r.length>=3?l=r[r.length-1]:2===r.length&&(l=r[1]);let d={buildingNumber:o,road:a,city:l};return console.log("영문 주소 파싱 결과:",d),d}catch(e){return console.error("영문 주소 파싱 중 오류 발생:",e),{buildingNumber:"",road:"",city:""}}}(t.roadAddr);return console.log("영문 주소 파싱 결과:",n),{roadAddress:e.roadAddress||"",buildingNumber:e.buildingNumber||"",cityName:e.cityName||"",postalCode:t.zipNo||e.postalCode||"",englishAddress:t.roadAddr||"",englishCity:n.city||"",englishRoad:n.road||"",fullAddress_en:t.roadAddr||""}}catch(r){return console.error("주소 영문 변환 중 오류 발생:",r),{roadAddress:e.roadAddress||"",buildingNumber:e.buildingNumber||"",cityName:e.cityName||"",postalCode:e.postalCode||"",englishAddress:"",englishCity:"",englishRoad:"",fullAddress_en:""}}}t(7574);var y=t(2794);(0,y.$)("f0dab76ad8b978edafa57f40f0614f434c266667"),(0,y.$)("ae2909953c9843fcb7cf73cc9f635022b5921591"),(0,y.$)("35ad2ffa06109e023244c800a2eb36688815b4bd"),(0,y.$)("01bbb94767495031ed36a27c15be927efd758312"),(0,y.$)("a8f3f78696c27685b43bee4a549621ecd64bf1a9"),(0,y.$)("d0ba8124b990a82ec6220e0f256bb7e3dd8a6adc"),(0,y.$)("33c957743bbaffdb936593717dc52afa98830904"),(0,y.$)("e5a2a6e1ea9ecff0ccfc4ca7d8db097247eace55"),(0,y.$)("da731b40f5c8af63b81bd7654883619b946669e6"),(0,y.$)("beb0b53a2aa66dd4f741860cd52c619a94d0deea"),(0,y.$)("348b6854454abe052e9d2623ded510facfd0c4cf"),(0,y.$)("4fda3851d68a1469d887b2c2f687463b2ad173a9"),(0,y.$)("83ece2c34d896fa1434396ed585b96543937121c"),(0,y.$)("89f6aef2263597030f222ea29938ded96852c439"),(0,y.$)("702adfd65ddbfc89a1e2ff008b9d7b699bdd69b0")}}]);