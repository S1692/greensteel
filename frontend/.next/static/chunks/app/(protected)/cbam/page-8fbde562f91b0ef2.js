(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[226],{9428:function(e,t,s){Promise.resolve().then(s.bind(s,2736))},2736:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return y}});var l=s(3107),r=s(8396),i=s(3902),a=s(6245),n=s(6733);let o=()=>{let[e,t,s]=(0,i.Rr)([]),[o,c,d]=(0,i.ll)([]),[x,h]=(0,r.useState)(!1),[m,u]=(0,r.useState)(null),p=(0,r.useCallback)(()=>{h(!0)},[]),b=(0,r.useCallback)(e=>{let s={id:"product-".concat(Date.now()),type:"default",position:{x:400*Math.random()+100,y:300*Math.random()+100},data:{label:e.name,product:e}};t(e=>[...e,s]),h(!1),u(null)},[t]),g=(0,r.useCallback)(()=>{let e={id:"group-".concat(Date.now()),type:"group",position:{x:400*Math.random()+100,y:300*Math.random()+100},data:{label:"프로세스 그룹"},style:{width:200,height:100}};t(t=>[...t,e])},[t]),N=(0,r.useCallback)(e=>{if(e.source&&e.target){let t={id:"edge-".concat(Date.now()),source:e.source,target:e.target,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle};c(e=>(0,a.Z_)(t,e))}},[c]);return(0,l.jsxs)("div",{className:"w-full h-full relative",children:[(0,l.jsxs)("div",{className:"absolute top-4 left-4 z-10 flex gap-2",children:[(0,l.jsxs)("button",{onClick:p,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200 flex items-center gap-2 shadow-lg",children:[(0,l.jsx)(n.Z,{className:"w-4 h-4"}),"제품 노드"]}),(0,l.jsxs)("button",{onClick:g,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors duration-200 flex items-center gap-2 shadow-lg",children:[(0,l.jsx)(n.Z,{className:"w-4 h-4"}),"그룹 노드"]})]}),(0,l.jsxs)(i.x$,{nodes:e,edges:o,onNodesChange:s,onEdgesChange:d,onConnect:N,fitView:!0,className:"bg-slate-800",style:{width:"100%",height:"100%"},defaultViewport:{x:0,y:0,zoom:1},minZoom:.1,maxZoom:4,zoomOnScroll:!0,panOnScroll:!1,zoomOnPinch:!0,panOnDrag:!0,children:[(0,l.jsx)(i.Aq,{color:"#475569",gap:20,size:1}),(0,l.jsx)(i.a9,{className:"bg-slate-700 border border-slate-600",position:"bottom-right",style:{width:200,height:120}}),(0,l.jsx)(i.ZX,{className:"bg-white border border-slate-300 rounded-lg shadow-lg",position:"bottom-left"})]}),x&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,l.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 w-full max-w-2xl mx-4 border border-slate-600 shadow-2xl",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,l.jsx)("h3",{className:"text-xl font-semibold text-white",children:"제품 노드 추가"}),(0,l.jsx)("button",{onClick:()=>h(!1),className:"text-slate-400 hover:text-white transition-colors",children:(0,l.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[{id:"1",name:"고품질 철강 제품",type:"Steel",carbonIntensity:1.8,productionCapacity:5e3,location:"포항제철소"},{id:"2",name:"알루미늄 합금",type:"Aluminum",carbonIntensity:2.1,productionCapacity:3e3,location:"울산공장"},{id:"3",name:"시멘트 제품",type:"Cement",carbonIntensity:.9,productionCapacity:8e3,location:"강릉공장"}].map(e=>(0,l.jsxs)("div",{className:"p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 ".concat((null==m?void 0:m.id)===e.id?"border-blue-500 bg-blue-500/10":"border-slate-600 bg-slate-700 hover:border-slate-500 hover:bg-slate-600"),onClick:()=>u(e),children:[(0,l.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,l.jsx)("h4",{className:"font-semibold text-white",children:e.name}),(0,l.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-slate-600 text-slate-300",children:e.type})]}),(0,l.jsxs)("div",{className:"space-y-1 text-sm text-slate-300",children:[(0,l.jsxs)("p",{children:["탄소집약도: ",e.carbonIntensity," tCO2/t"]}),(0,l.jsxs)("p",{children:["생산능력: ",e.productionCapacity.toLocaleString()," t/년"]}),(0,l.jsxs)("p",{children:["위치: ",e.location]})]})]},e.id))}),(0,l.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,l.jsx)("button",{onClick:()=>h(!1),className:"px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition-colors duration-200",children:"취소"}),(0,l.jsx)("button",{onClick:()=>m&&b(m),disabled:!m,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"노드 추가"})]})]})})]})};var c=()=>(0,l.jsx)(i.tV,{children:(0,l.jsx)(o,{})}),d=s(6201),x=s(2767),h=s(9247),m=s(9853),u=s(8623),p=s(391),b=s(5729),g=s(9537),N=s(324),f=s(1860),j=s(1632),w=s(634),v=s(9571);function y(){let[e,t]=(0,r.useState)("overview"),[s,a]=(0,r.useState)(""),[n,o]=(0,r.useState)("2025"),[y,_]=(0,r.useState)([{id:11,name:"포항제철소",reportingYear:"2025"}]),[C,k]=(0,r.useState)({materialType:"",quantity:"",carbonIntensity:"",transportDistance:"",transportMode:"sea",countryOfOrigin:"",euEtsPrice:"85.50"}),[E,A]=(0,r.useState)(null),[L,B]=(0,r.useState)({name:"",cn_code:"",period_start:"",period_end:"",production_qty:0,sales_qty:0,export_qty:0,inventory_qty:0,defect_rate:0}),[S,U]=(0,r.useState)([]),[P,q]=(0,r.useState)(!1),[I,T]=(0,r.useState)(null),Z=(0,r.useCallback)(()=>{if(s&&n){let e={id:y.length>0?Math.max(...y.map(e=>e.id))+1:1,name:s,reportingYear:n};_(t=>[...t,e]),a(""),T({message:"사업장이 성공적으로 생성되었습니다!",type:"success"})}else T({message:"사업장명과 보고기간을 입력해주세요.",type:"error"})},[s,n,y]),M=(0,r.useCallback)(e=>{_(t=>t.filter(t=>t.id!==e)),T({message:"사업장이 삭제되었습니다.",type:"info"})},[]),O=(0,r.useCallback)(e=>{T({message:"사업장 ID ".concat(e,"의 제품 관리 페이지로 이동합니다."),type:"info"})},[]);(0,r.useCallback)(()=>{T({message:"전체 제품 관리 페이지로 이동합니다.",type:"info"})},[]);let X=(0,r.useCallback)(async()=>{try{let e=await x.ZP.get("/api/v1/boundary/product");U(e.data.products||[])}catch(e){U([{product_id:"dummy-1",name:"테스트 제품 1",cn_code:"7208.51.00",production_qty:1e3,sales_qty:800,export_qty:200,inventory_qty:150,defect_rate:.05,period_start:"2024-01-01",period_end:"2024-12-31"},{product_id:"dummy-2",name:"테스트 제품 2",cn_code:"7208.52.00",production_qty:2e3,sales_qty:1800,export_qty:400,inventory_qty:300,defect_rate:.03,period_start:"2024-01-01",period_end:"2024-12-31"},{product_id:"dummy-3",name:"테스트 제품 3",cn_code:"7208.53.00",production_qty:1500,sales_qty:1200,export_qty:300,inventory_qty:200,defect_rate:.07,period_start:"2024-01-01",period_end:"2024-12-31"},{product_id:"dummy-4",name:"고품질 철강 제품",cn_code:"7208.54.00",production_qty:2500,sales_qty:2200,export_qty:500,inventory_qty:400,defect_rate:.02,period_start:"2024-01-01",period_end:"2024-12-31"}])}},[]);return(0,r.useEffect)(()=>{X()},[X]),(0,l.jsxs)(d.Z,{children:[(0,l.jsxs)("div",{className:"w-full h-full p-4 lg:p-6 xl:p-8 space-y-6",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,l.jsx)("h1",{className:"stitch-h1 text-2xl lg:text-3xl xl:text-4xl font-bold",children:"CBAM 관리"}),(0,l.jsx)("p",{className:"stitch-caption text-white/60 text-sm lg:text-base",children:"탄소국경조정메커니즘(CBAM) 프로세스 및 계산 관리"})]}),(0,l.jsxs)("div",{className:"flex space-x-1 p-1 bg-white/5 rounded-lg overflow-x-auto",children:[(0,l.jsxs)("button",{onClick:()=>t("overview"),className:"flex-shrink-0 px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center gap-2 ".concat("overview"===e?"bg-primary text-white":"text-white/60 hover:text-white hover:bg-white/5"),children:[(0,l.jsx)(v.Z,{className:"w-4 h-4"}),"개요"]}),(0,l.jsxs)("button",{onClick:()=>t("install"),className:"flex-shrink-0 px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center gap-2 ".concat("install"===e?"bg-primary text-white":"text-white/60 hover:text-white hover:bg-white/5"),children:[(0,l.jsx)(p.Z,{className:"w-4 h-4"}),"사업장 관리"]}),(0,l.jsxs)("button",{onClick:()=>t("flow"),className:"flex-shrink-0 px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center gap-2 ".concat("flow"===e?"bg-primary text-white":"text-white/60 hover:text-white hover:bg-white/5"),children:[(0,l.jsx)(j.Z,{className:"w-4 h-4"}),"시설군 설정"]}),(0,l.jsxs)("button",{onClick:()=>t("reports"),className:"flex-shrink-0 px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center gap-2 ".concat("reports"===e?"bg-primary text-white":"text-white/60 hover:text-white hover:bg-white/5"),children:[(0,l.jsx)(b.Z,{className:"w-4 h-4"}),"보고서"]}),(0,l.jsxs)("button",{onClick:()=>t("settings"),className:"flex-shrink-0 px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center gap-2 ".concat("settings"===e?"bg-primary text-white":"text-white/60 hover:text-white hover:bg-white/5"),children:[(0,l.jsx)(w.Z,{className:"w-4 h-4"}),"설정"]})]}),(0,l.jsxs)("div",{className:"flex-1 min-h-0",children:["overview"===e&&(0,l.jsxs)("div",{className:"h-full space-y-6",children:[(0,l.jsxs)("div",{className:"stitch-card p-6",children:[(0,l.jsx)("h3",{className:"stitch-h1 text-xl font-semibold mb-4",children:"CBAM 개요"}),(0,l.jsx)("p",{className:"stitch-caption text-white/60 mb-6",children:"탄소국경조정메커니즘(CBAM)은 EU가 수입되는 특정 상품의 탄소 배출량에 대해 탄소 가격을 부과하는 제도입니다."}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,l.jsxs)("div",{className:"p-4 bg-white/5 rounded-lg",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,l.jsx)(h.Z,{className:"w-5 h-5 text-blue-400"}),(0,l.jsx)("h4",{className:"font-semibold text-white text-sm",children:"적용 대상"})]}),(0,l.jsx)("p",{className:"text-white/60 text-xs",children:"철강, 시멘트, 알루미늄, 비료, 전기, 수소 등"})]}),(0,l.jsxs)("div",{className:"p-4 bg-white/5 rounded-lg",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,l.jsx)(m.Z,{className:"w-5 h-5 text-green-400"}),(0,l.jsx)("h4",{className:"font-semibold text-white text-sm",children:"탄소 가격"})]}),(0,l.jsx)("p",{className:"text-white/60 text-xs",children:"EU ETS 평균 가격 기준으로 계산"})]}),(0,l.jsxs)("div",{className:"p-4 bg-white/5 rounded-lg",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,l.jsx)(u.Z,{className:"w-5 h-5 text-purple-400"}),(0,l.jsx)("h4",{className:"font-semibold text-white text-sm",children:"시행 일정"})]}),(0,l.jsx)("p",{className:"text-white/60 text-xs",children:"2023년 10월부터 단계적 시행"})]})]})]}),(0,l.jsxs)("div",{className:"stitch-card p-6",children:[(0,l.jsx)("h3",{className:"stitch-h1 text-xl font-semibold mb-4",children:"주요 지표"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,l.jsxs)("div",{className:"p-4 bg-gradient-to-br from-blue-500/20 to-blue-600/20 rounded-lg border border-blue-500/30",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-blue-400 mb-1",children:y.length}),(0,l.jsx)("div",{className:"text-sm text-blue-300",children:"등록된 사업장"})]}),(0,l.jsxs)("div",{className:"p-4 bg-gradient-to-br from-green-500/20 to-green-600/20 rounded-lg border border-green-500/30",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-green-400 mb-1",children:S.length}),(0,l.jsx)("div",{className:"text-sm text-green-300",children:"등록된 제품"})]}),(0,l.jsxs)("div",{className:"p-4 bg-gradient-to-br from-purple-500/20 to-purple-600/20 rounded-lg border border-purple-500/30",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-purple-400 mb-1",children:S.reduce((e,t)=>e+(t.production_qty||0),0).toLocaleString()}),(0,l.jsx)("div",{className:"text-sm text-purple-300",children:"총 생산량 (톤)"})]}),(0,l.jsxs)("div",{className:"p-4 bg-gradient-to-br from-orange-500/20 to-orange-600/20 rounded-lg border border-orange-500/30",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-orange-400 mb-1",children:E?E.cbamCharge.toFixed(2):"0.00"}),(0,l.jsx)("div",{className:"text-sm text-orange-300",children:"CBAM 부과금 (€)"})]})]})]})]}),"install"===e&&(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"stitch-card p-6",children:[(0,l.jsxs)("h3",{className:"stitch-h1 text-xl font-semibold mb-4 flex items-center gap-2",children:[(0,l.jsx)(p.Z,{className:"w-5 h-5 text-blue-400"}),"사업장 생성"]}),(0,l.jsxs)("form",{onSubmit:e=>{e.preventDefault(),Z()},className:"space-y-6",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"businessSiteName",className:"block text-sm font-medium text-white/80 mb-2",children:"사업장명 *"}),(0,l.jsx)("input",{type:"text",id:"businessSiteName",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"예: 포항제철소",value:s,onChange:e=>a(e.target.value),required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"reportingYear",className:"block text-sm font-medium text-white/80 mb-2",children:"보고기간 *"}),(0,l.jsx)("input",{type:"number",id:"reportingYear",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"예: 2025",min:"2000",max:"2100",value:n,onChange:e=>o(e.target.value),required:!0})]})]}),(0,l.jsx)("div",{className:"flex justify-end pt-6",children:(0,l.jsx)("button",{type:"submit",className:"px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition-colors duration-200",children:"사업장 생성"})})]})]}),(0,l.jsxs)("div",{className:"stitch-card p-6",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,l.jsxs)("h3",{className:"stitch-h1 text-xl font-semibold flex items-center gap-2",children:[(0,l.jsx)(b.Z,{className:"w-5 h-5 text-purple-400"}),"등록된 사업장 목록 (",y.length,"개)"]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsxs)("select",{className:"px-3 py-2 bg-white/10 border border-white/20 rounded-md text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,l.jsx)("option",{value:"name",children:"이름순"}),(0,l.jsx)("option",{value:"id",children:"ID순"})]}),(0,l.jsx)("button",{className:"px-3 py-2 bg-white/10 border border-white/20 rounded-md text-white text-sm hover:bg-white/20 transition-colors duration-200",children:(0,l.jsx)(g.Z,{className:"w-4 h-4"})}),(0,l.jsxs)("button",{className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-md transition-colors duration-200 flex items-center gap-2",children:[(0,l.jsx)(N.Z,{className:"w-4 h-4"}),"새로고침"]})]})]}),(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:0===y.length?(0,l.jsx)("p",{className:"text-white/60 text-center col-span-full py-8",children:"등록된 사업장이 없습니다."}):y.map(e=>(0,l.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4 border border-white/20 hover:bg-white/20 transition-all duration-200",children:[(0,l.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,l.jsx)("h4",{className:"text-white font-semibold text-lg",children:e.name}),(0,l.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-blue-500/20 text-blue-300",children:["ID: ",e.id]})]}),(0,l.jsx)("div",{className:"space-y-1 mb-3",children:(0,l.jsxs)("p",{className:"text-gray-300 text-sm",children:["보고기간: ",e.reportingYear,"년"]})}),(0,l.jsxs)("div",{className:"mt-3 pt-3 border-t border-white/10 flex gap-2",children:[(0,l.jsx)("button",{onClick:()=>O(e.id),className:"flex-1 px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-md transition-colors duration-200",children:"제품 관리"}),(0,l.jsx)("button",{onClick:()=>M(e.id),className:"px-3 py-2 bg-red-600 hover:bg-red-700 text-white text-sm font-medium rounded-md transition-colors duration-200",children:(0,l.jsx)(f.Z,{className:"w-4 h-4"})})]})]},e.id))})]})]}),"flow"===e&&(0,l.jsx)("div",{className:"space-y-6",children:(0,l.jsxs)("div",{className:"stitch-card p-6",children:[(0,l.jsxs)("h3",{className:"stitch-h1 text-xl font-semibold mb-4 flex items-center gap-2",children:[(0,l.jsx)(j.Z,{className:"w-5 h-5 text-green-400"}),"CBAM 시설군 설정"]}),(0,l.jsx)("p",{className:"stitch-caption text-white/60 mb-6",children:"CBAM 배출량 산정을 위한 경계를 설정하고 노드를 생성합니다."}),(0,l.jsx)("div",{className:"h-[700px] w-full border border-white/20 rounded-lg overflow-hidden",children:(0,l.jsx)(i.tV,{children:(0,l.jsx)(c,{})})})]})}),"reports"===e&&(0,l.jsx)("div",{className:"space-y-6",children:(0,l.jsxs)("div",{className:"stitch-card p-6",children:[(0,l.jsxs)("h3",{className:"stitch-h1 text-xl font-semibold mb-4 flex items-center gap-2",children:[(0,l.jsx)(b.Z,{className:"w-5 h-5 text-yellow-400"}),"CBAM 보고서"]}),(0,l.jsx)("p",{className:"stitch-caption text-white/60 mb-6",children:"CBAM 관련 보고서를 생성하고 관리합니다."}),(0,l.jsx)("div",{className:"p-6 bg-white/5 rounded-lg border border-white/20",children:(0,l.jsx)("p",{className:"text-white/60 text-sm",children:"보고서 기능은 개발 중입니다..."})})]})}),"settings"===e&&(0,l.jsx)("div",{className:"space-y-6",children:(0,l.jsxs)("div",{className:"stitch-card p-6",children:[(0,l.jsxs)("h3",{className:"stitch-h1 text-xl font-semibold mb-4 flex items-center gap-2",children:[(0,l.jsx)(w.Z,{className:"w-5 h-5 text-gray-400"}),"CBAM 설정"]}),(0,l.jsx)("p",{className:"stitch-caption text-white/60 mb-6",children:"CBAM 관련 설정을 구성합니다."}),(0,l.jsx)("div",{className:"p-6 bg-white/5 rounded-lg border border-white/20",children:(0,l.jsx)("p",{className:"text-white/60 text-sm",children:"설정 기능은 개발 중입니다..."})})]})})]})]}),I&&(0,l.jsxs)("div",{className:"fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 ".concat("success"===I.type?"bg-green-500 text-white":"error"===I.type?"bg-red-500 text-white":"bg-blue-500 text-white"),children:[(0,l.jsx)("span",{children:I.message}),(0,l.jsx)("button",{onClick:()=>T(null),className:"ml-2 hover:opacity-80",children:"✕"})]})]})}},2767:function(e,t,s){"use strict";var l=s(8757),r=s(9761);let i=new Map,a=e=>{let{method:t,url:s,data:l,params:r}=e;return"".concat((null==t?void 0:t.toUpperCase())||"GET",":").concat(s,":").concat(JSON.stringify(l||{}),":").concat(JSON.stringify(r||{}))},n=e=>{try{let t=new URL(e),s=new URL(r.O.NEXT_PUBLIC_GATEWAY_URL);return t.hostname===s.hostname}catch(e){return!1}},o=()=>{if("undefined"!=typeof document){let e=document.querySelector('meta[name="csrf-token"]');return(null==e?void 0:e.getAttribute("content"))||null}return null},c=async function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;try{return await e(t)}catch(r){var l;if(s>0&&((null===(l=r.response)||void 0===l?void 0:l.status)&&r.response.status>=500||!r.response))return await new Promise(e=>setTimeout(e,1e3*(4-s))),c(e,t,s-1);throw r}},d=l.Z.create({baseURL:r.O.NEXT_PUBLIC_GATEWAY_URL,timeout:3e4,headers:{"Content-Type":"application/json"}});d.interceptors.request.use(e=>{let t=a(e);if(i.has(t)){let e=i.get(t);e&&e.abort()}let s=new AbortController;if(e.signal=s.signal,i.set(t,s),e.url&&!n(e.baseURL+e.url))throw Error("Direct service access is not allowed. Use Gateway only.");let l=o();l&&(e.headers["X-CSRF-Token"]=l);{let t=localStorage.getItem("auth_token");t&&(e.headers.Authorization="Bearer ".concat(t))}return e},e=>Promise.reject(e)),d.interceptors.response.use(e=>{let t=a(e.config);return i.delete(t),e},async e=>{var t,s;if(e.config){let t=a(e.config);i.delete(t)}if((null===(t=e.response)||void 0===t?void 0:t.status)>=500||!e.response){let t=e.config;if(t&&!t._retry)return t._retry=!0,c(d,t)}return(null===(s=e.response)||void 0===s?void 0:s.status)===401&&(localStorage.removeItem("auth_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user_email"),window.location.href="/"),Promise.reject(e)}),t.ZP=d},9761:function(e,t,s){"use strict";s.d(t,{O:function(){return r}});var l=s(3771);let r={NEXT_PUBLIC_GATEWAY_URL:"http://localhost:8080",NEXT_PUBLIC_ENV:l.env.NEXT_PUBLIC_ENV||"development",NEXT_PUBLIC_APP_NAME:"GreenSteel",NEXT_PUBLIC_APP_VERSION:"1.0.0",NEXT_PUBLIC_ENABLE_LCA:"true"===l.env.NEXT_PUBLIC_ENABLE_LCA,NEXT_PUBLIC_ENABLE_CBAM:"true"===l.env.NEXT_PUBLIC_ENABLE_CBAM,NEXT_PUBLIC_ENABLE_DATA_UPLOAD:"true"===l.env.NEXT_PUBLIC_ENABLE_DATA_UPLOAD};try{let e=new URL(r.NEXT_PUBLIC_GATEWAY_URL);"localhost"===e.hostname||"127.0.0.1"===e.hostname||e.hostname.includes("3000")}catch(e){}}},function(e){e.O(0,[714,341,757,509,201,309,691,744],function(){return e(e.s=9428)}),_N_E=e.O()}]);